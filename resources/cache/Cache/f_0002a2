
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){b(require("jquery"))}else{b(jQuery)}}}(function(m){var j=/\+/g;function o(a){return i.raw?a:encodeURIComponent(a)}function l(a){return i.raw?a:decodeURIComponent(a)}function k(a){return o(i.json?JSON.stringify(a):String(a))}function p(b){if(b.indexOf('"')===0){b=b.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{b=decodeURIComponent(b.replace(j," "));return i.json?JSON.parse(b):b}catch(a){}}function n(b,c){var a=i.raw?b:p(b);return m.isFunction(c)?c(a):a}var i=m.cookie=function(b,c,y){if(c!==undefined&&!m.isFunction(c)){y=m.extend({},i.defaults,y);if(typeof y.expires==="number"){var a=y.expires,z=y.expires=new Date();z.setTime(+z+a*86400000)}return(document.cookie=[o(b),"=",k(c),y.expires?"; expires="+y.expires.toUTCString():"",y.path?"; path="+y.path:"",y.domain?"; domain="+y.domain:"",y.secure?"; secure":""].join(""))}var t=b?undefined:{};var A=document.cookie?document.cookie.split("; "):[];for(var d=0,f=A.length;d<f;d++){var e=A[d].split("=");var h=l(e.shift());var g=e.join("=");if(b&&b===h){t=n(g,c);break}if(!b&&(g=n(g))!==undefined){t[h]=g}}return t};i.defaults={};m.removeCookie=function(a,b){if(m.cookie(a)===undefined){return false}m.cookie(a,"",m.extend({},b,{expires:-1}));return !m.cookie(a)}}));
/*! jquery.mousewheel.min.js (http://brandon.aaron.sh)
 * Version: 3.1.11
 */
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b:b(jQuery)}(function(v){function u(A){var z=A||window.event,y=n.call(arguments,1),w=0,k=0,i=0,f=0,e=0,d=0;if(A=v.event.fix(z),A.type="mousewheel","detail" in z&&(i=-1*z.detail),"wheelDelta" in z&&(i=z.wheelDelta),"wheelDeltaY" in z&&(i=z.wheelDeltaY),"wheelDeltaX" in z&&(k=-1*z.wheelDeltaX),"axis" in z&&z.axis===z.HORIZONTAL_AXIS&&(k=-1*i,i=0),w=0===i?k:i,"deltaY" in z&&(i=-1*z.deltaY,w=i),"deltaX" in z&&(k=z.deltaX,0===i&&(w=-1*k)),0!==i||0!==k){if(1===z.deltaMode){var c=v.data(this,"mousewheel-line-height");w*=c,i*=c,k*=c}else{if(2===z.deltaMode){var a=v.data(this,"mousewheel-page-height");w*=a,i*=a,k*=a}}if(f=Math.max(Math.abs(i),Math.abs(k)),(!q||q>f)&&(q=f,s(z,f)&&(q/=40)),s(z,f)&&(w/=40,k/=40,i/=40),w=Math[w>=1?"floor":"ceil"](w/q),k=Math[k>=1?"floor":"ceil"](k/q),i=Math[i>=1?"floor":"ceil"](i/q),l.settings.normalizeOffset&&this.getBoundingClientRect){var B=this.getBoundingClientRect();e=A.clientX-B.left,d=A.clientY-B.top}return A.deltaX=k,A.deltaY=i,A.deltaFactor=q,A.offsetX=e,A.offsetY=d,A.deltaMode=0,y.unshift(A,w,k,i),r&&clearTimeout(r),r=setTimeout(t,200),(v.event.dispatch||v.event.handle).apply(this,y)}}function t(){q=null}function s(d,c){return l.settings.adjustOldDeltas&&"mousewheel"===d.type&&c%120===0}var r,q,p=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],n=Array.prototype.slice;if(v.event.fixHooks){for(var m=p.length;m;){v.event.fixHooks[p[--m]]=v.event.mouseHooks}}var l=v.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener){for(var a=o.length;a;){this.addEventListener(o[--a],u,!1)}}else{this.onmousewheel=u}v.data(this,"mousewheel-line-height",l.getLineHeight(this)),v.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=o.length;a;){this.removeEventListener(o[--a],u,!1)}}else{this.onmousewheel=null}v.removeData(this,"mousewheel-line-height"),v.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){var d=v(a)["offsetParent" in v.fn?"offsetParent":"parent"]();return d.length||(d=v("body")),parseInt(d.css("fontSize"),10)},getPageHeight:function(a){return v(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};v.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});(function(d,e,f){(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery-mousewheel"],a)}else{a(jQuery)}}(function(r){var u="mCustomScrollbar",y="mCS",c=".mCustomScrollbar",t={setWidth:false,setHeight:false,setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:true,autoHideScrollbar:false,autoExpandScrollbar:false,alwaysShowScrollbar:0,snapAmount:null,snapOffset:0,mouseWheel:{enable:true,scrollAmount:"auto",axis:"y",preventDefault:false,deltaFactor:"auto",normalizeDelta:false,invert:false,disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{enable:false,scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:true,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoExpandHorizontalScroll:false,autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:true,updateOnImageLoad:true,updateOnSelectorChange:false},theme:"light",callbacks:{onScrollStart:false,onScroll:false,onTotalScroll:false,onTotalScrollBack:false,whileScrolling:false,onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:true,onOverflowY:false,onOverflowX:false,onOverflowYNone:false,onOverflowXNone:false},live:false,liveSelector:null},p=0,a={},v=function(g){if(a[g]){clearTimeout(a[g]);s._delete.call(null,a[g])}},q=(d.attachEvent&&!d.addEventListener)?1:0,b=false,w={init:function(i){var i=r.extend(true,{},t,i),j=s._selector.call(this);if(i.live){var g=i.liveSelector||this.selector||c,h=r(g);if(i.live==="off"){v(g);return}a[g]=setTimeout(function(){h.mCustomScrollbar(i);if(i.live==="once"&&h.length){v(g)}},500)}else{v(g)}i.setWidth=(i.set_width)?i.set_width:i.setWidth;i.setHeight=(i.set_height)?i.set_height:i.setHeight;i.axis=(i.horizontalScroll)?"x":s._findAxis.call(null,i.axis);i.scrollInertia=i.scrollInertia>0&&i.scrollInertia<17?17:i.scrollInertia;if(typeof i.mouseWheel!=="object"&&i.mouseWheel==true){i.mouseWheel={enable:true,scrollAmount:"auto",axis:"y",preventDefault:false,deltaFactor:"auto",normalizeDelta:false,invert:false}}i.mouseWheel.scrollAmount=!i.mouseWheelPixels?i.mouseWheel.scrollAmount:i.mouseWheelPixels;i.mouseWheel.normalizeDelta=!i.advanced.normalizeMouseWheelDelta?i.mouseWheel.normalizeDelta:i.advanced.normalizeMouseWheelDelta;i.scrollButtons.scrollType=s._findScrollButtonsType.call(null,i.scrollButtons.scrollType);s._theme.call(null,i);return r(j).each(function(){var n=r(this);if(!n.data(y)){n.data(y,{idx:++p,opt:i,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:false,tweenRunning:false,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null});var l=n.data(y).opt,m=n.data("mcs-axis"),o=n.data("mcs-scrollbar-position"),k=n.data("mcs-theme");if(m){l.axis=m}if(o){l.scrollbarPosition=o}if(k){l.theme=k;s._theme.call(null,l)}s._pluginMarkup.call(this);w.update.call(null,n)}})},update:function(g){var h=g||s._selector.call(this);return r(h).each(function(){var l=r(this);if(l.data(y)){var j=l.data(y),k=j.opt,n=r("#mCSB_"+j.idx+"_container"),m=[r("#mCSB_"+j.idx+"_dragger_vertical"),r("#mCSB_"+j.idx+"_dragger_horizontal")];if(!n.length){return}if(j.tweenRunning){s._stop.call(null,l)}if(l.hasClass("mCS_disabled")){l.removeClass("mCS_disabled")}if(l.hasClass("mCS_destroyed")){l.removeClass("mCS_destroyed")}s._maxHeight.call(this);s._expandContentHorizontally.call(this);if(k.axis!=="y"&&!k.advanced.autoExpandHorizontalScroll){n.css("width",s._contentWidth(n.children()))}j.overflowed=s._overflowed.call(this);s._scrollbarVisibility.call(this);if(k.autoDraggerLength){s._setDraggerLength.call(this)}s._scrollRatio.call(this);s._bindEvents.call(this);var i=[Math.abs(n[0].offsetTop),Math.abs(n[0].offsetLeft)];if(k.axis!=="x"){if(!j.overflowed[0]){s._resetContentPosition.call(this);if(k.axis==="y"){s._unbindEvents.call(this)}else{if(k.axis==="yx"&&j.overflowed[1]){s._scrollTo.call(this,l,i[1].toString(),{dir:"x",dur:0,overwrite:"none"})}}}else{if(m[0].height()>m[0].parent().height()){s._resetContentPosition.call(this)}else{s._scrollTo.call(this,l,i[0].toString(),{dir:"y",dur:0,overwrite:"none"});j.contentReset.y=null}}}if(k.axis!=="y"){if(!j.overflowed[1]){s._resetContentPosition.call(this);if(k.axis==="x"){s._unbindEvents.call(this)}else{if(k.axis==="yx"&&j.overflowed[0]){s._scrollTo.call(this,l,i[0].toString(),{dir:"y",dur:0,overwrite:"none"})}}}else{if(m[1].width()>m[1].parent().width()){s._resetContentPosition.call(this)}else{s._scrollTo.call(this,l,i[1].toString(),{dir:"x",dur:0,overwrite:"none"});j.contentReset.x=null}}}s._autoUpdate.call(this)}})},scrollTo:function(g,h){if(typeof g=="undefined"||g==null){return}var i=s._selector.call(this);return r(i).each(function(){var m=r(this);if(m.data(y)){var j=m.data(y),k=j.opt,l={trigger:"external",scrollInertia:k.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:false,timeout:60,callbacks:true,onStart:true,onUpdate:true,onComplete:true},o=r.extend(true,{},l,h),z=s._arr.call(this,g),n=o.scrollInertia>0&&o.scrollInertia<17?17:o.scrollInertia;z[0]=s._to.call(this,z[0],"y");z[1]=s._to.call(this,z[1],"x");if(o.moveDragger){z[0]*=j.scrollRatio.y;z[1]*=j.scrollRatio.x}o.dur=n;setTimeout(function(){if(z[0]!==null&&typeof z[0]!=="undefined"&&k.axis!=="x"&&j.overflowed[0]){o.dir="y";o.overwrite="all";s._scrollTo.call(this,m,z[0].toString(),o)}if(z[1]!==null&&typeof z[1]!=="undefined"&&k.axis!=="y"&&j.overflowed[1]){o.dir="x";o.overwrite="none";s._scrollTo.call(this,m,z[1].toString(),o)}},o.timeout)}})},stop:function(){var g=s._selector.call(this);return r(g).each(function(){var h=r(this);if(h.data(y)){s._stop.call(null,h)}})},disable:function(g){var h=s._selector.call(this);return r(h).each(function(){var k=r(this);if(k.data(y)){var i=k.data(y),j=i.opt;s._autoUpdate.call(this,"remove");s._unbindEvents.call(this);if(g){s._resetContentPosition.call(this)}s._scrollbarVisibility.call(this,true);k.addClass("mCS_disabled")}})},destroy:function(){var g=s._selector.call(this);return r(g).each(function(){var k=r(this);if(k.data(y)){var i=k.data(y),j=i.opt,m=r("#mCSB_"+i.idx),l=r("#mCSB_"+i.idx+"_container"),h=r(".mCSB_"+i.idx+"_scrollbar");if(j.live){v(g)}s._autoUpdate.call(this,"remove");s._unbindEvents.call(this);s._resetContentPosition.call(this);k.removeData(y);s._delete.call(null,this.mcs);h.remove();m.replaceWith(l.contents());k.removeClass(u+" _"+y+"_"+i.idx+" mCS-autoHide mCS-dir-rtl mCS_no_scrollbar mCS_disabled").addClass("mCS_destroyed")}})}},s={_selector:function(){return(typeof r(this)!=="object"||r(this).length<1)?c:this},_theme:function(i){var j=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],k=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],l=["minimal","minimal-dark"],g=["minimal","minimal-dark"],h=["minimal","minimal-dark"];i.autoDraggerLength=r.inArray(i.theme,j)>-1?false:i.autoDraggerLength;i.autoExpandScrollbar=r.inArray(i.theme,k)>-1?false:i.autoExpandScrollbar;i.scrollButtons.enable=r.inArray(i.theme,l)>-1?false:i.scrollButtons.enable;i.autoHideScrollbar=r.inArray(i.theme,g)>-1?true:i.autoHideScrollbar;i.scrollbarPosition=r.inArray(i.theme,h)>-1?"outside":i.scrollbarPosition},_findAxis:function(g){return(g==="yx"||g==="xy"||g==="auto")?"yx":(g==="x"||g==="horizontal")?"x":"y"},_findScrollButtonsType:function(g){return(g==="stepped"||g==="pixels"||g==="step"||g==="click")?"stepped":"stepless"},_pluginMarkup:function(){var m=r(this),n=m.data(y),g=n.opt,E=g.autoExpandScrollbar?" mCSB_scrollTools_onDrag_expand":"",j=["<div id='mCSB_"+n.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+g.theme+" mCSB_scrollTools_vertical"+E+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+n.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+n.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+g.theme+" mCSB_scrollTools_horizontal"+E+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+n.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],D=g.axis==="yx"?"mCSB_vertical_horizontal":g.axis==="x"?"mCSB_horizontal":"mCSB_vertical",o=g.axis==="yx"?j[0]+j[1]:g.axis==="x"?j[1]:j[0],C=g.axis==="yx"?"<div id='mCSB_"+n.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",F=g.autoHideScrollbar?" mCS-autoHide":"",i=(g.axis!=="x"&&n.langDir==="rtl")?" mCS-dir-rtl":"";if(g.setWidth){m.css("width",g.setWidth)}if(g.setHeight){m.css("height",g.setHeight)}g.setLeft=(g.axis!=="y"&&n.langDir==="rtl")?"989999px":g.setLeft;m.addClass(u+" _"+y+"_"+n.idx+F+i).wrapInner("<div id='mCSB_"+n.idx+"' class='mCustomScrollBox mCS-"+g.theme+" "+D+"'><div id='mCSB_"+n.idx+"_container' class='mCSB_container' style='position:relative; top:"+g.setTop+"; left:"+g.setLeft+";' dir="+n.langDir+" /></div>");var h=r("#mCSB_"+n.idx),l=r("#mCSB_"+n.idx+"_container");if(g.axis!=="y"&&!g.advanced.autoExpandHorizontalScroll){l.css("width",s._contentWidth(l.children()))}if(g.scrollbarPosition==="outside"){if(m.css("position")==="static"){m.css("position","relative")}m.css("overflow","visible");h.addClass("mCSB_outside").after(o)}else{h.addClass("mCSB_inside").append(o);l.wrap(C)}s._scrollButtons.call(this);var k=[r("#mCSB_"+n.idx+"_dragger_vertical"),r("#mCSB_"+n.idx+"_dragger_horizontal")];k[0].css("min-height",k[0].height());k[1].css("min-width",k[1].width())},_contentWidth:function(g){return Math.max.apply(Math,g.map(function(){return r(this).outerWidth(true)}).get())},_expandContentHorizontally:function(){var i=r(this),g=i.data(y),h=g.opt,j=r("#mCSB_"+g.idx+"_container");if(h.advanced.autoExpandHorizontalScroll&&h.axis!=="y"){j.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:(Math.ceil(j[0].getBoundingClientRect().right+0.4)-Math.floor(j[0].getBoundingClientRect().left)),position:"relative"}).unwrap()}},_scrollButtons:function(){var i=r(this),g=i.data(y),h=g.opt,k=r(".mCSB_"+g.idx+"_scrollbar:first"),j=["<a href='#' class='mCSB_buttonUp' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonDown' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonLeft' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonRight' oncontextmenu='return false;' />"],l=[(h.axis==="x"?j[2]:j[0]),(h.axis==="x"?j[3]:j[1]),j[2],j[3]];if(h.scrollButtons.enable){k.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])}},_maxHeight:function(){var j=r(this),g=j.data(y),h=g.opt,l=r("#mCSB_"+g.idx),m=j.css("max-height"),k=m.indexOf("%")!==-1,n=j.css("box-sizing");if(m!=="none"){var i=k?j.parent().height()*parseInt(m)/100:parseInt(m);if(n==="border-box"){i-=((j.innerHeight()-j.height())+(j.outerHeight()-j.innerHeight()))}l.css("max-height",Math.round(i))}},_setDraggerLength:function(){var m=r(this),o=m.data(y),i=r("#mCSB_"+o.idx),l=r("#mCSB_"+o.idx+"_container"),j=[r("#mCSB_"+o.idx+"_dragger_vertical"),r("#mCSB_"+o.idx+"_dragger_horizontal")],n=[i.height()/l.outerHeight(false),i.width()/l.outerWidth(false)],h=[parseInt(j[0].css("min-height")),Math.round(n[0]*j[0].parent().height()),parseInt(j[1].css("min-width")),Math.round(n[1]*j[1].parent().width())],g=q&&(h[1]<h[0])?h[0]:h[1],k=q&&(h[3]<h[2])?h[2]:h[3];j[0].css({height:g,"max-height":(j[0].parent().height()-10)}).find(".mCSB_dragger_bar").css({"line-height":h[0]+"px"});j[1].css({width:k,"max-width":(j[1].parent().width()-10)})},_scrollRatio:function(){var i=r(this),g=i.data(y),l=r("#mCSB_"+g.idx),k=r("#mCSB_"+g.idx+"_container"),j=[r("#mCSB_"+g.idx+"_dragger_vertical"),r("#mCSB_"+g.idx+"_dragger_horizontal")],h=[k.outerHeight(false)-l.height(),k.outerWidth(false)-l.width()],m=[h[0]/(j[0].parent().height()-j[0].height()),h[1]/(j[1].parent().width()-j[1].width())];g.scrollRatio={y:m[0],x:m[1]}},_onDragClasses:function(j,h,k){var i=k?"mCSB_dragger_onDrag_expanded":"",l=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag"],g=j.closest(".mCSB_scrollTools");if(h==="active"){j.toggleClass(l[0]+" "+i);g.toggleClass(l[1]);j[0]._draggable=j[0]._draggable?0:1}else{if(!j[0]._draggable){if(h==="hide"){j.removeClass(l[0]);g.removeClass(l[1])}else{j.addClass(l[0]);g.addClass(l[1])}}}},_overflowed:function(){var h=r(this),g=h.data(y),k=r("#mCSB_"+g.idx),i=r("#mCSB_"+g.idx+"_container"),j=g.overflowed==null?i.height():i.outerHeight(false),l=g.overflowed==null?i.width():i.outerWidth(false);return[j>k.height(),l>k.width()]},_resetContentPosition:function(){var i=r(this),g=i.data(y),h=g.opt,l=r("#mCSB_"+g.idx),k=r("#mCSB_"+g.idx+"_container"),j=[r("#mCSB_"+g.idx+"_dragger_vertical"),r("#mCSB_"+g.idx+"_dragger_horizontal")];s._stop(i);if((h.axis!=="x"&&!g.overflowed[0])||(h.axis==="y"&&g.overflowed[0])){j[0].add(k).css("top",0);s._scrollTo(i,"_resetY")}if((h.axis!=="y"&&!g.overflowed[1])||(h.axis==="x"&&g.overflowed[1])){var m=dx=0;if(g.langDir==="rtl"){m=l.width()-k.outerWidth(false);dx=Math.abs(m/g.scrollRatio.x)}k.css("left",m);j[1].css("left",dx);s._scrollTo(i,"_resetX")}},_bindEvents:function(){var i=r(this),g=i.data(y),h=g.opt;if(!g.bindEvents){s._draggable.call(this);if(h.contentTouchScroll){s._contentDraggable.call(this)}if(h.mouseWheel.enable){function j(){k=setTimeout(function(){if(!r.event.special.mousewheel){j()}else{clearTimeout(k);s._mousewheel.call(i[0])}},1000)}var k;j()}s._draggerRail.call(this);s._wrapperScroll.call(this);if(h.advanced.autoScrollOnFocus){s._focus.call(this)}if(h.scrollButtons.enable){s._buttons.call(this)}if(h.keyboard.enable){s._keyboard.call(this)}g.bindEvents=true}},_unbindEvents:function(){var i=r(this),h=i.data(y),l=y+"_"+h.idx,g=".mCSB_"+h.idx+"_scrollbar",j=r("#mCSB_"+h.idx+",#mCSB_"+h.idx+"_container,#mCSB_"+h.idx+"_container_wrapper,"+g+" .mCSB_draggerContainer,#mCSB_"+h.idx+"_dragger_vertical,#mCSB_"+h.idx+"_dragger_horizontal,"+g+">a"),k=r("#mCSB_"+h.idx+"_container");if(h.bindEvents){r(e).unbind("."+l);j.each(function(){r(this).unbind("."+l)});clearTimeout(i[0]._focusTimeout);s._delete.call(null,i[0]._focusTimeout);clearTimeout(h.sequential.step);s._delete.call(null,h.sequential.step);clearTimeout(k[0].onCompleteTimeout);s._delete.call(null,k[0].onCompleteTimeout);h.bindEvents=false}},_scrollbarVisibility:function(m){var j=r(this),h=j.data(y),i=h.opt,n=r("#mCSB_"+h.idx+"_container_wrapper"),l=n.length?n:r("#mCSB_"+h.idx+"_container"),g=[r("#mCSB_"+h.idx+"_scrollbar_vertical"),r("#mCSB_"+h.idx+"_scrollbar_horizontal")],k=[g[0].find(".mCSB_dragger"),g[1].find(".mCSB_dragger")];if(i.axis!=="x"){if(h.overflowed[0]&&!m){g[0].add(k[0]).add(g[0].children("a")).css("display","block");l.removeClass("mCS_no_scrollbar_y mCS_y_hidden")}else{if(i.alwaysShowScrollbar){if(i.alwaysShowScrollbar!==2){k[0].add(g[0].children("a")).css("display","none")}l.removeClass("mCS_y_hidden")}else{g[0].css("display","none");l.addClass("mCS_y_hidden")}l.addClass("mCS_no_scrollbar_y")}}if(i.axis!=="y"){if(h.overflowed[1]&&!m){g[1].add(k[1]).add(g[1].children("a")).css("display","block");l.removeClass("mCS_no_scrollbar_x mCS_x_hidden")}else{if(i.alwaysShowScrollbar){if(i.alwaysShowScrollbar!==2){k[1].add(g[1].children("a")).css("display","none")}l.removeClass("mCS_x_hidden")}else{g[1].css("display","none");l.addClass("mCS_x_hidden")}l.addClass("mCS_no_scrollbar_x")}}if(!h.overflowed[0]&&!h.overflowed[1]){j.addClass("mCS_no_scrollbar")}else{j.removeClass("mCS_no_scrollbar")}},_coordinates:function(h){var i=h.type;switch(i){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return[h.originalEvent.pageY,h.originalEvent.pageX];break;case"touchstart":case"touchmove":case"touchend":var g=h.originalEvent.touches[0]||h.originalEvent.changedTouches[0];return[g.pageY,g.pageX];break;default:return[h.pageY,h.pageX]}},_draggable:function(){var B=r(this),D=B.data(y),i=D.opt,g=y+"_"+D.idx,C=["mCSB_"+D.idx+"_dragger_vertical","mCSB_"+D.idx+"_dragger_horizontal"],o=r("#mCSB_"+D.idx+"_container"),n=r("#"+C[0]+",#"+C[1]),j,l,k;n.bind("mousedown."+g+" touchstart."+g+" pointerdown."+g+" MSPointerDown."+g,function(H){H.stopImmediatePropagation();H.preventDefault();if(!s._mouseBtnLeft(H)){return}b=true;if(q){e.onselectstart=function(){return false}}m(false);s._stop(B);j=r(this);var A=j.offset(),z=s._coordinates(H)[0]-A.top,K=s._coordinates(H)[1]-A.left,I=j.height()+A.top,J=j.width()+A.left;if(z<I&&z>0&&K<J&&K>0){l=z;k=K}s._onDragClasses(j,"active",i.autoExpandScrollbar)}).bind("touchmove."+g,function(F){F.stopImmediatePropagation();F.preventDefault();var A=j.offset(),z=s._coordinates(F)[0]-A.top,G=s._coordinates(F)[1]-A.left;h(l,k,z,G)});r(e).bind("mousemove."+g+" pointermove."+g+" MSPointerMove."+g,function(F){if(j){var A=j.offset(),z=s._coordinates(F)[0]-A.top,G=s._coordinates(F)[1]-A.left;if(l===z){return}h(l,k,z,G)}}).add(n).bind("mouseup."+g+" touchend."+g+" pointerup."+g+" MSPointerUp."+g,function(z){if(j){s._onDragClasses(j,"active",i.autoExpandScrollbar);j=null}b=false;if(q){e.onselectstart=null}m(true)});function m(E){var A=o.find("iframe");if(!A.length){return}var z=!E?"none":"auto";A.css("pointer-events",z)}function h(I,H,z,K){o[0].idleTimer=i.scrollInertia<233?250:0;if(j.attr("id")===C[1]){var J="x",A=((j[0].offsetLeft-H)+K)*D.scrollRatio.x}else{var J="y",A=((j[0].offsetTop-I)+z)*D.scrollRatio.y}s._scrollTo(B,A.toString(),{dir:J,drag:true})}},_contentDraggable:function(){var l=r(this),i=l.data(y),n=i.opt,Q=y+"_"+i.idx,P=r("#mCSB_"+i.idx),j=r("#mCSB_"+i.idx+"_container"),N=[r("#mCSB_"+i.idx+"_dragger_vertical"),r("#mCSB_"+i.idx+"_dragger_horizontal")],S,O,h,g,X=[],V=[],o,ab,R,T,k,m,W=0,Z,U=n.axis==="yx"?"none":"all";j.bind("touchstart."+Q+" pointerdown."+Q+" MSPointerDown."+Q,function(A){if(!s._pointerTouch(A)||b){return}var z=j.offset();S=s._coordinates(A)[0]-z.top;O=s._coordinates(A)[1]-z.left}).bind("touchmove."+Q+" pointermove."+Q+" MSPointerMove."+Q,function(E){if(!s._pointerTouch(E)||b){return}E.stopImmediatePropagation();ab=s._getTime();var F=P.offset(),C=s._coordinates(E)[0]-F.top,A=s._coordinates(E)[1]-F.left,D="mcsLinearOut";X.push(C);V.push(A);if(i.overflowed[0]){var G=N[0].parent().height()-N[0].height(),B=((S-C)>0&&(C-S)>-(G*i.scrollRatio.y))}if(i.overflowed[1]){var H=N[1].parent().width()-N[1].width(),z=((O-A)>0&&(A-O)>-(H*i.scrollRatio.x))}if(B||z){E.preventDefault()}m=n.axis==="yx"?[(S-C),(O-A)]:n.axis==="x"?[null,(O-A)]:[(S-C),null];j[0].idleTimer=250;if(i.overflowed[0]){Y(m[0],W,D,"y","all",true)}if(i.overflowed[1]){Y(m[1],W,D,"x",U,true)}});P.bind("touchstart."+Q+" pointerdown."+Q+" MSPointerDown."+Q,function(A){if(!s._pointerTouch(A)||b){return}A.stopImmediatePropagation();s._stop(l);o=s._getTime();var z=P.offset();h=s._coordinates(A)[0]-z.top;g=s._coordinates(A)[1]-z.left;X=[];V=[]}).bind("touchend."+Q+" pointerup."+Q+" MSPointerUp."+Q,function(G){if(!s._pointerTouch(G)||b){return}G.stopImmediatePropagation();R=s._getTime();var I=P.offset(),C=s._coordinates(G)[0]-I.top,A=s._coordinates(G)[1]-I.left;if((R-ab)>30){return}k=1000/(R-o);var F="mcsEaseOut",E=k<2.5,z=E?[X[X.length-2],V[V.length-2]]:[0,0];T=E?[(C-z[0]),(A-z[1])]:[C-h,A-g];var H=[Math.abs(T[0]),Math.abs(T[1])];k=E?[Math.abs(T[0]/4),Math.abs(T[1]/4)]:[k,k];var B=[Math.abs(j[0].offsetTop)-(T[0]*aa((H[0]/k[0]),k[0])),Math.abs(j[0].offsetLeft)-(T[1]*aa((H[1]/k[1]),k[1]))];m=n.axis==="yx"?[B[0],B[1]]:n.axis==="x"?[null,B[1]]:[B[0],null];Z=[(H[0]*4)+n.scrollInertia,(H[1]*4)+n.scrollInertia];var D=parseInt(n.contentTouchScroll)||0;m[0]=H[0]>D?m[0]:0;m[1]=H[1]>D?m[1]:0;if(i.overflowed[0]){Y(m[0],Z[0],F,"y",U,false)}if(i.overflowed[1]){Y(m[1],Z[1],F,"x",U,false)}});function aa(z,B){var A=[B*1.5,B*2,B/1.5,B/2];if(z>90){return B>4?A[0]:A[3]}else{if(z>60){return B>3?A[3]:A[2]}else{if(z>30){return B>8?A[1]:B>6?A[0]:B>4?B:A[2]}else{return B>8?B:A[3]}}}}function Y(C,A,z,D,E,B){if(!C){return}s._scrollTo(l,C.toString(),{dur:A,scrollEasing:z,dir:D,overwrite:E,drag:B})}},_mousewheel:function(){var k=r(this),l=k.data(y);if(l){var i=l.opt,o=y+"_"+l.idx,h=r("#mCSB_"+l.idx),j=[r("#mCSB_"+l.idx+"_dragger_vertical"),r("#mCSB_"+l.idx+"_dragger_horizontal")],n=r("#mCSB_"+l.idx+"_container").find("iframe"),g=h;if(n.length){n.each(function(){var z=this;if(m(z)){g=g.add(r(z).contents().find("body"))}})}g.bind("mousewheel."+o,function(J,P){s._stop(k);if(s._disableMousewheel(k,J.target)){return}var R=i.mouseWheel.deltaFactor!=="auto"?parseInt(i.mouseWheel.deltaFactor):(q&&J.deltaFactor<100)?100:J.deltaFactor||100;if(i.axis==="x"||i.mouseWheel.axis==="x"){var M="x",Q=[Math.round(R*l.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],K=i.mouseWheel.scrollAmount!=="auto"?Q[1]:Q[0]>=h.width()?h.width()*0.9:Q[0],O=Math.abs(r("#mCSB_"+l.idx+"_container")[0].offsetLeft),I=j[1][0].offsetLeft,L=j[1].parent().width()-j[1].width(),N=J.deltaX||J.deltaY||P}else{var M="y",Q=[Math.round(R*l.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],K=i.mouseWheel.scrollAmount!=="auto"?Q[1]:Q[0]>=h.height()?h.height()*0.9:Q[0],O=Math.abs(r("#mCSB_"+l.idx+"_container")[0].offsetTop),I=j[0][0].offsetTop,L=j[0].parent().height()-j[0].height(),N=J.deltaY||P}if((M==="y"&&!l.overflowed[0])||(M==="x"&&!l.overflowed[1])){return}if(i.mouseWheel.invert){N=-N}if(i.mouseWheel.normalizeDelta){N=N<0?-1:1}if((N>0&&I!==0)||(N<0&&I!==L)||i.mouseWheel.preventDefault){J.stopImmediatePropagation();J.preventDefault()}s._scrollTo(k,(O-(N*K)).toString(),{dir:M})})}function m(D){var F=null;try{var E=D.contentDocument||D.contentWindow.document;F=E.body.innerHTML}catch(C){}return(F!==null)}},_disableMousewheel:function(i,g){var k=g.nodeName.toLowerCase(),j=i.data(y).opt.mouseWheel.disableOver,h=["select","textarea"];return r.inArray(k,j)>-1&&!(r.inArray(k,h)>-1&&!r(g).is(":focus"))},_draggerRail:function(){var i=r(this),h=i.data(y),k=y+"_"+h.idx,j=r("#mCSB_"+h.idx+"_container"),g=j.parent(),l=r(".mCSB_"+h.idx+"_scrollbar .mCSB_draggerContainer");l.bind("touchstart."+k+" pointerdown."+k+" MSPointerDown."+k,function(m){b=true}).bind("touchend."+k+" pointerup."+k+" MSPointerUp."+k,function(m){b=false}).bind("click."+k,function(C){if(r(C.target).hasClass("mCSB_draggerContainer")||r(C.target).hasClass("mCSB_draggerRail")){s._stop(i);var o=r(this),D=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!h.overflowed[1]){return}var B="x",n=C.pageX>D.offset().left?-1:1,m=Math.abs(j[0].offsetLeft)-(n*(g.width()*0.9))}else{if(!h.overflowed[0]){return}var B="y",n=C.pageY>D.offset().top?-1:1,m=Math.abs(j[0].offsetTop)-(n*(g.height()*0.9))}s._scrollTo(i,m.toString(),{dir:B,scrollEasing:"mcsEaseInOut"})}})},_focus:function(){var j=r(this),h=j.data(y),i=h.opt,l=y+"_"+h.idx,k=r("#mCSB_"+h.idx+"_container"),g=k.parent();k.bind("focusin."+l,function(m){var n=r(e.activeElement),z=k.find(".mCustomScrollBox").length,o=0;if(!n.is(i.advanced.autoScrollOnFocus)){return}s._stop(j);clearTimeout(j[0]._focusTimeout);j[0]._focusTimer=z?(o+17)*z:0;j[0]._focusTimeout=setTimeout(function(){var F=[n.offset().top-k.offset().top,n.offset().left-k.offset().left],G=[k[0].offsetTop,k[0].offsetLeft],E=[(G[0]+F[0]>=0&&G[0]+F[0]<g.height()-n.outerHeight(false)),(G[1]+F[1]>=0&&G[0]+F[1]<g.width()-n.outerWidth(false))],D=(i.axis==="yx"&&!E[0]&&!E[1])?"none":"all";if(i.axis!=="x"&&!E[0]){s._scrollTo(j,F[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:D,dur:o})}if(i.axis!=="y"&&!E[1]){s._scrollTo(j,F[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:D,dur:o})}},j[0]._focusTimer)})},_wrapperScroll:function(){var i=r(this),h=i.data(y),j=y+"_"+h.idx,g=r("#mCSB_"+h.idx+"_container").parent();g.bind("scroll."+j,function(k){g.scrollTop(0).scrollLeft(0)})},_buttons:function(){var i=r(this),g=i.data(y),h=g.opt,n=g.sequential,l=y+"_"+g.idx,j=r("#mCSB_"+g.idx+"_container"),k=".mCSB_"+g.idx+"_scrollbar",m=r(k+">a");m.bind("mousedown."+l+" touchstart."+l+" pointerdown."+l+" MSPointerDown."+l+" mouseup."+l+" touchend."+l+" pointerup."+l+" MSPointerUp."+l+" mouseout."+l+" pointerout."+l+" MSPointerOut."+l+" click."+l,function(A){A.preventDefault();if(!s._mouseBtnLeft(A)){return}var B=r(this).attr("class");n.type=h.scrollButtons.scrollType;switch(A.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if(n.type==="stepped"){return}b=true;g.tweenRunning=false;o("on",B);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if(n.type==="stepped"){return}b=false;if(n.dir){o("off",B)}break;case"click":if(n.type!=="stepped"||g.tweenRunning){return}o("on",B);break}function o(z,C){n.scrollAmount=h.snapAmount||h.scrollButtons.scrollAmount;s._sequentialScroll.call(this,i,z,C)}})},_keyboard:function(){var m=r(this),n=m.data(y),h=n.opt,j=n.sequential,o=y+"_"+n.idx,g=r("#mCSB_"+n.idx),k=r("#mCSB_"+n.idx+"_container"),i=k.parent(),l="input,textarea,select,datalist,keygen,[contenteditable='true']";g.attr("tabindex","0").bind("blur."+o+" keydown."+o+" keyup."+o,function(H){switch(H.type){case"blur":if(n.tweenRunning&&j.dir){K("off",null)}break;case"keydown":case"keyup":var F=H.keyCode?H.keyCode:H.which,L="on";if((h.axis!=="x"&&(F===38||F===40))||(h.axis!=="y"&&(F===37||F===39))){if(((F===38||F===40)&&!n.overflowed[0])||((F===37||F===39)&&!n.overflowed[1])){return}if(H.type==="keyup"){L="off"}if(!r(e.activeElement).is(l)){H.preventDefault();H.stopImmediatePropagation();K(L,F)}}else{if(F===33||F===34){if(n.overflowed[0]||n.overflowed[1]){H.preventDefault();H.stopImmediatePropagation()}if(H.type==="keyup"){s._stop(m);var J=F===34?-1:1;if(h.axis==="x"||(h.axis==="yx"&&n.overflowed[1]&&!n.overflowed[0])){var I="x",G=Math.abs(k[0].offsetLeft)-(J*(i.width()*0.9))}else{var I="y",G=Math.abs(k[0].offsetTop)-(J*(i.height()*0.9))}s._scrollTo(m,G.toString(),{dir:I,scrollEasing:"mcsEaseInOut"})}}else{if(F===35||F===36){if(!r(e.activeElement).is(l)){if(n.overflowed[0]||n.overflowed[1]){H.preventDefault();H.stopImmediatePropagation()}if(H.type==="keyup"){if(h.axis==="x"||(h.axis==="yx"&&n.overflowed[1]&&!n.overflowed[0])){var I="x",G=F===35?Math.abs(i.width()-k.outerWidth(false)):0}else{var I="y",G=F===35?Math.abs(i.height()-k.outerHeight(false)):0}s._scrollTo(m,G.toString(),{dir:I,scrollEasing:"mcsEaseInOut"})}}}}}break}function K(A,z){j.type=h.keyboard.scrollType;j.scrollAmount=h.snapAmount||h.keyboard.scrollAmount;if(j.type==="stepped"&&n.tweenRunning){return}s._sequentialScroll.call(this,m,A,z)}})},_sequentialScroll:function(g,n,z){var l=g.data(y),h=l.opt,j=l.sequential,k=r("#mCSB_"+l.idx+"_container"),i=j.type==="stepped"?true:false;switch(n){case"on":j.dir=[(z==="mCSB_buttonRight"||z==="mCSB_buttonLeft"||z===39||z===37?"x":"y"),(z==="mCSB_buttonUp"||z==="mCSB_buttonLeft"||z===38||z===37?-1:1)];s._stop(g);if(s._isNumeric(z)&&j.type==="stepped"){return}o(i);break;case"off":m();if(i||(l.tweenRunning&&j.dir)){o(true)}break}function o(O){var T=j.type!=="stepped",P=!O?1000/60:T?h.scrollInertia/1.5:h.scrollInertia,M=!O?2.5:T?7.5:40,Q=[Math.abs(k[0].offsetTop),Math.abs(k[0].offsetLeft)],U=[l.scrollRatio.y>10?10:l.scrollRatio.y,l.scrollRatio.x>10?10:l.scrollRatio.x],L=j.dir[0]==="x"?Q[1]+(j.dir[1]*(U[1]*M)):Q[0]+(j.dir[1]*(U[0]*M)),R=j.dir[0]==="x"?Q[1]+(j.dir[1]*parseInt(j.scrollAmount)):Q[0]+(j.dir[1]*parseInt(j.scrollAmount)),S=j.scrollAmount!=="auto"?R:L,K=!O?"mcsLinear":T?"mcsLinearOut":"mcsEaseInOut",N=!O?false:true;if(O&&P<17){S=j.dir[0]==="x"?Q[1]:Q[0]}s._scrollTo(g,S.toString(),{dir:j.dir[0],scrollEasing:K,dur:P,onComplete:N});if(O){j.dir=false;return}clearTimeout(j.step);j.step=setTimeout(function(){o()},P)}function m(){clearTimeout(j.step);s._stop(g)}},_arr:function(g){var h=r(this).data(y).opt,i=[];if(typeof g==="function"){g=g()}if(!(g instanceof Array)){i[0]=g.y?g.y:g.x||h.axis==="x"?null:g;i[1]=g.x?g.x:g.y||h.axis==="y"?null:g}else{i=g.length>1?[g[0],g[1]]:h.axis==="x"?[null,g[0]]:[g[0],null]}if(typeof i[0]==="function"){i[0]=i[0]()}if(typeof i[1]==="function"){i[1]=i[1]()}return i},_to:function(H,G){if(H==null||typeof H=="undefined"){return}var j=r(this),k=j.data(y),I=k.opt,g=r("#mCSB_"+k.idx+"_container"),h=g.parent(),J=typeof H;if(!G){G=I.axis==="x"?"x":"y"}var i=G==="x"?g.outerWidth(false):g.outerHeight(false),o=G==="x"?g.offset().left:g.offset().top,L=G==="x"?g[0].offsetLeft:g[0].offsetTop,m=G==="x"?"left":"top";switch(J){case"function":return H();break;case"object":if(H.nodeType){var l=G==="x"?r(H).offset().left:r(H).offset().top}else{if(H.jquery){if(!H.length){return}var l=G==="x"?H.offset().left:H.offset().top}}return l-o;break;case"string":case"number":if(s._isNumeric.call(null,H)){return Math.abs(H)}else{if(H.indexOf("%")!==-1){return Math.abs(i*parseInt(H)/100)}else{if(H.indexOf("-=")!==-1){return Math.abs(L-parseInt(H.split("-=")[1]))}else{if(H.indexOf("+=")!==-1){var K=(L+parseInt(H.split("+=")[1]));return K>=0?0:Math.abs(K)}else{if(H.indexOf("px")!==-1&&s._isNumeric.call(null,H.split("px")[0])){return Math.abs(H.split("px")[0])}else{if(H==="top"||H==="left"){return 0}else{if(H==="bottom"){return Math.abs(h.height()-g.outerHeight(false))}else{if(H==="right"){return Math.abs(h.width()-g.outerWidth(false))}else{if(H==="first"||H==="last"){var n=g.find(":"+H),l=G==="x"?r(n).offset().left:r(n).offset().top;return l-o}else{if(r(H).length){var l=G==="x"?r(H).offset().left:r(H).offset().top;return l-o}else{g.css(m,H);w.update.call(null,j[0]);return}}}}}}}}}}break}},_autoUpdate:function(P){var J=r(this),n=J.data(y),g=n.opt,m=r("#mCSB_"+n.idx+"_container");if(P){clearTimeout(m[0].autoUpdate);s._delete.call(null,m[0].autoUpdate);return}var K=m.parent(),R=[r("#mCSB_"+n.idx+"_scrollbar_vertical"),r("#mCSB_"+n.idx+"_scrollbar_horizontal")],L=function(){return[R[0].is(":visible")?R[0].outerHeight(true):0,R[1].is(":visible")?R[1].outerWidth(true):0]},I=h(),i,o=[m.outerHeight(false),m.outerWidth(false),K.height(),K.width(),L()[0],L()[1]],j,O=l(),k;N();function N(){clearTimeout(m[0].autoUpdate);m[0].autoUpdate=setTimeout(function(){if(g.advanced.updateOnSelectorChange){i=h();if(i!==I){M();I=i;return}}if(g.advanced.updateOnContentResize){j=[m.outerHeight(false),m.outerWidth(false),K.height(),K.width(),L()[0],L()[1]];if(j[0]!==o[0]||j[1]!==o[1]||j[2]!==o[2]||j[3]!==o[3]||j[4]!==o[4]||j[5]!==o[5]){M();o=j}}if(g.advanced.updateOnImageLoad){k=l();if(k!==O){m.find("img").each(function(){Q(this.src)});O=k}}if(g.advanced.updateOnSelectorChange||g.advanced.updateOnContentResize||g.advanced.updateOnImageLoad){N()}},60)}function l(){var z=0;if(g.advanced.updateOnImageLoad){z=m.find("img").length}return z}function Q(z){var C=new Image();function A(E,D){return function(){return D.apply(E,arguments)}}function B(){this.onload=null;M()}C.onload=A(C,B);C.src=z}function h(){if(g.advanced.updateOnSelectorChange===true){g.advanced.updateOnSelectorChange="*"}var A=0,z=m.find(g.advanced.updateOnSelectorChange);if(g.advanced.updateOnSelectorChange&&z.length>0){z.each(function(){A+=r(this).height()+r(this).width()})}return A}function M(){clearTimeout(m[0].autoUpdate);w.update.call(null,J[0])}},_snapAmount:function(g,i,h){return(Math.round(g/i)*i-h)},_stop:function(i){var g=i.data(y),h=r("#mCSB_"+g.idx+"_container,#mCSB_"+g.idx+"_container_wrapper,#mCSB_"+g.idx+"_dragger_vertical,#mCSB_"+g.idx+"_dragger_horizontal");h.each(function(){s._stopTween.call(this)})},_scrollTo:function(X,S,P){var l=X.data(y),R=l.opt,T={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:false,dur:R.scrollInertia,overwrite:"all",callbacks:true,onStart:true,onUpdate:true,onComplete:true},P=r.extend(T,P),M=[P.dur,(P.drag?0:P.dur)],N=r("#mCSB_"+l.idx),W=r("#mCSB_"+l.idx+"_container"),h=R.callbacks.onTotalScrollOffset?s._arr.call(X,R.callbacks.onTotalScrollOffset):[0,0],Z=R.callbacks.onTotalScrollBackOffset?s._arr.call(X,R.callbacks.onTotalScrollBackOffset):[0,0];l.trigger=P.trigger;if(S==="_resetY"&&!l.contentReset.y){if(Q("onOverflowYNone")){R.callbacks.onOverflowYNone.call(X[0])}l.contentReset.y=1}if(S==="_resetX"&&!l.contentReset.x){if(Q("onOverflowXNone")){R.callbacks.onOverflowXNone.call(X[0])}l.contentReset.x=1}if(S==="_resetY"||S==="_resetX"){return}if((l.contentReset.y||!X[0].mcs)&&l.overflowed[0]){if(Q("onOverflowY")){R.callbacks.onOverflowY.call(X[0])}l.contentReset.x=null}if((l.contentReset.x||!X[0].mcs)&&l.overflowed[1]){if(Q("onOverflowX")){R.callbacks.onOverflowX.call(X[0])}l.contentReset.x=null}if(R.snapAmount){S=s._snapAmount(S,R.snapAmount,R.snapOffset)}switch(P.dir){case"x":var m=r("#mCSB_"+l.idx+"_dragger_horizontal"),i="left",U=W[0].offsetLeft,o=[N.width()-W.outerWidth(false),m.parent().width()-m.width()],V=[S,S===0?0:(S/l.scrollRatio.x)],g=h[1],k=Z[1],Y=g>0?g/l.scrollRatio.x:0,n=k>0?k/l.scrollRatio.x:0;break;case"y":var m=r("#mCSB_"+l.idx+"_dragger_vertical"),i="top",U=W[0].offsetTop,o=[N.height()-W.outerHeight(false),m.parent().height()-m.height()],V=[S,S===0?0:(S/l.scrollRatio.y)],g=h[0],k=Z[0],Y=g>0?g/l.scrollRatio.y:0,n=k>0?k/l.scrollRatio.y:0;break}if(V[1]<0||(V[0]===0&&V[1]===0)){V=[0,0]}else{if(V[1]>=o[1]){V=[o[0],o[1]]}else{V[0]=-V[0]}}if(!X[0].mcs){O()}clearTimeout(W[0].onCompleteTimeout);if(!l.tweenRunning&&((U===0&&V[0]>=0)||(U===o[0]&&V[0]<=o[0]))){return}s._tweenTo.call(null,m[0],i,Math.round(V[1]),M[1],P.scrollEasing);s._tweenTo.call(null,W[0],i,Math.round(V[0]),M[0],P.scrollEasing,P.overwrite,{onStart:function(){if(P.callbacks&&P.onStart&&!l.tweenRunning){if(Q("onScrollStart")){O();R.callbacks.onScrollStart.call(X[0])}l.tweenRunning=true;s._onDragClasses(m);l.cbOffsets=j()}},onUpdate:function(){if(P.callbacks&&P.onUpdate){if(Q("whileScrolling")){O();R.callbacks.whileScrolling.call(X[0])}}},onComplete:function(){if(P.callbacks&&P.onComplete){if(R.axis==="yx"){clearTimeout(W[0].onCompleteTimeout)}var z=W[0].idleTimer||0;W[0].onCompleteTimeout=setTimeout(function(){if(Q("onScroll")){O();R.callbacks.onScroll.call(X[0])}if(Q("onTotalScroll")&&V[1]>=o[1]-Y&&l.cbOffsets[0]){O();R.callbacks.onTotalScroll.call(X[0])}if(Q("onTotalScrollBack")&&V[1]<=n&&l.cbOffsets[1]){O();R.callbacks.onTotalScrollBack.call(X[0])}l.tweenRunning=false;W[0].idleTimer=0;s._onDragClasses(m,"hide")},z)}}});function Q(z){return l&&R.callbacks[z]&&typeof R.callbacks[z]==="function"}function j(){return[R.callbacks.alwaysTriggerOffsets||U>=o[0]+g,R.callbacks.alwaysTriggerOffsets||U<=-k]}function O(){var A=[W[0].offsetTop,W[0].offsetLeft],z=[m[0].offsetTop,m[0].offsetLeft],C=[W.outerHeight(false),W.outerWidth(false)],B=[N.height(),N.width()];X[0].mcs={content:W,top:A[0],left:A[1],draggerTop:z[0],draggerLeft:z[1],topPct:Math.round((100*Math.abs(A[0]))/(Math.abs(C[0])-B[0])),leftPct:Math.round((100*Math.abs(A[1]))/(Math.abs(C[1])-B[1])),direction:P.dir}}},_tweenTo:function(T,N,R,V,U,P,g){var g=g||{},n=g.onStart||function(){},S=g.onUpdate||function(){},k=g.onComplete||function(){},h=s._getTime(),l,L=0,O=T.offsetTop,M=T.style,X;if(N==="left"){O=T.offsetLeft}var j=R-O;T._mcsstop=0;if(P!=="none"){Q()}W();function i(){if(T._mcsstop){return}if(!L){n.call()}L=s._getTime()-h;o();if(L>=T._mcstime){T._mcstime=(L>T._mcstime)?L+l-(L-T._mcstime):L+l-1;if(T._mcstime<L+1){T._mcstime=L+1}}if(T._mcstime<V){T._mcsid=X(i)}else{k.call()}}function o(){if(V>0){T._mcscurrVal=m(T._mcstime,O,j,V,U);M[N]=Math.round(T._mcscurrVal)+"px"}else{M[N]=R+"px"}S.call()}function W(){l=1000/60;T._mcstime=L+l;X=(!d.requestAnimationFrame)?function(z){o();return setTimeout(z,0.01)}:d.requestAnimationFrame;T._mcsid=X(i)}function Q(){if(T._mcsid==null){return}if(!d.requestAnimationFrame){clearTimeout(T._mcsid)}else{d.cancelAnimationFrame(T._mcsid)}T._mcsid=null}function m(E,F,A,B,D){switch(D){case"linear":case"mcsLinear":return A*E/B+F;break;case"mcsLinearOut":E/=B;E--;return A*Math.sqrt(1-E*E)+F;break;case"easeInOutSmooth":E/=B/2;if(E<1){return A/2*E*E+F}E--;return -A/2*(E*(E-2)-1)+F;break;case"easeInOutStrong":E/=B/2;if(E<1){return A/2*Math.pow(2,10*(E-1))+F}E--;return A/2*(-Math.pow(2,-10*E)+2)+F;break;case"easeInOut":case"mcsEaseInOut":E/=B/2;if(E<1){return A/2*E*E*E+F}E-=2;return A/2*(E*E*E+2)+F;break;case"easeOutSmooth":E/=B;E--;return -A*(E*E*E*E-1)+F;break;case"easeOutStrong":return A*(-Math.pow(2,-10*E/B)+1)+F;break;case"easeOut":case"mcsEaseOut":default:var C=(E/=B)*E,z=C*E;return F+A*(0.499999999999997*z*C+-2.5*C*C+5.5*z+-6.5*C+4*E)}}},_getTime:function(){if(d.performance&&d.performance.now){return d.performance.now()}else{if(d.performance&&d.performance.webkitNow){return d.performance.webkitNow()}else{if(Date.now){return Date.now()}else{return new Date().getTime()}}}},_stopTween:function(){var g=this;if(g._mcsid==null){return}if(!d.requestAnimationFrame){clearTimeout(g._mcsid)}else{d.cancelAnimationFrame(g._mcsid)}g._mcsid=null;g._mcsstop=1},_delete:function(g){try{delete g}catch(h){g=null}},_mouseBtnLeft:function(g){return !(g.which&&g.which!==1)},_pointerTouch:function(g){var h=g.originalEvent.pointerType;return !(h&&h!=="touch"&&h!==2)},_isNumeric:function(g){return !isNaN(parseFloat(g))&&isFinite(g)}};r.fn[u]=function(g){if(w[g]){return w[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return w.init.apply(this,arguments)}else{r.error("Method "+g+" does not exist")}}};r[u]=function(g){if(w[g]){return w[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return w.init.apply(this,arguments)}else{r.error("Method "+g+" does not exist")}}};r[u].defaults=t;d[u]=true;r(d).load(function(){r(c)[u]()})}))}(window,document));(function(g){var f,h;function e(a,b){this.opts=g.extend({handleKeys:true,scrollEventKeys:[32,33,34,35,36,37,38,39,40]},b);this.$container=a;this.$document=g(document);this.lockToScrollPos=[0,0];this.disable()}h=e.prototype;h.disable=function(){var a=this;a.lockToScrollPos=[a.$container.scrollLeft(),a.$container.scrollTop()];a.$container.on("mousewheel.disablescroll DOMMouseScroll.disablescroll touchmove.disablescroll",a._handleWheel);a.$container.on("scroll.disablescroll",function(){a._handleScrollbar.call(a)});if(a.opts.handleKeys){a.$document.on("keydown.disablescroll",function(b){a._handleKeydown.call(a,b)})}};h.undo=function(){var a=this;a.$container.off(".disablescroll");if(a.opts.handleKeys){a.$document.off(".disablescroll")}};h._handleWheel=function(a){a.preventDefault()};h._handleScrollbar=function(){this.$container.scrollLeft(this.lockToScrollPos[0]);this.$container.scrollTop(this.lockToScrollPos[1])};h._handleKeydown=function(a){for(var b=0;b<this.opts.scrollEventKeys.length;b++){if(a.keyCode===this.opts.scrollEventKeys[b]){a.preventDefault();return}}};g.fn.disablescroll=function(a){if(!f&&(typeof a==="object"||!a)){f=new e(this,a)}else{if(f&&f[a]){f[a].call(f)}}};window.UserScrollDisabler=e})(jQuery);String.prototype.trim=function(){var a=String.prototype.trim.arguments[0];if(a){a="^["+a+"]+|["+a+"]+$";var b=new RegExp(a,"gi");var c=this.replace(b,"")}else{var c=this.replace(/^[ ]+|[ ]+$/g,"")}c=c.replace(/^[\r\n]+|[\r\n]+$/g,"");c=c.replace(/^[ ]+|[ ]+$/g,"");return c};String.prototype.tripSpace=function(){return this.replace(/(\s\s+)/g," ")};String.prototype.repeat=function(){var c=String.prototype.repeat.arguments[0];var b="";var a;for(a=0;a<c;a++){b+=this}return b};String.prototype.filter=function(){var c=String.prototype.filter.arguments[0];var b=String.prototype.filter.arguments[1];var d;var e=this;for(var a=0;a<c.length;a++){d=new RegExp(c[a],"gi");e=e.replace(d,b.repeat(c[a].length))}return e};String.prototype.replaceString=function(){var b=String.prototype.replaceString.arguments;var c;var d=this;for(var a=0;a<b.length;a++){c=new RegExp("%s","i");d=d.replace(c,b[a])}return d};String.prototype.stripViet=function(){var replaceChr=String.prototype.stripViet.arguments[0];var stripped_str=this;var viet=[];i=0;viet[i++]=new Array("a","/á|à|ả|ã|ạ|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/g");viet[i++]=new Array("o","/ó|ò|ỏ|õ|ọ|ơ|ớ|ờ|ở|ỡ|ợ|ô|ố|ồ|ổ|ỗ|ộ/g");viet[i++]=new Array("e","/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/g");viet[i++]=new Array("u","/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/g");viet[i++]=new Array("i","/í|ì|ỉ|ĩ|ị/g");viet[i++]=new Array("y","/ý|ỳ|ỷ|ỹ|ỵ/g");viet[i++]=new Array("d","/đ/g");for(var i=0;i<viet.length;i++){stripped_str=stripped_str.replace(eval(viet[i][1]),viet[i][0]);stripped_str=stripped_str.replace(eval(viet[i][1].toUpperCase().replace("G","g")),viet[i][0].toUpperCase())}if(replaceChr){return stripped_str.replace(/[\W]|_/g,replaceChr).replace(/\s/g,replaceChr).replace(/^\-+|\-+$/g,replaceChr)}else{return stripped_str}};var zmp3Img={dynamic:function(a){$($(a).data("selector")).each(function(){$(this).attr("src",$(this).data("src"))});$(a).remove()}};var zmp3Number={format:function(b){b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2")}return x1+x2}};var zmp3String={substr:function(b,a){if(b.length>a){b=b.substring(0,a);if(b.lastIndexOf(" ")!=-1){b=b.substring(0,b.lastIndexOf(" "))}b+="..."}return b}};function onBlurBind(b,a){$(document).click(function(c){var d=$(b).offset();if(typeof d!=="undefined"){if(c.pageY<d.top||c.pageY>d.top+$(b).height()||c.pageX<d.left||c.pageX>d.left+$(b).width()){a(c)}}})}function isInputNumber(a){return a!==32&&(a<47||((a<58||a>95&&a<106)))}function dynamic(){var d=$(window).scrollTop();var c=d+$(window).height();var a,b;$(".fn-dynamic").each(function(){a=$(this).offset().top;b=a+$(this).height();if((b+200<d)||(a-200<=c)){var e=window[$(this).data("fn")];if(typeof e!="undefined"){e.dynamic.apply(e,[this])}}})}var zmp3DateTime={format:function(v){var r=[[11,"sáng"],[14,"trưa"],[19,"chiều"]],q=["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],p=new Date(),l=new Date(v*1000),s=Math.floor(p.getTime()/1000)-v;if(s<60){return(s<0?0:s).toString()+" giây trước"}if(s<3600){return Math.floor(s/60)+" phút trước"}if(s<43200){return Math.floor(s/3600)+" tiếng trước"}var o=l.getHours(),a=this.fill2(l.getMinutes());if(s<518400){var u="tối";for(var n=0;n<3;n++){if(o<r[n][0]){u=r[n][1];break}}s=(p.getDay()+7-l.getDay())%7;var c="";if(s==0){c="hôm nay"}else{if(s==1){c="hôm qua"}else{c=q[l.getDay()]}}return(o>12?(o%12):o).toString()+":"+a+" "+u+" "+c}o=this.fill2(o);return o+":"+a+" "+this.fill2(l.getDate())+"/"+this.fill2(l.getMonth()+1)+"/"+l.getFullYear()},fill2:function(a){return a<10?("0"+a):a}};var zmp3Share={url:"",share:function(c){var d=c.attr("href");switch(c.data("net")){case"gp":url="https://plus.google.com/share?url="+d;break;case"zm":url="http://link.apps.zing.vn/share?u="+d;break;default:var e=d.replace("%3Futm_source%3Ddesktop%26utm_medium%3Dfacebook%26utm_campaign%3Dshare","");var a="%3Fevent_label%3D"+e;url="https://www.facebook.com/dialog/share?app_id=1603079626622346&display=popup&caption=mp3.zing.vn&redirect_uri=http://"+location.host+"/link/fb-redirect"+a+"&href="+d;var b="facebook";ga("mp3.send","event",{eventCategory:"ShareZingMP3Desktop",eventAction:"Click-"+b,eventLabel:e});break}window.open(url,"share","height=600,width=600");return false},getPageId:function(b){if(b==""){b=window.location.href}var d=b.split("/");if(d.length>=6){var c=d[5];var a=c.substring(0,8);return a}else{return""}},getPageName:function(a){if(a==""){a=window.location.href}var b=a.split("/");if(b.length>=4){return b[3]}else{return""}},};var zmp3Tab={init:function(){if(MP3.ZALO_ID&&!MP3.VIP){var b=$("#tabService");var a=b.data("panel");zmp3SongTool.buildDlBox(b,$(a),function(d){if(d){for(var c in d.data){if(d.data[c].vip){$(".fn-"+c,$(a)).removeClass("ghost-button");var e=$(".fn-size-"+c,$(a)).parent();e.html(e.html().replace("miễn phí","VIP"))}}if(d.msg){$(".fn-list",$(a)).addClass("none");$(".fn-download-off",$(a)).removeClass("none")}}zmp3Tab.showTab(b)})}$(".fn-tab").click(function(){var d=$(this);var c=d.data("panel");if(c==".fn-tab-panel-addto"){zmp3Login.show(function(){zmp3SongTool.buildPlaylistBox(d,$(c),function(){zmp3Tab.showTab(d)})})}else{if(c==".fn-tab-panel-service"){zmp3SongTool.buildDlBox(d,$(c),function(f){if(f){for(var e in f.data){if(f.data[e].vip){$(".fn-"+e,$(c)).removeClass("ghost-button");var g=$(".fn-size-"+e,$(c)).parent();g.html(g.html().replace("miễn phí","VIP"))}}if(f.msg){$(".fn-list",$(c)).addClass("none");$(".fn-download-off",$(c)).removeClass("none")}}zmp3Tab.showTab(d)})}else{zmp3Tab.showTab(d)}}return false});$(".fn-closetab").click(function(){zmp3Tab.showTab($($(this).data("tab")));return false})},showTab:function(c){var a=c.data("panel");var b=$('.fn-tab[data-group="'+c.data("group")+'"]');b.removeClass("active");c.parent().siblings().removeClass("active");$(c.data("group")).addClass("none");b.each(function(){$($(this).data("panel")).addClass("none")});if(c.data("show")){$(a).addClass("none");b.data("show",false);c.parent().removeClass("active")}else{b.data("show",false);c.data("show",true);c.parent().addClass("active");c.addClass("active");$(a).removeClass("none")}}};var zmp3ChangePath={clickCb:function(a){location.pathname=$(a).data("path")}};$(document).ready(function(){$(window).load(function(){if($(window).height()>$("body").height()){$("body").addClass("fixed-footer")}else{$("body").removeClass("fixed-footer")}zmp3UI.sidebar();dynamic()});$(window).resize(function(){if($(window).height()>$("body").height()){$("body").addClass("fixed-footer")}else{$("body").removeClass("fixed-footer")}zmp3UI.sidebar();dynamic();zmp3Suggest.resize()});$(document).scroll(function(a){dynamic();zmp3UI.sidebar()});zmp3UI.init();zmp3Login.init();zmp3Suggest.init();zmp3SongTool.init();zmp3User.init();zmp3Tab.init();if($("a.fn-version3").length>0){$("a.fn-version3").attr("href","//v3.mp3.zing.vn"+location.pathname+location.search)}if(!MP3.VIP&&typeof ZVip!="undefined"){$(".fn-viprequire").click(function(a){if(!MP3.VIP){ZVip.Fpackage($(this).data("step"));return false}})}});zmp3User={init:function(){$(".fn-login").click(function(){if(!MP3.ACCOUNT_ID){zmp3Login.show();return false}})},submitCb:function(a){}};function loginCallback(a,b){zmp3Login.process(a,b)}function loginZaloCallback(){zmp3Login.zaloProcess()}var zmp3SongTool={item:false,init:function(){$(".fn-dlsong").click(function(a){zmp3SongTool.showDlBox($(this));return false});$(".fn-share").click(function(a){zmp3SongTool.showShareBox($(this));return false});$(".fn-add").each(function(){var a=this;if("fav"==$(a).data("from")){$.get("/json/favorite/check-exists",$(a).data(),function(b){if(b.exists){$(a).addClass("added").html($(a).html().replace("Thêm vào","Đã thêm"))}})}$(a).click(function(){if(zmp3Login.show()){zmp3SongTool.item=$(this);zmp3SongTool.addPlaylistItem($(this))}return false})});$(".fn-addto").click(function(a){if(zmp3Login.show()){zmp3SongTool.showAddBox($(this))}return false});$(".fn-addfav").click(function(){var c=$($(this).data("item"));if(zmp3Login.show()){var b=$(c).data(),e=parseInt(c.data("added")),a=new Date().getTime(),d=this.item,f=[];if((isNaN(e)||e+800<a)){c.data("added",a);$.post("/json/favorite/add-item",b,function(g){if(g.err==0){c.addClass("added")}zmp3UI.showMsg(g.msg,g.err)})}}return false});$("form.fn-playlist").submit(function(b){var a=this;if(a.name.value.trim().length<1){zmp3UI.showMsg("Vui lòng nhập tên playlist!",1)}else{if(!$(a).attr("disabled")){$(a).attr("disabled",true);this.item_id.value=zmp3SongTool.item.data("id");$.post($(a).attr("action"),$(a).serialize(),function(c){$(a).attr("disabled",false);if(c.code<1){zmp3SongTool.buildPlaylistItem(c.data,$($(a).data("playlist-box")))}zmp3UI.showMsg(c.msg,c.code)})}}return false});$(".fn-rmitem").click(function(){zmp3SongTool.removeItem($($(this).data("item")));return false});onBlurBind("#playlistBox",function(a){if(zmp3SongTool.item){$("#playlistBox").addClass("none");if(zmp3SongTool.item.data("active")){$(".fn-"+zmp3SongTool.item.data("type")).removeClass(zmp3SongTool.item.data("active"))}$(".fn-songbox").addClass("none")}})},showPlaylistBox:function(d,c){var a=$("#playlistBox");var e=this.item.data("pids")?this.item.data("pids").split(","):[];$(".fn-add",a).removeClass("added");$("input",a).prop("checked",false);for(var b in e){if(e[b].length>1){$("input",$("[data-pid="+e[b]+"]",a).addClass("added")).prop("checked",true)}}a.removeClass("none").css("top",d).css("left",c).css("display","block")},addPlaylistItem:function(b){var f=$(b).data(),g=false,j=parseInt(b.data("added")),a=new Date().getTime(),k=this.item,h=[];try{f.id=k.data("id");if(k.data("pids")){h=k.data("pids").split(",")}}catch(d){}for(var c in h){if(h[c]===f.pid){g=true;break}}if(b.hasClass("added")){zmp3SongTool.removeItem($(b.data("item")),function(){b.removeClass("added").html(b.html().replace("Đã thêm","Thêm vào"));if($("input",b).length>0){$("input",b).removeAttr("checked")}},true)}else{if(!g&&(isNaN(j)||j+800<a)){b.data("added",a);$.post("/json/favorite/add-item",f,function(i){if(i.err<1){if($("input",b).length>0){$("input",b).attr("checked","checked")}b.addClass("added").html(b.html().replace("Thêm vào","Đã thêm"));h.push(f.pid);try{k.data("pids",h.join(","))}catch(l){}}zmp3UI.showMsg(i.msg,i.err)})}}},removeItem:function(b,f,a){var c=$(b).data(),e=this;var d="Bạn chắc chắn muốn xóa ";if(c.type=="song"){d+="bài hát"}else{if(c.type=="artist"){d+="nghệ sĩ"}else{d+=c.type}}zmp3UI.bodyMask(1);zmp3UI.confirm("Xác nhận",c.name&&!c.pid?d+" <strong>"+c.name+"</strong> ra khỏi danh sách?":d+" này ra khỏi danh sách?",function(g){if(g){if(!c.id||c.id.length<4){c.id=e.item.data("id")}for(var h in c){if(typeof c[h]!=="string"&&typeof c[h]!=="number"){delete (c[h])}}if(!b.data("removed")){b.data("removed",true);$.post("/json/favorite/remove-item",c,function(k){if(k.err==0){var i=$(".fn-follow",b.parent());if(i.length>0){i.removeClass("none").removeClass("active");var j=$(".fn-rmitem",b.parent());j.addClass("none")}else{i=$(".fn-ufollow",b.parent());if(i.length>0){i.removeClass("none")}else{if(!a){b.remove()}}}}else{b.data("removed",false)}zmp3UI.showMsg(k.msg,k.err);if($.isFunction(f)){f(k)}})}}$("#confirmBox .fn-close").click();zmp3UI.bodyMask(0)})},showAddBox:function(b){this.item=$(b.data("item"));var c=$(b).offset();var a=this.item.data("type");c.top+=$(b).height()+8;c.left+=$(b).width()/2;$(".fn-songbox").addClass("none");if(this.item.data("active")){$(".fn-"+a).removeClass(this.item.data("active"));this.item.addClass(this.item.data("active"))}if(a=="song"||a=="playlist"){if(!$(b).data("rendered")){$(".fn-addto").data("rendered",true);this.buildPlaylistBox(this.item,$("#playlistBox"),function(){zmp3SongTool.showPlaylistBox(c.top,c.left)})}else{zmp3SongTool.showPlaylistBox(c.top,c.left)}}},showDlBox:function(b){this.item=$(b.data("item"));var a=this.item.data("type")||"song";var f=b.offset(),e=this.item.data("active");var d="dlbox"+a+this.item.data("id");var c=$("#"+d);$(".fn-"+a).removeClass(e);this.item.addClass(e);$(".fn-box"+a).addClass("none");if(c.length>0){c.css({left:f.left+2-(c.width()/2)+"px",top:f.top+28+"px"}).removeClass("none")}else{c=$(document.getElementById("dlbox"+a).cloneNode(true));c.attr("id",d);$("body").append(c);c.css({left:f.left+2-(c.width()/2)+"px",top:f.top+28+"px"});this.buildDlBox(this.item,c,function(g){c.removeClass("none");if(g.msg){$(".box-tooltip.box-download.fn-boxsong").addClass("none");zmp3UI.showMsg(g.msg,1)}if(!MP3.VIP&&typeof ZVip!="undefined"){$(".fn-viprequire",c).click(function(h){if(!MP3.VIP){c.addClass("none");ZVip.Fpackage();return false}})}onBlurBind(zmp3SongTool.item,function(){$(".fn-"+zmp3SongTool.item.data("type")).removeClass(zmp3SongTool.item.data("active"));c.addClass("none")})})}},showShareBox:function(a){$(".fn-boxsong").addClass("none");this.item=$($(a).data("item"));var d=a.offset();var c="shareSongBox"+this.item.data("id");var b=$("#"+c);$(".fn-"+this.item.data("type")).removeClass(this.item.data("active"));this.item.addClass(this.item.data("active"));$(".fn-songbox").addClass("none");if(b.length>0){b.css("top",d.top+28).css("left",(d.left-80)+(b.width()/2)).removeClass("none")}else{b=$(document.getElementById("shareSongBox").cloneNode(true));b.attr("id",c);$("body").append(b);$(".fn-sharelink",b).attr("href",a.attr("href")).attr("data-id",this.item.data("id")).removeClass("none").click(function(){zmp3Share.share($(this));return false});b.css("top",d.top+28).css("left",(d.left-80)+(b.width()/2)).removeClass("none");onBlurBind(zmp3SongTool.item,function(){$(".fn-"+zmp3SongTool.item.data("type")).removeClass(zmp3SongTool.item.data("active"));b.addClass("none")})}},buildDlBox:function(e,b,a){this.item=e;var d=e.data("code");if(d!==b.data("build-dl")){b.data("build-dl",d);var c=e.data("type")||"song";$(".fn-list a",b).each(function(){$(this).parent().addClass("none")});$.get("/json/"+c+"/get-download",e.data(),function(g){if(g.data){var h=g.data;for(var f in h){$(".fn-"+f,b).parent().removeClass("none");$(".fn-size-"+f,b).parent().removeClass("none");$(".fn-"+f,b).attr("data-id",e.data().id);$(".fn-"+f,b).attr("data-bit",f);if(f=="128"){$(".fn-"+f,b).attr("href",h[f].link).click(function(i){if(typeof z3Log!=="undefined"){}if(g.data[f].vip&&!MP3.VIP){ZVip.Fpackage($(this).data("step"));return false}})}else{$(".fn-"+f,b).attr("href",h[f].link).click(function(i){if(typeof z3Log!=="undefined"){}})}if(h[f].size>0){$(".fn-size-"+f,b).html((h[f].size/1048576).toFixed(2))}}if(g.qr){$(".fn-qr",b).attr("src","data:image/png;base64,"+g.qr)}}if($.isFunction(a)){a(g)}})}else{if($.isFunction(a)){a()}}},buildPlaylistItem:function(c,a){var b=c.id===0?$(".fn-fav",a)[0].cloneNode(true):$(".fn-item",a)[0].cloneNode(true);$(".fn-name",b).html(c.name);$(".fn-link",b).attr("href",c.link);if($(".fn-total",b).length>0){$(".fn-total",b).html(c.total);if(c.id==0&&c.type=="playlist"){$(".fn-total",b).parent("span").remove()}}$(b).attr("id",c.id);if(c.added){$(".fn-add",b).addClass("added");if($("input",b).length>0){$("input",b).prop("checked",true)}}$(".fn-add",b).attr("data-pid",c.id).attr("data-from","playlist").attr("data-item","#"+c.id+" .fn-add").attr("data-name",c.name).attr("data-type",c.type).attr("data-title",c.name).attr("data-pid",c.id).click(function(f){f.preventDefault();zmp3SongTool.addPlaylistItem($(this));var d=$(this).data();return false});$(b).removeClass("none");$(".fn-list",a).append(b)},buildPlaylistBox:function(c,b,a){this.item=c;if(!b.data("build-playlist")){b.data("build-playlist",1);$.get("/json/user/get-playlist",c.data(),function(d){if(d.data){for(x in d.data){zmp3SongTool.buildPlaylistItem(d.data[x],b)}if($.isFunction(a)){a()}}})}else{if($.isFunction(a)){a()}}}};var zmp3Login={succCallback:"",error:0,isZalo:false,isCall114:false,init:function(){var a=$("#loginBox");$(".fn-zalo",a).click(function(){zmp3Login.isZalo=true;zmp3Login.show();return false});$(".fn-zingid",a).click(function(){zmp3Login.isZalo=false;zmp3Login.show();return false})},show:function(a){this.succCallback=a;if(!MP3.ACCOUNT_ID){var b=$("#loginBox");if(this.isZalo){$(".fn-zingid",b).removeClass("active");$(this).addClass("active");$(".fn-content",b).html('<iframe src="'+MP3.MP3_URL+'/auth/zalo/access_token" style="border:none;"></iframe>')}else{$(".fn-zalo",b).removeClass("active");$(this).addClass("active");loadScript("http://id.zaloapp.com/open-widget?f=3U9FGM10004");$.get("/json/user/get-loginbox",function(c){if(c.html){$(".fn-content",b).html(c.html);b.removeClass("none");zmp3UI.bodyMask(1);$("input[name=u]").focus();$("form",b).submit(function(){var e=$("input[name=u]");var d=$("input[name=p]");if(e.val().trim().length<2){zmp3Login.showMsg("Tên đăng nhập không hợp lệ.");e.focus();return false}else{if(d.val().trim().length<2){zmp3Login.showMsg("Vui lòng nhập mật khẩu.");d.focus();return false}}if($("#longtime").prop("checked")){$("#u1").val($("#u1").val()+"&longtime=1");$("#fp").val($("#fp").val()+"&longtime=1")}else{$("#u1").val($("#u1").val()+"&longtime=0");$("#fp").val($("#fp").val()+"&longtime=0")}})}else{if(c.userid){zmp3UI.buildInfo(c)}}},"json")}return false}else{if($.isFunction(this.succCallback)){this.succCallback()}}return true},showMsg:function(a){$("#loginBox").removeClass("none");$("#loginBox .fn-msg").removeClass("none").html(a)},process:function(a,b){this.error=a;if(a!=0&&a!=-113){if(a==-114){if(!this.isCall114){$.getJSON("http://me.zing.vn/cp?url="+MP3.MP3_URL+"&callback=?",function(){$("#loginBox .frm-button").click();try{document.getElementById("loginBox").getElementsByClassName("frm-button")[0].disabled=true}catch(c){console.log("Exception in disable button login")}});this.isCall114=true}setTimeout(function(){location.href=location.href},3000)}else{this.showMsg(b)}}else{$.ajax({url:"/login/set-zmsid",method:"GET",}).done(function(c){zmp3UI.profile(true)})}},zaloProcess:function(){zmp3UI.profileLoginByZalo(true)}};var zmp3Suggest={lastQ:"",tplArtist:null,lastcall:0,tplAlbum:null,tplSong:null,tplVideo:null,timeoutHandle:null,firstRequestTopKeyword:false,retTopKeyword:null,init:function(){var c=$("#sug");var d=$(".fn-result",c);if(MP3.IS_PC){$('input[name="q"]').focus()}if(location.pathname.search("/tim-kiem/")!=-1){$("form",c).attr("action",location.pathname)}$(window).disablescroll();$(window).disablescroll("undo");var b=new RegExp("q=(.*?)(&|$)");var a=b.exec(location.search);if(a){$("input[name=q]",c).val(decodeURIComponent(decodeURI(a[1]).replace(new RegExp("\\+","g")," ")))}if(document.getElementById("tplSugArtist")!==null){tplArtist=document.getElementById("tplSugArtist").cloneNode(true)}if(document.getElementById("tplSugAlbum")!==null){tplAlbum=document.getElementById("tplSugAlbum").cloneNode(true)}if(document.getElementById("tplSugSong")!==null){tplSong=document.getElementById("tplSugSong").cloneNode(true)}if(document.getElementById("tplSugVideo")!==null){tplVideo=document.getElementById("tplSugVideo").cloneNode(true)}if(document.getElementById("tplTopKeyword")!==null){tplTopKeyword=document.getElementById("tplTopKeyword").cloneNode(true)}d.mCustomScrollbar({scrollInertia:0,scrollbarPosition:"outside",autoHideScrollbar:true,autoExpandScrollbar:true,keyboard:{enable:true},mouseWheel:{preventDefault:true}});this.clearResult();onBlurBind('input[name="q"]',function(){d.addClass("none")});$("form",c).submit(function(){var e=$(".fn-list .fn-item.active",d);if(e.length>0){location.href=$(".fn-link",e).attr("href");return false}if($.trim($('input[name="q"]').val()).length<1){return false}});$('input[name="q"]',c).keydown(function(j){if(j.keyCode===13){var h=$(".fn-list .fn-item.active",d);if(h.length>0){return false}}else{var g=$(".fn-list .fn-item",d);if((j.keyCode===38||j.keyCode===40)){if(g.length>0){var k=-1;for(var f=0;f<g.length;f++){if($(g[f]).hasClass("active")){k=f;break}}g.removeClass("active");switch(j.keyCode){case 38:(k>0)?$(g[k-1]).addClass("active"):$(g[g.length-1]).addClass("active");break;case 40:(k<g.length-1)?$(g[k+1]).addClass("active"):$(g[0]).addClass("active");break}}return false}else{if(j.keyCode<65&&j.shiftKey||j.keyCode>165&&j.keyCode<200||this.value.length<1&&j.keyCode==32){}}}}).keyup(function(g){if(!(g.keyCode<65&&g.shiftKey||g.keyCode>165&&g.keyCode<200||this.value.length<1&&g.keyCode==32)){if(zmp3Suggest.timeoutHandle){clearTimeout(zmp3Suggest.timeoutHandle);zmp3Suggest.timeoutHandle=null}var f=this;zmp3Suggest.timeoutHandle=setTimeout(function(){zmp3Suggest.suggest($(f))},500);if(g.keyCode==32){clearTimeout(zmp3Suggest.timeoutHandle);zmp3Suggest.timeoutHandle=null;zmp3Suggest.suggest($(f))}}}).focus(function(){zmp3Suggest.suggest($(this))}).click(function(){zmp3Suggest.suggest($(this))});d.height($(window).height()-42)},clearResult:function(){$("#sugResult").data("current",-1);$("#tplSugArtist").remove();$("#tplSugAlbum").remove();$("#tplSugSong").remove();$("#tplSugVideo").remove()},resize:function(){$("#sugResult").height("auto")},suggest:function(c){var d="";var b=0;if(typeof c==="string"){d=c;b=c.length}else{d=c.val();b=c.val().length}if(b>1){$("#sugTopKeyword").addClass("none");var a=$.now();if(this.lastQ!==d&&this.lastcall+50<a){zmp3Suggest.lastcall=a;zmp3Suggest.lastQ=d;$.getJSON("http://ac.mp3.zing.vn/complete/desktop?type=artist,album,video,song&num=3&callback=?",{query:zmp3Suggest.lastQ},function(f){if(zmp3Suggest.lastQ===d){$("#sugTop .fn-list").empty();$("#sugSong .fn-list").empty();$("#sugAlbum .fn-list").empty();$("#sugVideo .fn-list").empty();$("#sugArtist .fn-list").empty();if(f.data){$(tplArtist).data("highlight",d);$(tplSong).data("highlight",d);$(tplAlbum).data("highlight",d);$(tplVideo).data("highlight",d);if(typeof f.top!=="undefined"&&f.top!=""){$("#sugTop").removeClass("none");if(typeof f.top.type!=="undefined"&&f.top.type!=""){switch(f.top.type){case"song":$("#sugTop .ics.zicon").addClass("ics-song");$("#sugTop .ics.zicon").removeClass("ics-artist");$("#sugTop .ics.zicon").removeClass("ics-album");$("#sugTop .ics.zicon").removeClass("ics-video");var i=f.top;var j=tplSong.cloneNode(true);$(".fn-name",j).addClass("fn-highlight").data("highlight",d).html(i.name);$(".fn-artist",j).addClass("fn-highlight").data("highlight",d).html(i.artist);var e="/bai-hat/"+i.name.stripViet("-")+"-"+i.artist.stripViet("-")+"/"+i.id+".html";$("a.fn-link",j).attr("title",i.name+" - "+i.artist).attr("href",e);$(j).removeClass("none");$("#sugTop .fn-list").append(j);break;case"album":$("#sugTop .ics.zicon").addClass("ics-album");$("#sugTop .ics.zicon").removeClass("ics-song");$("#sugTop .ics.zicon").removeClass("ics-artist");$("#sugTop .ics.zicon").removeClass("ics-video");var i=f.top;var j=tplAlbum.cloneNode(true);$(".fn-name",j).addClass("fn-highlight").data("highlight",d).html(i.name);$(".fn-artist",j).addClass("fn-highlight").data("highlight",d).html(i.artist);var e="/album/"+i.name.stripViet("-")+"-"+i.artist.stripViet("-")+"/"+i.id+".html";$("a.fn-link",j).attr("title",i.name+" - "+i.artist).attr("href",e);$("img.fn-thumb",j).attr("src","http://image.mp3.zdn.vn/thumb/94_94/"+i.thumb).attr("alt",i.name);$(j).removeClass("none");$("#sugTop .fn-list").append(j);break;case"artist":$("#sugTop .ics.zicon").addClass("ics-artist");$("#sugTop .ics.zicon").removeClass("ics-song");$("#sugTop .ics.zicon").removeClass("ics-album");$("#sugTop .ics.zicon").removeClass("ics-video");var i=f.top;var j=tplArtist.cloneNode(true);var h="/nghe-si/"+(i.aliasName?i.aliasName:(i.name_stripviet?i.name_stripviet:i.name.stripViet("-")));var g=i.id;$(".fn-name",j).addClass("fn-highlight").data("highlight",d).html(i.name);$("a.fn-link",j).attr("title",i.name).attr("href",h).attr("data-id",g);$("img.fn-thumb",j).attr("src","http://image.mp3.zdn.vn/thumb/94_94/"+i.thumb).attr("alt",i.name);$(j).removeClass("none");$("#sugTop .fn-list").append(j);break;case"video":$("#sugTop .ics.zicon").addClass("ics-video");$("#sugTop .ics.zicon").removeClass("ics-artist");$("#sugTop .ics.zicon").removeClass("ics-album");$("#sugTop .ics.zicon").removeClass("ics-song");var i=f.top;var j=tplVideo.cloneNode(true);$(".fn-name",j).addClass("fn-highlight").data("highlight",d).html(i.name);$(".fn-artist",j).addClass("fn-highlight").data("highlight",d).html(i.artist);var e="/video-clip/"+i.name.stripViet("-")+"-"+i.artist.stripViet("-")+"/"+i.id+".html";$("a.fn-link",j).attr("title",i.name+" - "+i.artist).attr("href",e);$("img.fn-thumb",j).attr("src","http://image.mp3.zdn.vn/thumb/128_72/"+i.thumb).attr("alt",i.name);$(j).removeClass("none");$("#sugTop .fn-list").append(j);break}}}else{$("#sugTop").addClass("none")}if(f.data[0].artist.length>0){for(x in f.data[0].artist){var i=f.data[0].artist[x];var j=tplArtist.cloneNode(true);var h="/nghe-si/"+(i.aliasName?i.aliasName:(i.name_stripviet?i.name_stripviet:i.name.stripViet("-")));var g=i.id;$(".fn-name",j).addClass("fn-highlight").data("highlight",d).html(i.name);$("a.fn-link",j).attr("title",i.name).attr("href",h).attr("data-id",g);$("img.fn-thumb",j).attr("src","http://image.mp3.zdn.vn/thumb/94_94/"+i.thumb).attr("alt",i.name);$(j).removeClass("none");$("#sugArtist .fn-list").append(j)}$("#sugArtist").removeClass("none")}else{$("#sugArtist").addClass("none")}if(f.data[1].album.length>0){for(x in f.data[1].album){var i=f.data[1].album[x];var j=tplAlbum.cloneNode(true);$(".fn-name",j).addClass("fn-highlight").data("highlight",d).html(i.name);$(".fn-artist",j).addClass("fn-highlight").data("highlight",d).html(i.artist);var e="/album/"+i.name.stripViet("-")+"-"+i.artist.stripViet("-")+"/"+i.id+".html";$("a.fn-link",j).attr("title",i.name+" - "+i.artist).attr("href",e);$("img.fn-thumb",j).attr("src","http://image.mp3.zdn.vn/thumb/94_94/"+i.thumb).attr("alt",i.name);$(j).removeClass("none");$("#sugAlbum .fn-list").append(j)}$("#sugAlbum").removeClass("none")}else{$("#sugAlbum").addClass("none")}if(f.data[2].video.length>0){for(x in f.data[2].video){var i=f.data[2].video[x];var j=tplVideo.cloneNode(true);$(".fn-name",j).addClass("fn-highlight").data("highlight",d).html(i.name);$(".fn-artist",j).addClass("fn-highlight").data("highlight",d).html(i.artist);var e="/video-clip/"+i.name.stripViet("-")+"-"+i.artist.stripViet("-")+"/"+i.id+".html";$("a.fn-link",j).attr("title",i.name+" - "+i.artist).attr("href",e);$("img.fn-thumb",j).attr("src","http://image.mp3.zdn.vn/thumb/128_72/"+i.thumb).attr("alt",i.name);$(j).removeClass("none");$("#sugVideo .fn-list").append(j)}$("#sugVideo").removeClass("none")}else{$("#sugVideo").addClass("none")}if(f.data[3].song.length>0){for(x in f.data[3].song){var i=f.data[3].song[x];var j=tplSong.cloneNode(true);$(".fn-name",j).addClass("fn-highlight").data("highlight",d).html(i.name);$(".fn-artist",j).addClass("fn-highlight").data("highlight",d).html(i.artist);var e="/bai-hat/"+i.name.stripViet("-")+"-"+i.artist.stripViet("-")+"/"+i.id+".html";$("a.fn-link",j).attr("title",i.name+" - "+i.artist).attr("href",e);$(j).removeClass("none");$("#sugSong .fn-list").append(j)}$("#sugSong").removeClass("none")}else{$("#sugSong").addClass("none")}$("#sugResult").removeClass("none");zmp3UI.highlight()}}zmp3Suggest.resize()})}else{$("#sugResult").removeClass("none");zmp3Suggest.resize()}}else{this.clearResult()}},showTopKeyword:function(){if(!this.firstRequestTopKeyword){this.firstRequestTopKeyword=true;$.getJSON("http://ac.mp3.zing.vn/complete/topkeyword?callback=?",{},function(a){zmp3Suggest.retTopKeyword=a;if($("#sug .input-txt").val()===""){$("#sugTop").addClass("none");$("#sugArtist").addClass("none");$("#sugSong").addClass("none");$("#sugVideo").addClass("none");$("#sugAlbum").addClass("none");if(a.data.length>0){for(x in a.data){$("#sugTopKeyword").removeClass("none");var b=a.data[x];var c=tplTopKeyword.cloneNode(true);$(".fn-name",c).addClass("fn-highlight").data("highlight","").html(b);$(".fn-name",c).addClass(x);$(".fn-name."+x,c).click(function(){var d=$(this).context.innerText;zmp3Suggest.suggest(d);$("#sug .input-txt").val(d)});$(c).removeClass("none");$("#sugTopKeyword .fn-list").append(c)}zmp3UI.highlight();$("#sugResult").removeClass("none")}}zmp3Suggest.resize()})}else{if(this.retTopKeyword!=null){if($("#sug .input-txt").val()===""){$("#sugTop").addClass("none");$("#sugArtist").addClass("none");$("#sugSong").addClass("none");$("#sugVideo").addClass("none");$("#sugAlbum").addClass("none");$("#sugResult").removeClass("none");$("#sugTopKeyword").removeClass("none")}}}}};var ZMEInfo={size:50,uid:[],elId:[],listId:[],listUname:[],renderZMEAvatar:function(){var a=$(".fn_zme_info");for(var d=0;d<a.length;d++){var e=$(a[d]);if(e.attr("data_uid")){var c=parseInt(e.attr("data_uid"));if(c>0){var f=e.data("ref")?e.data("ref"):".fn_zme_info[data_uid="+e.attr("data_uid")+"]";this.listId.push(e.attr("data_uid")+"?"+f)}}else{if(e.attr("data_uname")){if(e.attr("data_uname").length>2){var f=e.data("ref")?e.data("ref"):".fn_zme_info[data_uname='"+e.attr("data_uname")+"']";this.listUname.push(e.attr("data_uname")+"?"+f)}}}if(e.data("thumbsize")){this.size=parseInt(e.data("thumbsize"))}}if(this.listId.length||this.listUname.length){var b="http://widget.me.zing.vn/api/widget?method=getMixEx&size=50&displaylist=&displaylist_ex=&ava_list="+this.listUname.join("|,")+"&ava_list_id="+this.listId.join("|,");loadScript(b);this.listId=[];this.listUname=[]}}};function fA(b,a,l,e){var f=$(b);if(f.length){for(var g=0;g<f.length;g++){var c=$(f[g]);var h=$(c.data("thumb"));var j=$(c.data("link"));var k=$(c.data("dname"));var d="http://me.zing.vn/u/";if(h.length){h.each(function(){if(this.tagName=="IMG"){$(this).attr("src",a).attr("alt",e)}})}if(j.length){j.each(function(){if(this.tagName=="A"){$(this).attr("href",d+l).attr("title",e)}})}if(k.length){k.each(function(){$(this).html(e);if(this.tagName=="A"){$(this).attr("href",d+l).attr("title",e)}})}}c.remove()}}var zmp3UI={initBefore:false,init:function(){if(!this.initBefore){this.profile()}this.followInit();$(".fn-tooltip").click(function(){if(!$(this).data("show")){$($(this).data("box")).removeClass("none");$(this).data("show",true)}else{$($(this).data("box")).addClass("none");$(this).data("show",false)}false});$(".fn-show").length>0&&$(".fn-show").click(function(){zmp3UI.showhide($($(this).data("box")));return false});$(".fn-showhere").length>0&&$(".fn-showhere").click(function(){var i=$(this).offset();var h=i.top,g=$($(this).data("box"));if(h+g.height()+20>$(window).height()+$(window).scrollTop()){h-=g.height()+12}else{h+=$(this).height()}g.css({top:h+"px",left:i.left+6-g.width()/2+"px"});if($(g).hasClass("none")){$(g).removeClass("none")}else{$(g).addClass("none")}return false});$(".fn-showhide").length>0&&$(".fn-showhide").click(function(){$($(this).data("show")).removeClass("none");$($(this).data("hide")).addClass("none");return false});if($(".fn-cb").length){$(".fn-cb").click(function(){var g=window[$(this).data("fn")];if(typeof g!="undefined"){g.clickCb.apply(g,[this])}return false})}$(".fn-expand").each(function(){var h=$($(this).data("box"));var g=parseInt(h.data("min"));if(g>=h[0].scrollHeight){h.css("height","auto");$(this).remove()}});$(".fn-expand").click(function(){var g=$($(this).data("box"));if(!g.data("expand")){$(this).data("top",$(window).scrollTop());g.css("height",g.data("max"));g.data("expand",1);$(this).html("Rút gọn")}else{g.css("height",g.data("min"));g.data("expand",0);$(this).html("Xem thêm");$(window).scrollTop($(this).data("top"))}return false});$(".fn-number").each(function(){$(this).html(zmp3Number.format($(this).html()))});$(".fn-date").each(function(){$(this).html(zmp3DateTime.format($(this).html()))});$(".fn-scrollbar").mCustomScrollbar({scrollInertia:0,scrollbarPosition:"outside",autoHideScrollbar:true,autoExpandScrollbar:true,mouseWheel:{preventDefault:true}});if(!this.initBefore){$(".fn-sharelink").click(function(){zmp3Share.share($(this));return false})}$("form.fn-ajax").submit(function(){var g="undefined";if($(this).data("cb")){var g=window[$(this).data("cb")]}$.post($(this).attr("action"),$(this).serialize(),function(h){if(typeof g!="undefined"){g.submitCb.apply(g,[h,this])}});return false});$(".fn-close").click(function(){var g=window[$(this).data("cb")];if(typeof g!="undefined"){g.closeCb.apply(g,[this])}zmp3UI.bodyMask(0);$($(this).data("box")).addClass("none");return false});$(".fn-param").click(function(){location.href=zmp3UI.replaceUrlParam($(this));return false});var b=$(".fn-bar");var f=0;for(var d=0;d<b.length;d++){var e=$(b[d]);var c=parseInt(e.data("total"));if(!isNaN(c)&&f<c){f=c}}for(var d=0;d<b.length;d++){var e=$(b[d]);var c=parseInt(e.data("total"));if(!isNaN(c)){c=100*c/f;if(c<95){c+=4}e.css("width",c+"%")}}zmp3Toolbar.init();$(".fn-time").each(function(){$(this).html(zmp3DateTime.format($(this).html()))});if(location.host.search("lt.mp3.zing.vn")===-1){(function(j,g,k){var i,h=j.getElementsByTagName(g)[0];if(j.getElementById(k)){return}i=j.createElement(g);i.id=k;i.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1603079626622346&version=v2.7";h.parentNode.insertBefore(i,h)}(document,"script","facebook-jssdk"))}this.highlight();if(!this.initBefore){$(".fn-banner-off").click(function(){if(MP3.VIP){zmp3UI.setBannerOff(!MP3.BANNER_OFF,true)}else{if(typeof ZVip!="undefined"){ZVip.Fpackage()}}return false});this.initBefore=true}$(".fn-slide-show").each(function(){var i=this;var g={dots:false,prevArrow:$(".fn-prev",this),nextArrow:$(".fn-next",this),infinite:true,speed:1500,slidesToShow:6,slidesToScroll:6};if($(this).data()!==null){$.extend(g,g,$(this).data())}if($(this).data("customNav")!==null){var h=$($(this).data("customNav"));$(".fn-slide",this).slick(g).on("beforeChange",function(m,k,j,l){h.removeClass("active");$(h[(l/g.slidesToShow)]).addClass("active")});$(h[0]).addClass("active");h.click(function(){$(".fn-slide",i).slick("slickGoTo",$(this).data("ord"));return false})}else{$(".fn-slide",this).slick(g)}if($(i).data("cb")!==null&&typeof window[$(i).data("cb")]!="undefined"){$(".fn-slide",i).on("afterChange",function(m,j,k){var l=window[$(i).data("cb")];if(typeof l!="undefined"){l.afterChange.apply(l,[j,k])}})}});$("a[tracking]").click(function(){return zmp3Common.trackingOn($(this),"/tracking")});var a=new Date().getHours();if(a>18&&a<21){$(".fn-ytsubscribe").removeClass("none")}$(".fn-useravatar").attr("src",$(".fn-profile .fn-thumb").attr("src"))},bodyMask:function(a){if(a){$(".body-mask").removeClass("none")}else{$(".body-mask").addClass("none")}},showmodal:function(a){this.showhide($($(a).data("box")),function(b){zmp3UI.bodyMask(b)});return false},showhide:function(b,a){if(b.hasClass("none")){b.css("display","none");b.removeClass("none")}b.slideToggle(200,function(){if($.isFunction(a)){a(false)}})},highlight:function(){var d=$(".fn-highlight");if(d.length){for(var b=0;b<d.length;b++){var c=$(d[b]);if(c.data("highlight")){var e=c.html().split("/");var a=this.matchMaker(e.length>1?e[1].trim():e[0],c.data("highlight").stripViet().toLowerCase());if(a){c.html((e.length>1?e[0]+"/ ":"")+a)}}}d.removeClass("fn-highlight")}},matchMaker:function(c,b){var a=c.stripViet().toLowerCase();var d=a.indexOf(b);if(d>-1){return c.substr(0,d)+'<strong class="mark">'+c.substr(d,b.length)+"</strong>"+c.substr(d+b.length,c.length)}return false},replaceUrlParam:function(b){var c,d,a=b.attr("href"),f=b.data("param"),e=b.data("value");if(!a||a.length<10){a=location.href}if(f=="genre"){if(a.indexOf("?genre=")!="-1"){a=a.replace(/genre=[0-9]&/g,"?");a=a.replace(/genre=[0-9]/g,"")}if(a.indexOf("&genre=")!="-1"){a=a.replace(/&genre=[0-9]/g,"")}}if(b.data("op")=="remove"){c=new RegExp("(\\&|\\?)"+f+"="+e);d=a.replace(c,"$1").replace("&&","&").replace(new RegExp("\\&$"),"&")}else{if(b.data("op")=="add"){c=new RegExp("(\\&|\\?)"+f+"="+e);if(!c.test(a)){d=a+(a.indexOf("?")>-1?"&":"?")+f+"="+e}}else{var c=new RegExp("(\\&|\\?)("+f+"=).*?(&|$)");if(c.test(a)){d=e&&e.length>0?a.replace(c,"$1$2"+e+"$3"):a.replace(c,"$3")}else{if(typeof e!=="undefined"){d=a+(a.indexOf("?")?"&":"?")+f+"="+e}}if(d===a){d=d+(d.indexOf("?")>0?"&":"?")+f+"="+e}}}d=d.replace("??","?");return d},setBannerOff:function(c,d){MP3.BANNER_OFF=c;var a=new Date();var b=43200;a.setTime(a.getTime()+(b*60*1000));var e=MP3.BANNER_OFF?1:0;$.cookie("BANNER_OFF",e,{path:"/",domain:"zing.vn",expires:a});if(MP3.BANNER_OFF){$("._bannerAds").remove();$(".fn-banner-off").removeClass("active").each(function(){$(this).html($(this).html().replace("Tắt","Bật"))})}else{if(d){location.reload()}}},showMsg:function(e,b,c){b=b==0?"success":"error";if(!c){c=5000}var a=$("#msgBox .fn-item")[0].cloneNode(true);$("#msgBox").append(a);$(a).removeAttr("id").addClass(b).removeClass("none");$(".fn-content",a).html(e);setTimeout(function(){$(a).fadeOut("slow",function(){$(a).remove()})},c)},confirm:function(c,b,d){var a=$("#confirmBox .fn-item")[0].cloneNode(true);$(a).remove();$("#confirmBox").append(a);$(a).removeAttr("id").removeClass("none");$(".fn-title",a).html(c);$(".fn-content",a).html(b);$(".fn-ok",a).click(function(){$(a).remove();if($.isFunction(d)){d(true)}return false});$(".fn-close",a).click(function(){$(a).remove();if($.isFunction(d)){d(false)}return false})},sidebar:function(){var b=$(".fn-sidebar-fixed");if(b.length>0){var e=$(window).scrollTop(),d=0;var h=$(window).height();var f=$(".quick-link").height();var k=b.siblings("div").offset().top;if(e<k+f){b.css("margin-top",e>20?20-e:e+"px")}else{b.css("margin-top",20-k+"px");if($("footer").offset().top-e<h){d=$("footer").height()+20+f}}var g=$(".fn-scrollbar",b);for(var j=0;j<g.length;j++){var c=$(g[j]);var a=d+c.offset().top-e;c.height(h-a-30+"px")}}},buildItem:function(f,c,d){var g=(d?d:"song")+c.id;$(f).attr("id",g).data("id",c.id).data("code",c.code||0).removeClass("none");$(f).attr("data-id",c.id);$(f).attr("data-code",c.code||0);$(".fn-link",f).attr("href",c.link).attr("title",c.name+" - "+c.artist);$(".fn-name",f).html(c.name);if(c.video_link){$(".fn-video_link",f).attr("href",c.video_link).attr("title","Xem MV "+c.name+" - "+c.artist)}else{$(".fn-video_link",f).remove()}var b=$(".fn-artist",f);$(".fn-artist_list",f).empty();for(var a in c.artists){var e=b[0].cloneNode(true);$(e).empty().append('<a href="'+c.artists[a].link+'" title="'+(c.artists.length<2?c.artist:c.artists[a].name)+'">'+c.artists[a].name+"</a>");$(".fn-artist_list",f).append(e);if(parseInt(a)<c.artists.length-1){$(".fn-artist_list",f).append("<span>, </span>")}}$(".fn-thumb",f).attr("src",c.thumbnail);if($(".fn-addto",f).length){$(".fn-dlsong",f).data("item","#"+g);$(".fn-addto",f).data("item","#"+g);$(".fn-share",f).data("item","#"+g).attr("href",c.link)}return f},getContentWidth:function(){return $(".wrap-body .wrap-content").width()},followInit:function(){var e=$(".fn-followed");if(e.length>0){var c=[],b=[],d=[];for(var a=0;a<e.length;a++){if($(e[a]).data("id")){c.push($(e[a]).data("id"))}else{if($(e[a]).data("rid")){b.push($(e[a]).data("rid"))}else{if($(e[a]).data("uid")){d.push($(e[a]).data("uid"))}}}}$.get("/json/artist/get-follow",{ids:c.join(","),rids:b.join(","),uids:d.join(",")},function(f){if(f.data){for(var h=0;h<e.length;h++){var j=$(e[h]).data("id")||$(e[h]).data("rid")||$(e[h]).data("uid");var g=f.data[j];if(g>=0){$(e[h]).html(zmp3Number.format(g))}}}});if(MP3.ACCOUNT_ID){$.get("/json/artist/get-artist-followed",function(f){if(f.data){for(var g=0;g<f.data.length;g++){var h=$(".fn-follow[data-id="+f.data[g].id+"]");if(h.length>0){var j=$(".fn-rmitem",h.parent());if(j.length>0){h.addClass("none");j.removeClass("none")}else{h.addClass("active")}}}}})}$(".fn-follow").click(function(){var f=$(this);zmp3Login.show(function(){var g=$(".fn-followed[data-id="+f.data("id")+"]");if(f.hasClass("active")){zmp3SongTool.removeItem(f,function(h){f.removeClass("active");var i=parseInt(g.html());if(i>0){g.html(i-1)}})}else{$.post("/json/post-follow",f.data(),function(h){if(h.data){f.addClass("active");$(".fn-followed[data-id="+f.data("id")+"]").html(h.data.total);var i=$(".fn-rmitem",f.parent());if(i.length>0){f.addClass("none");i.removeClass("none")}else{f.addClass("active")}}})}});return false})}this.ufollowInit()},ufollowInit:function(){var e=$(".fn-ufollowed");if(e.length>0){var c=[],b=[],d=[];for(var a=0;a<e.length;a++){if($(e[a]).data("id")){c.push($(e[a]).data("id"))}}$.get(MP3.MP3_URL+"/json/follow/get-ufollow-num",{ids:c.join(",")},function(f){if(f.data){for(var h=0;h<e.length;h++){var j=$(e[h]).data("id");var g=f.data[j];if(g>=0){$(e[h]).html(g)}}}});if(MP3.ACCOUNT_ID){$.get(MP3.MP3_URL+"/json/mydata/get-ufollow-list",function(f){if(f.data){for(var g=0;g<f.data.length;g++){var h=$(".fn-ufollow[data-id="+f.data[g].id+"]");if(h.length>0){var j=$(".fn-rmitem",h.parent());if(j.length>0){h.addClass("none");j.removeClass("none")}else{h.addClass("active")}}}}})}$(".fn-ufollow").click(function(){var f=$(this);zmp3Login.show(function(){var g=$(".fn-ufollowed[data-id="+f.data("id")+"]");if(f.hasClass("active")){zmp3SongTool.removeItem(f,function(h){f.removeClass("active");var i=parseInt(g.html());if(i>0){g.html(i-1)}})}else{$.post("/json/post-follow",f.data(),function(h){if(h.data){f.addClass("active");$(".fn-ufollowed[data-id="+f.data("id")+"]").html(h.data.total);var i=$(".fn-rmitem",f.parent());if(i.length>0){f.addClass("none");i.removeClass("none")}else{f.addClass("active")}}})}});return false})}},showHide:function(a){if(a.hasClass("none")){a.removeClass("none")}else{a.addClass("none")}},profile:function(a){$.get("/json/user/get-profile",{is_login:a?1:0},function(b){zmp3UI.buildInfo(b,a)},"json")},profileLoginByZalo:function(a){$.get("/json/user/get-profile",{is_login:a?1:0},function(b){zmp3UI.buildZaloInfo(b,a);if(typeof zmp3LogLoginZalo==="object"){zmp3LogLoginZalo.trackLoginZaloSuccess(b)}},"json")},triggerGetCuccessUserInfo:function(){var a;if(document.createEvent){a=document.createEvent("HTMLEvents");a.initEvent("buildUserInfo",true,true)}else{a=document.createEventObject();a.eventType="buildUserInfo"}a.eventName="buildUserInfo";if(document.createEvent){document.dispatchEvent(a)}else{document.fireEvent("on"+a.eventType,a)}},buildInfo:function(c,b){MP3.ACCOUNT_ID=0;if(typeof c.user_zlike_key!=="undefined"){MP3.ZLIKE_KEY=c.user_zlike_key}if(typeof c.user_zlike_token!=="undefined"){MP3.ZLIKE_TOKEN=c.user_zlike_token}if(c.userid||c.zaloid){MP3.ACCOUNT_NAME=c.username;MP3.ACCOUNT_ID=c.userid;MP3.ZALO_ID=c.zaloid;MP3.DISPLAY_NAME=c.name;MP3.ACCOUNT_ID_ENCODED=c.useridencoded;if(typeof MP3==="object"&&typeof MP3.ACCOUNT_ID_ENCODED!=="undefined"){$("a.fn-my-channel").attr("href","/u/"+c.zalousername+"."+MP3.ACCOUNT_ID_ENCODED)}$("#userBox a.fn-profile").attr("href","http://me.zing.vn/u/"+c.username);$("#userBox a.fn-logout").attr("href",c.logout);$(".fn-userbox").removeClass("none");$(".fn-guestbox").remove();$("#loginBox").remove();zmp3UI.bodyMask(0);$("#userBox").append('<i class="fn_zme_info" style="display: none;" data_uid="'+c.userid+'" data-thumb="#userBox .fn-thumb" data-thumbsize="120"></i>');if(c.is_vip){if($.cookie("BANNER_OFF")==null||$.cookie("BANNER_OFF")==""||b){zmp3UI.setBannerOff(true)}MP3.VIP=1;$(".fn-vip").removeClass("none");$(".fn-notvip").addClass("none");if(c.noti_flag){zmp3UI.bodyMask(1);$("#loginNotiBox .fn-dname").html(c.name);$("#loginNotiBox").removeClass("none")}}else{$(".fn-vip").addClass("none");$(".fn-notvip").removeClass("none");MP3.VIP=0}if(c.is_mod){MP3.MOD=1;$(".fn-mod").removeClass("none")}if(c.avatar==""||c.avatar==null){c.avatar="https://s120.avatar.talk.zdn.vn/3/4/e/f/0/120/0ce161a05272bf535d853504dd343258.jpg"}$("#userBox .fn-thumb").attr("src",c.avatar);if(b&&$.isFunction(zmp3Login.succCallback)){zmp3Login.succCallback()}this.triggerGetCuccessUserInfo()}else{this.triggerGetCuccessUserInfo();$(".fn-guestbox").removeClass("none");$(".fn-userbox").addClass("none");$(".fn-vip").addClass("none");$(".fn-notvip").removeClass("none");if(b){setTimeout(function(){location.href=location.href},1000)}else{if(typeof $.cookie("__vngauth")!="undefined"){var a=parseInt($.cookie("__vngauth"));if(!isNaN(a)&&a<2){$.cookie("__vngauth",a+1);location.href="http://id.mp3.zing.vn/zingsession?type=ss&f=3U9FGM10004&cbUrl="+encodeURIComponent(location.href)}}}}$(".fn-useravatar").attr("src",$(".fn-profile .fn-thumb").attr("src"))},buildZaloInfo:function(b,a){MP3.ACCOUNT_ID=0;if(typeof b.user_zlike_key!=="undefined"){MP3.ZLIKE_KEY=b.user_zlike_key}if(typeof b.user_zlike_token!=="undefined"){MP3.ZLIKE_TOKEN=b.user_zlike_token}if(b.userid||b.zaloid){MP3.ACCOUNT_NAME=b.username;MP3.ACCOUNT_ID=b.userid;MP3.ZALO_ID=b.zaloid;MP3.DISPLAY_NAME=b.name;MP3.ACCOUNT_ID_ENCODED=b.useridencoded;$("a.fn-my-channel").attr("href",$("a.fn-my-channel").attr("href")+b.zalousername);$("#userBox a.fn-profile").attr("href","http://me.zing.vn/u/"+b.username);$("#userBox a.fn-logout").attr("href",b.logout);$(".fn-userbox").removeClass("none");$(".fn-guestbox").remove();$("#loginBox").remove();zmp3UI.bodyMask(0);$("#userBox").append('<i class="fn_zme_info" style="display: none;" data_uid="'+b.userid+'" data-thumb="#userBox .fn-thumb" data-thumbsize="120"></i>');if(b.is_vip){if($.cookie("BANNER_OFF")==null||a){zmp3UI.setBannerOff(true)}MP3.VIP=1;$(".fn-vip").removeClass("none");$(".fn-notvip").addClass("none");if(b.noti_flag){zmp3UI.bodyMask(1);$("#loginNotiBox .fn-dname").html(b.name);$("#loginNotiBox").removeClass("none")}}else{zmp3UI.setBannerOff(false,false);$(".fn-vip").addClass("none");$(".fn-notvip").removeClass("none");MP3.VIP=0}if(b.is_mod){MP3.MOD=1;$(".fn-mod").removeClass("none")}if(a&&$.isFunction(zmp3Login.succCallback)){zmp3Login.succCallback()}$(".fn-useravatar").attr("src",$(".fn-profile .fn-thumb").attr("src"))}}};var zmp3Storage={getParam:function(a,b){if(typeof localStorage!=="undefined"&&localStorage.getItem(a)!=null){return localStorage.getItem(a)}return b},setParam:function(b,a){if(typeof localStorage!=="undefined"){return localStorage.setItem(b,a)}return null}};var zmp3Comment={timer:null,delay:0,type:"",id:"",tpl:null,tplRep:null,maximumItemPerPage:20,page:1,sortBy:"hot",dynamic:function(b){var a=$(b).data();$(b).remove();if(a.id&&a.type){this.init(a.id,a.type)}},remove:function(a){$.post(MP3.INTER_URL+"/comment/remove?callback=?",{oid:this.id,cid:a.data("id"),type:this.type},function(b){a.remove();zmp3UI.showMsg(b.note,b.is_error?1:0)},"json")},onChangeCommentSort:function(){$(".fn-com-sort").change(function(){if($(this).val()==="new"){zmp3Comment.sortBy="new"}else{zmp3Comment.sortBy="hot"}$("#commentList .fn-page").remove().children().off();$("#commentList").off();zmp3Comment.page=1;zmp3Comment.load(zmp3Comment.page)})},pagination:function(c){c.removeClass("none");var d=parseInt(0.999+(c.data("total")));var f=parseInt(c.data("page"));var e,a=5;$(".fn-page",c).addClass("none");if(f<d){$(".fn-last",c).removeClass("none").data("page",d);$(".fn-next",c).removeClass("none").data("page",f+1)}else{f=d}if(f>1){a=f>2?f+2:f+3;$(".fn-first",c).removeClass("none").data("page",1);$(".fn-prev",c).removeClass("none").data("page",f-1)}e=f-2;if(d<a){e-=(a-d);a=d}if(e<1){e=1}for(var b=1;b<=5&e<=a;b++,e++){$(".fn-page"+b,c).removeClass("none");if(e==f){$(".fn-page"+b,c).addClass("active").data("page",e).html(e)}else{$(".fn-page"+b,c).removeClass("active").data("page",e).html(e)}}},init:function(b,a){this.id=b;this.type=a;if($(".fn-com-sort").val()==="new"){this.sortBy="new"}this.onChangeCommentSort();tpl=document.getElementById("tplComment").cloneNode(true);tplRep=document.getElementById("tplCommentRep").cloneNode(true);$(tpl).removeClass("none");$("#tplComment").remove();$("#pagination .fn-page").click(function(){if(!$(this).hasClass("active")){zmp3Comment.load($(this).data("page"))}return false});$("#fn-comment-load-more").click(function(){zmp3Comment.page++;zmp3Comment.load(zmp3Comment.page);return false});$("#pagination .fn-page").click(function(){if(!$(this).hasClass("active")){zmp3Comment.load($(this).data("page"))}return false});$(".wrapper-page").on("submit","form.fn-comment",function(){zmp3Comment.add(this);return false});this.load(1);if(MP3.ACCOUNT_ID===""||MP3.ACCOUNT_ID===0){$(".fn-useravatar").attr("src","http://static.mp3.zdn.vn/skins/zmp3-v4.2/images/default2/user_avatar.jpg")}},load:function(b,a){$.getJSON(MP3.MP3_URL+"/json/comment/get-comments-slide",{op:"get",type:this.type,id:this.id.toUpperCase(),page:b,start:(b-1)*zmp3Comment.maximumItemPerPage,length:zmp3Comment.maximumItemPerPage,sortBy:zmp3Comment.sortBy},function(c){$("#commentCounter").html(c.total);if(Number(c.total)>0){$(".fn-com-sort").parent().removeClass("none")}else{$(".frm-comment.fn-comment").css("border-bottom-style","none")}if(c.data){setTimeout(function(){zmp3Comment.build(b,c);if(c.total>b*zmp3Comment.maximumItemPerPage){$("#fn-comment-load-more").removeClass("none")}else{$("#fn-comment-load-more").addClass("none")}},200)}})},build:function(g,a){for(var f in a.data){var b=tpl.cloneNode(true);var k=a.data[f];var d="zmp3"+k.commentId;$("#list-comment-replies",b).addClass("list-comment-replies-"+k.commentId);$(b).attr("id",d).attr("data-userid",k.ownerId);$(b).addClass("fn-page fn-page"+g);$(".fn-content",b).html(k.content);$(".fn-time",b).html(zmp3DateTime.format(k.time));$(".fn-delete",b).data("item","#"+d).click(function(){zmp3Comment.remove($($(this).data("item")));return false});$(".fn-totallike",b).html(k.totalLike);if(k.totalLike==0){$(".fn-totallike",b).addClass("none")}else{$(".fn-totallike",b).removeClass("none")}$(".fn-like",b).attr("id","fn-like-click-"+k.commentId).attr("data-id",k.commentId).attr("data-total-like",k.totalLike).attr("data-total-dlike",k.totalDisLike);if(k.isUpVoted==1){$(".func-comment .fn-up-vote",b).addClass("active");$(".func-comment .fn-down-vote",b).removeClass("active")}$(".fn-totaldislike",b).html(k.totalDisLike);if(k.totalDisLike==0){$(".fn-totaldislike",b).addClass("none")}else{$(".fn-totaldislike",b).removeClass("none")}$(".fn-dlike",b).attr("id","fn-dlike-click-"+k.commentId).attr("data-id",k.commentId).attr("data-total-like",k.totalLike).attr("data-total-dlike",k.totalDisLike);if(k.isDownVoted==1){$(".func-comment .fn-down-vote",b).addClass("active");$(".func-comment .fn-up-vote",b).removeClass("active")}this.voteAction(k.commentId);this.downVoteAction(k.commentId);$(".fn-totalrep",b).html(k.totalReply);$(".fn-reply",b).attr("id","fn-rep-click-"+k.commentId).attr("data-target","#fn-rep-show-box-"+k.commentId).attr("data-id",k.commentId);$("#comment_reply_wrapper",b).attr("id","fn-rep-show-box-"+k.commentId);$("#commentList").on("click","#fn-rep-click-"+k.commentId,function(){$("div[id*='fn-rep-show']").addClass("none");var m=$("div[id*='fn-rep-show']");for(var l=0;l<m.length;l++){if(!$(m[l]).hasClass("none")){$(m[l]).addClass("none")}}var j=$(this).attr("data-target");$(".child-comment").addClass("none");$(j).removeClass("none");var n=$(this).attr("data-id");$("#fn-rep-show-box-"+n+" #comment-info").attr("value",n)});if(typeof a.data[f]!="undefined"&&a.data[f]!=null&&typeof a.data[f].replies!="undefined"&&a.data[f].replies!=null&&typeof a.data[f].replies.length!="undefined"&&a.data[f].replies.length>0){for(var e=0;e<a.data[f].replies.length;e++){var c=tplRep.cloneNode(true);var k=a.data[f].replies[e];$(c).attr("data-userid",k.ownerId).addClass("item-rep-com-"+a.data[f].commentId);$(".fn-reply",c).attr("id","fn-rep-click-"+k.commentId).attr("data-target","#fn-rep-show-box-"+k.commentId).attr("data-id",a.data[f].commentId).addClass("rep-comment-"+a.data[f].commentId);$("#comment_reply_reply_wrapper",c).attr("id","fn-rep-show-box-"+k.commentId);$(".fn-totallike",c).html(k.totalLike);if(k.totalLike==0){$(".fn-totallike",c).addClass("none")}else{$(".fn-totallike",c).removeClass("none")}$(".fn-like",c).attr("id","fn-like-click-"+k.commentId).attr("data-id",k.commentId).attr("data-total-like",k.totalLike).attr("data-total-dlike",k.totalDisLike);if(k.isUpVoted==1){$(".func-comment .fn-up-vote",c).addClass("active");$(".func-comment .fn-down-vote",c).removeClass("active")}$(".fn-totaldislike",c).html(k.totalDisLike);if(k.totalDisLike==0){$(".fn-totaldislike",c).addClass("none")}else{$(".fn-totaldislike",c).removeClass("none")}$(".fn-dlike",c).attr("id","fn-dlike-click-"+k.commentId).attr("data-id",k.commentId).attr("data-total-like",k.totalLike).attr("data-total-dlike",k.totalDisLike);if(k.isDownVoted==1){$(".func-comment .fn-down-vote",c).addClass("active");$(".func-comment .fn-up-vote",c).removeClass("active")}zmp3Comment.voteAction(k.commentId);zmp3Comment.downVoteAction(k.commentId);$(".fn-totalrep",c).html(k.totalReply);$(".fn-content-rep",c).html(k.content);$(".fn-time",c).html(zmp3DateTime.format(k.time));$("#commentList").on("click","#fn-rep-click-"+k.commentId,function(){$("div[id*='fn-rep-show']").addClass("none");var n=$("div[id*='fn-rep-show']");for(var m=0;m<n.length;m++){if(!$(n[m]).hasClass("none")){$(n[m]).addClass("none")}}var j=$(this).attr("data-target");$(".child-comment").addClass("none");$(j).removeClass("none");var o=$(this).attr("data-id");$(j+" #comment-info").attr("value",o);var l=$(this).parent().parent().children(".fn-com-user-name").text();l="<i>@"+l+"</i>: ";$(j+" #comment-reply").attr("value",l)});if(e<=2){$(c).removeClass("none")}$("#list-comment-replies",b).append(c)}if(a.data[f].totalReply>2){$(".view_all_reply",b).html("Xem tất cả "+a.data[f].totalReply+" câu trả lời").removeClass("none").attr("target",a.data[f].commentId);$(b).on("click",".view_all_reply",function(){var i=$(this).attr("target");$(".item-rep-com-"+i).removeClass("none");$(this).addClass("none");$.getJSON(MP3.MP3_URL+"/json/comment/get-replies-slide",{op:"get",type:this.type,commentId:i,start:0,length:10},function(j){if(j.data!==null&&j.data!==""){for(var l=j.data.length-3;l>=0;l--){var m=tplRep.cloneNode(true);var n=j.data[l];$(m).attr("data-userid",n.ownerId).addClass("item-rep-com-"+i);$(".fn-reply",m).attr("id","fn-rep-click-"+n.commentId).attr("data-target","#fn-rep-show-box-"+n.commentId).attr("data-id",i).addClass("rep-comment-"+i);$("#comment_reply_reply_wrapper",m).attr("id","fn-rep-show-box-"+n.commentId);$(".fn-totallike",m).html(n.totalLike);if(n.totalLike==0){$(".fn-totallike",m).addClass("none")}else{$(".fn-totallike",m).removeClass("none")}$(".fn-like",m).attr("id","fn-like-click-"+n.commentId).attr("data-id",n.commentId).attr("data-total-like",n.totalLike).attr("data-total-dlike",n.totalDisLike);if(n.isUpVoted==1){$(".func-comment .fn-up-vote",m).addClass("active")}$(".fn-totaldislike",m).html(n.totalDisLike);if(n.totalDisLike==0){$(".fn-totaldislike",m).addClass("none")}else{$(".fn-totaldislike",m).removeClass("none")}$(".fn-dlike",m).attr("id","fn-dlike-click-"+n.commentId).attr("data-id",n.commentId).attr("data-total-like",n.totalLike).attr("data-total-dlike",n.totalDisLike);if(n.isDownVoted==1){$(".func-comment .fn-down-vote",m).addClass("active")}$(".fn-totaldislike",m).html(n.totalDisLike);zmp3Comment.voteAction(n.commentId);zmp3Comment.downVoteAction(n.commentId);$(".fn-content-rep",m).html(n.content);$(".fn-time",m).html(zmp3DateTime.format(n.time));$(m).removeClass("none");$(".list-comment-replies-"+i).append(m);if(typeof ZCommentWidget!=="undefined"){var o=new ZCommentWidget({userServiceUrl:"http://comment-widget.mp3.zing.vn/users",defaultAvatar:"http://s240.avatar.talk.zdn.vn/3/3/6/c/256/240/b8f79fb21c1e5c70c30796a35dcde1bd.jpg",defaultName:"Zing MP3 User"})}$("#commentList").on("click","#fn-rep-click-"+n.commentId,function(){$("div[id*='fn-rep-show']").addClass("none");var s=$("div[id*='fn-rep-show']");for(var r=0;r<s.length;r++){if(!$(s[r]).hasClass("none")){$(s[r]).addClass("none")}}var p=$(this).attr("data-target");$(".child-comment").addClass("none");$(p).removeClass("none");var u=$(this).attr("data-id");$(p+" #comment-info").attr("value",u);var q=$(this).parent().parent().children(".fn-com-user-name").text();q="<i>@"+q+"</i>: ";$(p+" #comment-reply").attr("value",q);if(typeof ZCommentWidget!=="undefined"){var t=new ZCommentWidget({userServiceUrl:"http://comment-widget.mp3.zing.vn/users",defaultAvatar:"http://s240.avatar.talk.zdn.vn/3/3/6/c/256/240/b8f79fb21c1e5c70c30796a35dcde1bd.jpg",defaultName:"Zing MP3 User"})}$(".fn-useravatar").attr("src",$(".fn-profile .fn-thumb").attr("src"))})}}});return false})}}$("#commentList").append(b)}if(MP3.ACCOUNT_ID===""||MP3.ACCOUNT_ID===0){$(".fn-useravatar").attr("src","http://static.mp3.zdn.vn/skins/zmp3-v4.2/images/default2/user_avatar.jpg")}else{$(".fn-useravatar").attr("src",$(".fn-profile .fn-thumb").attr("src"))}if(a.total>10){if(a.total>200){a.total=200}$("#pagination").data("total",a.total/10).data("page",g);this.pagination($("#pagination"))}if(typeof ZCommentWidget!=="undefined"){var h=new ZCommentWidget({userServiceUrl:"http://comment-widget.mp3.zing.vn/users",defaultAvatar:"http://s240.avatar.talk.zdn.vn/3/3/6/c/256/240/b8f79fb21c1e5c70c30796a35dcde1bd.jpg",defaultName:"Zing MP3 User"})}else{setTimeout(function(){if(typeof ZCommentWidget!=="undefined"){var i=new ZCommentWidget({userServiceUrl:"http://comment-widget.mp3.zing.vn/users",defaultAvatar:"http://s240.avatar.talk.zdn.vn/3/3/6/c/256/240/b8f79fb21c1e5c70c30796a35dcde1bd.jpg"})}else{console.log("Not init ZCommentWidget")}},3000)}},buildReplies:function(a){$.getJSON(MP3.MP3_URL+"/json/comment/get-replies-slide",{op:"get",type:this.type,commentId:a,start:0,length:10},function(b){if(b.data!==null&&b.data!==""){var f=document.getElementById("tplCommentRep").cloneNode(true);var d=f.cloneNode(true);for(var c=b.data.length-3;c>=0;c--){var e=b.data[c];console.log("item: ",e);$(d).attr("data-userid",e.ownerId).addClass("item-rep-com-"+a);$(".fn-reply",d).attr("id","fn-rep-click-"+e.commentId).attr("data-target","#fn-rep-show-box-"+a).attr("data-id",a).addClass("rep-comment-"+a);$(".fn-totallike",d).html(e.totalLike);$(".fn-totalrep",d).html(e.totalReply);$(".fn-content-rep",d).html(e.content);$(".fn-time",d).html(zmp3DateTime.format(e.time));$(d).removeClass("none");var g=tpl.cloneNode(true);$("#list-comment-replies",g).append(d)}}})},voteAction:function(a){$("#commentList").on("click","#fn-like-click-"+a,function(){if(!MP3.ACCOUNT_ID){zmp3Login.show();return false}var e=true;var c="/json/comment/up-vote";if($(this).children(".fn-up-vote.active").length>0){c="/json/comment/un-up-vote";e=false}var b=this;var d=$(this).attr("data-id");$.getJSON(MP3.MP3_URL+c,{commentId:d,},function(g){if(g.data!==null&&g.data!==""&&g.is_error==false){var h=Number($(b).attr("data-total-like"));var f=Number($(b).attr("data-total-dlike"));if(e){h++;$(b).children(".fn-totallike").text(h);$(b).children(".fn-up-vote").addClass("active");if($("#fn-dlike-click-"+d).children(".fn-down-vote.active").length>0){$("#fn-dlike-click-"+d).children(".fn-down-vote").removeClass("active");f--;$("#fn-dlike-click-"+d).children(".fn-totaldislike").text(f)}}else{h--;$(b).children(".fn-totallike").text(h);$(b).children(".fn-up-vote").removeClass("active")}$(b).attr("data-total-like",h);$(b).attr("data-total-dlike",f);$("#fn-dlike-click-"+d).attr("data-total-like",h);$("#fn-dlike-click-"+d).attr("data-total-dlike",f);if(h==0){$(b).children(".fn-totallike").addClass("none")}else{$(b).children(".fn-totallike").removeClass("none")}if(f==0){$("#fn-dlike-click-"+d).children(".fn-totaldislike").addClass("none")}else{$("#fn-dlike-click-"+d).children(".fn-totaldislike").removeClass("none")}}})})},downVoteAction:function(a){$("#commentList").on("click","#fn-dlike-click-"+a,function(){if(!MP3.ACCOUNT_ID){zmp3Login.show();return false}var d=true;var c="/json/comment/down-vote";if($(this).children(".fn-down-vote.active").length>0){c="/json/comment/un-down-vote";d=false}var b=this;var e=$(this).attr("data-id");$.getJSON(MP3.MP3_URL+c,{commentId:e,},function(g){if(g.data!==null&&g.data!==""&&g.is_error==false){var f=Number($(b).attr("data-total-dlike"));var h=Number($(b).attr("data-total-like"));if(d){f++;$(b).children(".fn-totaldislike").text(f);$(b).children(".fn-down-vote").addClass("active");if($("#fn-like-click-"+e).children(".fn-up-vote.active").length>0){$("#fn-like-click-"+e).children(".fn-up-vote").removeClass("active");h--;$("#fn-like-click-"+e).children(".fn-totallike").text(h)}}else{f--;$(b).children(".fn-totaldislike").text(f);$(b).children(".fn-down-vote").removeClass("active")}$(b).attr("data-total-dlike",f);$(b).attr("data-total-like",h);$("#fn-like-click-"+e).attr("data-total-dlike",f);$("#fn-like-click-"+e).attr("data-total-like",h);if(h==0){$("#fn-like-click-"+e).children(".fn-totallike").addClass("none")}else{$("#fn-like-click-"+e).children(".fn-totallike").removeClass("none")}if(f==0){$(b).children(".fn-totaldislike").addClass("none")}else{$(b).children(".fn-totaldislike").removeClass("none")}}})})},add:function(b){if(this.delay>0){return false}if(zmp3Login.show()){var a=b.content.value;a=a.trim();b.content.value=a;if(a===b.content.defaultValue){zmp3UI.showMsg("Bạn cần nhập nội dung bình luận.",1)}else{if(a.length<2){$("#box-comment-error").removeClass("none").html("Nội dung bình luận cần ít nhất 2 ký tự.");setTimeout(function(){$("#box-comment-error").addClass("none")},5000)}else{if(a.length>900){$("#box-comment-error").removeClass("none").html("Nội dung bình luận chỉ cho phép tối đa 900 ký tự.");setTimeout(function(){$("#box-comment-error").addClass("none")},5000)}else{if(!zmp3Comment.loading){zmp3Comment.loading=true;$.post(MP3.MP3_URL+"/json/comment/add-comment",$(b).serialize(),function(c){zmp3Comment.loading=false;if(!c.is_error){if(c.data&&c.data.length>0){zmp3Comment.build(1,c)}b.content.value="";zmp3Comment.countdown(b)}zmp3UI.showMsg(c.msg,c.is_error?1:0)},"json")}}}}}},harsCounter:function(b){var a=b.content.value.length;if(a>0&&b.content.value.charCodeAt(a-1)===32){a--}},countdown:function(a){this.delay=15;$(a).addClass("disabled");$(a.btnSubmit).html("Vui lòng chờ 15 giây");this.timer=setInterval(function(){if(zmp3Comment.delay>0){$(a.btnSubmit).html("Vui lòng chờ "+zmp3Comment.delay+" giây");zmp3Comment.delay--}else{$(a).removeClass("disabled");$(a.btnSubmit).html("Bình luận");clearInterval(zmp3Comment.timer)}},1000)}};var zmp3Toolbar={init:function(){if($(window).width()>1300){var b=$("#toolbar");$(".fn-toolbar",b).click(function(){var c=this;zmp3Login.show(function(){if($(c).hasClass("active")){$("#toolbar .fn-box").addClass("none");$(".fn-toolbar",b).removeClass("active");zmp3UI.bodyMask(0)}else{zmp3UI.bodyMask(1);$(".fn-toolbar",b).removeClass("active");$(c).addClass("active");switch($(c).data("box")){case"playlist":zmp3Toolbar.playlistbox();break;case"fav":zmp3Toolbar.favbox();break;case"his":zmp3Toolbar.hisbox();break;case"follow":zmp3Toolbar.followbox();break}}});return false});$(".fn-box[data-box=fav] .fn-group",b).click(function(){zmp3Toolbar.favbox($(this).data("group"));$(".fn-group",b).removeClass("active");$(this).addClass("active");return false});$(".fn-box[data-box=follow] .fn-group",b).click(function(){zmp3Toolbar.followbox($(this).data("group"));$(".fn-group",b).removeClass("active");$(this).addClass("active");return false});$("#toolbar .fn-box").each(function(){var c=this;onBlurBind(this,function(){var d=$("#toolbar .fn-toolbar[data-box="+$(c).data("box")+"]");if(d.hasClass("active")){d.removeClass("active");zmp3UI.bodyMask(0)}$(c).addClass("none")})});var a=$(".box-scroll",b);if(a.length>0){a.css("max-height",$(window).height()-80+"px");a.mCustomScrollbar({scrollInertia:0,scrollbarPosition:"outside",autoHideScrollbar:true,autoExpandScrollbar:true,mouseWheel:{preventDefault:true}})}}},playlistbox:function(){var b=$("#toolbar");var a=$(".fn-box[data-box=playlist]");zmp3Login.show(function(){var c=$(".fn-list",a);if(!c.data("time")){c.data("time",new Date().getTime());$.get("/json/user/get-playlist",function(d){if(d.data){var e=$(".fn-item",c)[0].cloneNode(true);for(x in d.data){var g=d.data[x];if(g.id.length>2){var f=e.cloneNode(true);$(".fn-name",f).html(g.name);if(g.artist){$(".fn-artist",f).html(g.artist.length>60?"Nhiều nghệ sĩ":g.artist)}$(".fn-link",f).attr("href",MP3.MP3_URL+g.link);$(".fn-edit-link",f).attr("href",g.edit_link);$(".fn-thumb",f).attr("src",MP3.IMG_URL+g.thumb).attr("alt",g.name);if($(".fn-play",f).length>0){$(".fn-play",f).html(g.play)}$(f).removeClass("none");c.append(f)}}$(".fn-total",a).html(d.total)}})}});$(".fn-box",b).addClass("none");a.removeClass("none")},favbox:function(d){if(!d){d="song"}var b=$("#toolbar");var a=$(".fn-box[data-box=fav]",b);var c=$(".fn-list[data-group="+d+"]",a);zmp3Login.show(function(){if(!c.data("time")){c.data("time",new Date().getTime());$.get(MP3.MP3_URL+"/json/mydata/get-fav"+d,function(e){if(e.data){var f=$(".fn-item",c)[0].cloneNode(true);for(x in e.data){var h=e.data[x];if(h.id.length>2){var g=f.cloneNode(true);$(".fn-name",g).html(h.name);if(h.artist){$(".fn-artist",g).html(h.artist.length>60?"Nhiều nghệ sĩ":h.artist)}$(".fn-link",g).attr("href",MP3.MP3_URL+h.link);$(".fn-thumb",g).attr("src",MP3.IMG_URL+h.thumb).attr("alt",h.name);$(g).removeClass("none");c.append(g)}}}})}});$(".fn-list",a).addClass("none");$(".fn-box",b).addClass("none");a.removeClass("none");c.removeClass("none")},followbox:function(d){if(!d){d="artist"}var b=$("#toolbar");var a=$(".fn-box[data-box=follow]",b);var c=$(".fn-list[data-group="+d+"]",a);zmp3Login.show(function(){if(!c.data("time")){c.data("time",new Date().getTime());$.get(MP3.MP3_URL+"/json/mydata/get-follow-list?type="+d,function(e){if(e.data){var f=$(".fn-item",c)[0].cloneNode(true);for(x in e.data){var i=e.data[x];if(i.id.length>2){var g=f.cloneNode(true);var h=d+"follow"+i.id;$(g).attr("id",h);$(".fn-name",g).html(i.name);$(".fn-link",g).attr("href",MP3.MP3_URL+i.link);$(".fn-thumb",g).attr("src",MP3.IMG_URL+i.thumb).attr("alt",i.name);$(".fn-total",g).html(zmp3Number.format(i.total));$(g).data("type",d).data("id",i.id).data("name",i.name);$(".fn-remove",g).data("item","#"+h).click(function(){zmp3SongTool.removeItem($($(this).data("item")));return false});$(g).removeClass("none");c.append(g)}}}})}});$(".fn-list",a).addClass("none");$(".fn-box",b).addClass("none");a.removeClass("none");c.removeClass("none")},hisbox:function(d){if(!d){d="play"}var b=$("#toolbar");var a=$(".fn-box[data-box=his]",b);var c=$(".fn-list[data-group="+d+"]",a);zmp3Login.show(function(){if(!c.data("time")){c.data("time",new Date().getTime());$.get(MP3.MP3_URL+"/json/mydata/get-history",{start:0,length:20},function(e){if(e.data){var f=$(".fn-item",c)[0].cloneNode(true);for(x in e.data){var k=e.data[x];if(k.id.length>2){var i=f.cloneNode(true);var g=k.type;var h="history"+k.id+k.time;$(i).attr("id",h).data(k).data("from","history");$(".fn-name",i).html(k.name);$(".fn-artist",i).html(k.artist.length>60?"Nhiá»u nghá»‡ sÄ©":k.artist);var j=k.artist;$(".fn-"+k.type,i).removeClass("none");switch(k.type){case"video":g="video-clip";break;case"playlist":j=k.username;break;case"song":g="bai-hat";break}$(".fn-link",i).attr("title",k.name+" - "+k.artist).attr("href",MP3.MP3_URL+"/"+g+"/"+k.name.stripViet("-")+"-"+j.stripViet("-")+"/"+k.id+".html");$(".fn-thumb",i).attr("src",MP3.IMG_URL+k.thumb).attr("alt",k.name);$(".fn-remove",i).data("item","#"+h).click(function(){var m=$($(this).data("item"));var l=m.data("order");zmp3SongTool.removeItem(m,function(o){if(o.code<1){var q=c.children(".fn-item");for(var p=0;p<q.length;p++){var n=$(q[p]).data("order");if(l<n){$(q[p]).data("order",n-1)}}}});return false});$(i).removeClass("none");c.append(i)}}}})}});$(".fn-list",a).addClass("none");$(".fn-box",b).addClass("none");a.removeClass("none");c.removeClass("none")}};var zmp3Common={trackPageview:function(a){if(typeof ga!="undefined"){ga("mp3.send","pageview",a)}if(typeof ZA!="undefined"){ZA.trackPageview(a)}},tracking:function(a){if(typeof ga!="undefined"){ga("mp3.send","pageview",a)}},trackingOn:function(c,e,d){if(!e){e=""}var b=c.attr("suglog");var a=c.attr("href");if(a){var f=c.attr("tracking");if(a.search(MP3.MP3_URL)!=-1){a="/"+a.replace(MP3.MP3_URL,"")}if(f){a+="?"+f}zmp3Common.tracking(e+a)}if(b){$.get(MP3.LOG_URL+b);if(!(d&&(d.ctrlKey||d.button>0))){setTimeout(function(){location.href=c.attr("href")},400)}return false}return true},trackingDoneTrack:function(c,d,g,b){try{var a=false;if((typeof ga!="undefined")&&(g.totalTrack>=c)){switch(d){case 0:case 2:if((g.currentTrack==(c-1))&&(g.nextTrack==c)){a=true}break;case 1:case 3:if(g.totalPlayed==(c+1)){a=true}break;default:if(b){console.log("Not mapping any repeat mode.")}break}if(a){ga("mp3.send","event",{eventCategory:"SaleReport",eventAction:"DoneTrack"+c,eventLabel:d})}}else{if(b){console.log("ga <google analytics> is undefined.")}}}catch(f){if(b){console.log(f)}}},trackingShare:function(){$(".fn-track-sharelink",document).click(function(){var c="";var d="";var a=$(this).attr("data-type");if(a==="facebook"){return}var b=$(this).attr("href");if(b==""||typeof b=="undefined"||b=="javascript:zShareNow();"||b=="javascript:void(0)"){b=window.location.href}ga("mp3.send","event",{eventCategory:"ShareZingMP3Desktop",eventAction:"Click-"+a,eventLabel:b})})},trackPageviewFromUrl:function(){if(typeof ga!="undefined"&&window.location.hash!=""){var a=window.location.pathname+window.location.search+window.location.hash;ga("mp3.send","pageview",a);history.replaceState({},document.title,window.location.pathname+window.location.search)}}};zmp3Common.trackPageviewFromUrl();zmp3Common.trackingShare();var zmp3FeedBack={url:MP3.MP3_URL+"/json/feed-back",flVer:"",frm:"",init:function(){$("._feedBackBtn").click(function(a){zmp3FeedBack.displayForm();return false})},displayForm:function(){if(zmp3Login.show(zmp3FeedBack.displayForm)){}},hOk:function(a){},post:function(c,d,b,a){if(zmp3FeedBack.flVer.length<1){zmp3FeedBack.flVer=Browser.getFlashVersion();zmp3FeedBack.post(c,d,b,a)}else{$.post(zmp3FeedBack.url,{subject:c,content:d,link:b,flVer:zmp3FeedBack.flVer,browser:navigator.userAgent},function(e){return a(e)},"json")}}};var zmp3BlockChart={dynamic:function(b){var a=$(b).data();$(b).remove();this.load(a);this.init()},init:function(){$(".fn-chart").click(function(){if(!$(this).hasClass("active")){var a=$(this).data();zmp3BlockChart.load(a)}return false})},load:function(b){var f=b.group?b.group:"_chart_"+b.type;var e=$("#"+f+b.id);$('.fn-chart[data-group="'+b.group+'"]').removeClass("active");var c=$('.fn-chart[data-id="'+b.id+'"]').addClass("active");$("a.fn-detail_link."+f+b.id).attr("href",c.attr("href")).attr("title",c.attr("title"));if($(".fn-item",e).length>0&&$(".fn-item",e).length<4){var a=$(".fn-item",e)[0].cloneNode(true);var d=$(".fn-first",e)[0].cloneNode(true);$(".fn-item",e).remove();$(".fn-first",e).remove();$.getJSON("/json/charts",{op:"get",type:b.type,id:b.id},function(h){if(h.code==0&&h.data.items){for(var k in h.data.items){k=parseInt(k);var n=k===0?d.cloneNode(true):a.cloneNode(true);var l=h.data.items[k];var o="chartitem"+b.type+l.id;$(n).attr("id",o).data("id",l.id).data("code",l.code).data("type",b.type).removeClass("none");var j=$(".fn-artist",n);$(".fn-artist_list",n).empty();for(var g in l.artists){var m=j[0].cloneNode(true);$(m).empty().append('<a href="'+l.artists[g].link+'" title="'+(l.artists.length<2?l.artists:l.artists[g].name)+'">'+l.artists[g].name+"</a>");$(".fn-artist_list",n).append(m);if(parseInt(g)<l.artists.length-1){$(".fn-artist_list",n).append("<span>, </span>")}}$(".fn-order",n).addClass("rank-"+l.order).html(l.order);$(".fn-link",n).attr("href",l.link).attr("title",l.name+" - "+l.artist);$(".fn-name",n).html(l.name);if($(".fn-score",n).length){$(".fn-score",n).html(zmp3Number.format(l.score))}if($(".fn-addto",n).length){$(".fn-dlsong",n).data("item","#"+o);$(".fn-addto",n).data("item","#"+o);$(".fn-share",n).data("item","#"+o).attr("href",MP3.MP3_URL+l.link)}if($(".fn-thumb",n).length){if(k===0){l.thumbnail=h.data.cover}$(".fn-thumb",n).attr("src",l.thumbnail)}$(".fn-list",e).append(n)}$("."+f).addClass("none");$("."+f+b.id).removeClass("none");zmp3SongTool.init();if(h.data.play_link){$("a.fn-play_link."+f+b.id).attr("href",h.data.play_link)}}})}else{$("."+f).addClass("none");$("."+f+b.id).removeClass("none")}}};var loginNoti={closeCb:function(){$.post(MP3.MP3_URL+"/json/mydata/update-noti-flag")}};var zmp3LogCommon={mediaId:"",pageId:"",pageName:"",userName:"",userId:"",zaloId:"",visitorId:"",isVip:"0",constants:{HOME_PAGE_NAME:"home",TOPIC_PAGE_NAME:"chu-de",SONG_PAGE_NAME:"bai-hat",VIDEO_PAGE_NAME:"video-clip",ALBUM_PAGE_NAME:"album",PLAYLIST_PAGE_NAME:"playlist",SEARCH_PAGE_NAME:"tim-kiem"},getMediaId:function(){this.setMediaId();return this.mediaId},setMediaId:function(){if(this.isValidParam(zmp3HTML5)&&this.isValidParam(zmp3HTML5.currentItem)&&this.isValidParam(zmp3HTML5.currentItem.id)){this.mediaId=zmp3HTML5.currentItem.id}else{this.mediaId=""}},getPageId:function(){if(!zmp3LogCommon.isValidParam(this.pageId)){this.setPageId()}return this.pageId},setPageId:function(){var b=window.location.href;var d=b.split("/");if(d.length>=6){var c=d[5];var a=c.substring(0,8);if(zmp3LogCommon.isValidParam(a)){this.pageId=a}}},getPageName:function(){if(!this.isValidParam(this.pageName)){this.setPageName()}return this.pageName},setPageName:function(){try{var a=window.location.href;var d=window.location.origin+"/";if(a===d){this.pageName=zmp3LogCommon.constants.HOME_PAGE_NAME}else{var c=a.split("/");if(zmp3LogCommon.isValidParam(c)){if(c.length>=4){this.pageName=c[3]}if(c.length===4){this.pageName=this.pageName.substring(0,this.pageName.length-5)}}}}catch(b){console.log("Exception at zmp3LogCommon.setPageName: ",b)}},getUsername:function(){if(!this.isValidParam(this.username)){this.setUsername()}return this.username},setUsername:function(){if(this.isValidParam(MP3)&&this.isValidParam(MP3.ACCOUNT_NAME)){this.username=MP3.ACCOUNT_NAME}else{this.username=""}},getUserId:function(){if(!this.isValidParam(this.userId)){this.setUserId()}return this.userId},setUserId:function(){if(this.isValidParam(MP3)&&this.isValidParam(MP3.ACCOUNT_ID)){this.userId=MP3.ACCOUNT_ID}else{this.userId=""}},getZaloId:function(){if(!this.isValidParam(this.zaloId)){this.setZaloId()}return this.zaloId},setZaloId:function(){if(this.isValidParam(MP3)&&this.isValidParam(MP3.ZALO_ID)){this.zaloId=MP3.ZALO_ID}else{this.zaloId=""}},getVisitorId:function(){if(!this.isValidParam(this.visitorId)){this.setVisitorId()}else{return this.visitorId}},setVisitorId:function(){if(typeof ZA==="object"){ZA.getVisitorID(function(a){zmp3LogCommon.visitorId=a;return zmp3LogCommon.getVisitorId()})}},setIsVip:function(){if(typeof MP3!=="undefined"){this.isVip=MP3.VIP==false?"0":"1"}else{this.isVip="0"}},getIsVip:function(){return this.isVip},isValidParam:function(b){if(b===null||typeof b==="undefined"){return false}var a=typeof b;if(a==="string"||a==="array"){return b.length>0}if(a==="number"){return b>0}if(a==="function"||a==="object"&&!!b){return Object.keys(b).length>0}return false},getParameterByName:function(b){var a=window.location.href;b=b.replace(/[\[\]]/g,"\\$&");var d=new RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)"),c=d.exec(a);if(!c){return null}if(!c[2]){return""}return decodeURIComponent(c[2].replace(/\+/g," "))},encode:function(c){if(this.isValidParam(c)){try{c=JSON.stringify(c);c=c.replace(/\+/g,"-");c=c.replace(/\//g,"_");c=c.replace(/\=/g," ");var a="";if(typeof encodeURIComponent!=="undefined"&&typeof encodeURIComponent==="function"){a=window.btoa(unescape(encodeURIComponent(c)))}else{a=window.btoa(c)}return a}catch(b){console.log("Exception at zmp3LogCommon.encode: ",b);return""}}return""},push:function(c,a){if(this.isValidParam(c)&&this.isValidParam(a)){try{if(!this.isValidParam(MP3)||!this.isValidParam(MP3.LOG_URL)){return null}var e=MP3.LOG_URL+"logv2/"+a+"?data="+c+"&ts="+new Date().getTime();var b=new Image();b.src=e}catch(d){console.log("Exception at zmp3LogCommon.push: ",d)}}}};var zmp3LogLoginZalo={constants:{LOG_CATEGORY_LOGIN_ZALO:"log-login-zalo",LOGIN_CLICK:"1",LOGIN_SUCCESS:"2",LOGIN_FAUFT:"3"},trackLoginZaloSuccess:function(b){if(typeof zmp3LogCommon!=="object"){return}if(!zmp3LogCommon.isValidParam(b)){return}var a={};a.username=zmp3LogCommon.getUsername();a.userId=zmp3LogCommon.getUserId();a.zaloId=zmp3LogCommon.getZaloId();zmp3LogCommon.setIsVip();a.isVip=zmp3LogCommon.getIsVip();if(zmp3LogCommon.isValidParam(a.zaloId)){a.loginStatus=this.constants.LOGIN_SUCCESS}else{a.loginStatus=this.constants.LOGIN_FAUFT}if(typeof ZA==="object"){ZA.getVisitorID(function(c){a.visitorId=c;if(!zmp3LogCommon.isValidParam(a.visitorId)){return}var d=zmp3LogCommon.encode(a);zmp3LogCommon.push(d,zmp3LogLoginZalo.constants.LOG_CATEGORY_LOGIN_ZALO)})}},trackLoginZaloClick:function(){if(typeof zmp3LogCommon!=="object"){return}var a={};a.loginStatus=this.constants.LOGIN_CLICK;if(typeof ZA==="object"){ZA.getVisitorID(function(b){a.visitorId=b;if(!zmp3LogCommon.isValidParam(a.visitorId)){return}var c=zmp3LogCommon.encode(a);zmp3LogCommon.push(c,zmp3LogLoginZalo.constants.LOG_CATEGORY_LOGIN_ZALO)})}},listenLoginZaloClick:function(){$("#loginBox").on("click","#fn-login-zalo",function(){zmp3LogLoginZalo.trackLoginZaloClick()})}};if(typeof zmp3LogLoginZalo!=="undefined"&&zmp3LogLoginZalo!==null){try{zmp3LogLoginZalo.listenLoginZaloClick()}catch(ex){console.log("Exception at zmp3LogLoginZalo.listenLoginZaloClick: ",ex)}}var zmp3LogListenTime={isAlbum:"",isOffical:"",listenTime:5,counterListenTime:"",genres:"",artists:"",getIsAlbum:function(){if(!zmp3LogCommon.isValidParam(this.isAlbum)){this.setIsAlbum()}return this.isAlbum},setIsAlbum:function(){var a=false;try{a=$("#html5player").data()["isalbum"];if(a===true){this.isAlbum=1}else{this.isAlbum=0}}catch(b){console.log("Exception at zmp3LogListenTime.setIsAlbum: ",b)}},getIsOffical:function(){if(!zmp3LogCommon.isValidParam(this.isOffical)){this.setIsOffical()}return this.isOffical},setIsOffical:function(){var b=false;try{b=$("#html5player").data()["isoffical"];if(b===true){this.isOffical=1}else{this.isOffical=0}}catch(a){console.log("Exception at zmp3LogListenTime.setIsOffical: ",a)}},getGenres:function(){if(!zmp3LogCommon.isValidParam(this.genres)){this.setGenres()}return this.genres},setGenres:function(){var b="";b=$(".genre-track-log");var a="";try{if(zmp3LogCommon.isValidParam(b)&&b.length>0){for(var d=0;d<b.length;d++){a+=$(b[d]).attr("data-id");if(d<b.length-1){a+=","}}}this.genres=a}catch(c){console.log("Exception at zmp3LogListenTime.setGenres: ",c)}},getArtists:function(){if(!zmp3LogCommon.isValidParam(this.artists)){this.setArtists()}return this.artists},setArtists:function(){var a="";a=$(".artist-track-log");var b="";try{if(zmp3LogCommon.isValidParam(a)&&a.length>0){for(var d=0;d<a.length;d++){b+=$(a[d]).attr("data-id");if(d<a.length-1){b+=","}}}this.artists=b}catch(c){console.log("Exception at zmp3LogListenTime.setArtists: ",c)}},constants:{LOG_CATEGORY_LISTEN_TIME:"log-listen-time",CYCLE_UPDATE_LISTEN_TIME:30000,},getListenTime:function(){this.setListenTime();return this.listenTime},setListenTime:function(){if(zmp3LogCommon.isValidParam(zmp3HTML5)&&zmp3LogCommon.isValidParam(zmp3HTML5.currentTime)){this.listenTime=parseInt(zmp3HTML5.currentTime)}},funcTrackLog:function(){if(zmp3LogCommon.isValidParam(zmp3HTML5)){var a={};a.pageName=zmp3LogCommon.getPageName();if((a.pageName===zmp3LogCommon.constants.ALBUM_PAGE_NAME)||(a.pageName===zmp3LogCommon.constants.PLAYLIST_PAGE_NAME)){a.playlistId=zmp3LogCommon.getPageId();a.isAlbum=zmp3LogListenTime.getIsAlbum();a.isOffical=zmp3LogListenTime.getIsOffical()}a.mediaId=zmp3LogCommon.getMediaId();a.username=zmp3LogCommon.getUsername();a.userId=zmp3LogCommon.getUserId();a.zaloId=zmp3LogCommon.getZaloId();a.genres=this.getGenres();a.artists=this.getArtists();a.listenTime=zmp3LogListenTime.getListenTime();if(typeof ZA==="object"){ZA.getVisitorID(function(b){a.visitorId=b;if(!zmp3LogCommon.isValidParam(a.visitorId)){return}var c=zmp3LogCommon.encode(a);if(zmp3LogCommon.isValidParam(c)){zmp3LogCommon.push(c,zmp3LogListenTime.constants.LOG_CATEGORY_LISTEN_TIME)}})}}},handlingListenTimeLog:function(){try{}catch(a){console.log("Exception at zmp3LogListenTime.handlingListenTimeLog: ",a)}}};var zmp3LogListenFlow={typeMedia:"",isAlbum:"",isOffical:"",genres:"",artists:"",orderInAlbumPlaylist:"",idMediaListenBefore:"",lastTimeListen:"",timeBetweenTwoItem:"",tuser:"",listenTime:5000,listenTimeSongInAlbum:5000,ver:"v42.8.5.7.5",loopMode:[],loopModeSongInAlbum:[],isAutoMedia:0,counterListenTimeMedia:null,counterListenTimeSongInAlbum:null,sParamsMedia:"",constants:{LOG_CATEGORY_LISTEN_FLOW:"log-listen-flow",LOCAL_STORAGE_LISTEN_SONG_BEFORE:"__zmp3lnsongbf",LOCAL_STORAGE_LISTEN_VIDEO_BEFORE:"__zmp3lnvideobf",LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE:"__zmp3lnalbumplaylistbf",TYPE_SONG:1,TYPE_VIDEO:2,TYPE_ALBUM_PLAYLIST:50,CYCLE_TIME_UPDATE_LSTEN_TIME:5000},getTypeMedia:function(){return this.typeMedia},setTypeMedia:function(a){if(zmp3LogCommon.isValidParam(a)){this.typeMedia=a}},getIsAlbum:function(){if(!zmp3LogCommon.isValidParam(this.isAlbum)){this.setIsAlbum()}return this.isAlbum},setIsAlbum:function(){var a=false;try{a=$("#html5player").data()["isalbum"];if(a===true){this.isAlbum=1}else{this.isAlbum=0}}catch(b){console.log("Exception at zmp3LogListenFlow.setIsAlbum: ",b)}},getIsOffical:function(){if(!zmp3LogCommon.isValidParam(this.isOffical)){this.setIsOffical()}return this.isOffical},setIsOffical:function(){var b=false;try{b=$("#html5player").data()["isoffical"];if(b===true){this.isOffical=1}else{this.isOffical=0}}catch(a){console.log("Exception at zmp3LogListenFlow.setIsOffical: ",a)}},getGenres:function(a){this.setGenres(a);return this.genres},setGenres:function(d){try{var c="";var b="";if(d===false){b=$(".genre-track-log");if(zmp3LogCommon.isValidParam(b)&&b.length>0){for(var f=0;f<b.length;f++){c+=$(b[f]).attr("data-id");if(f<b.length-1){c+=","}}}}else{var a=this.getOrderInAlbumPlaylist();if(zmp3LogCommon.isValidParam(a)){var g=$(".genre-track-log-item-"+a);if(g!==null&&g!==""){var c=$(g).attr("data-id");if(typeof c!=="undefined"){c=c.replace("[","").replace("]","").replace(" ","")}}}}this.genres=c}catch(e){console.log("Exception at zmp3LogListenFlow.setGenres: ",e)}},getArtists:function(a){this.setArtists(a);return this.artists},setArtists:function(d){try{var c="";var a="";if(d===false){a=$(".artist-track-log");if(zmp3LogCommon.isValidParam(a)&&a.length>0){for(var f=0;f<a.length;f++){c+=$(a[f]).attr("data-id");if(f<a.length-1){c+=","}}}}else{var b=this.getOrderInAlbumPlaylist();if(zmp3LogCommon.isValidParam(b)){var g=$(".artist-track-log-item-"+b);for(var f=0;f<g.length;f++){c+=$(g[f]).attr("data-id");if(f<g.length-1){c+=","}}}}this.artists=c}catch(e){console.log("Exception at zmp3LogListenFlow.setArtists",e)}},getOrderInAlbumPlaylist:function(){this.setOrderInAlbumPlaylist();return this.orderInAlbumPlaylist},setOrderInAlbumPlaylist:function(){var a=zmp3LogCommon.getParameterByName("st");if(a===null){a="01"}else{if(a.length==1){a="0"+a}}this.orderInAlbumPlaylist=a},getLastTimeListen:function(){return this.lastTimeListen},setLastTimeListen:function(a){if(zmp3LogCommon.isValidParam(a)){this.lastTimeListen=a}},getSparamsMedia:function(){return this.sParamsMedia},setSparamsMedia:function(a){this.sParamsMedia=a},getListenTime:function(){return this.listenTime},setListenTime:function(a){this.listenTime=a},getListenTimeSongInAlbum:function(){return this.listenTimeSongInAlbum},setListenTimeSongInAlbum:function(a){if(zmp3LogCommon.isValidParam(a)){this.listenTimeSongInAlbum=a}},getLoopMode:function(){return this.loopMode.toString()},setLoopMode:function(a){if((this.loopMode.length==0)||(this.loopMode.length>0&&a!=this.loopMode[this.loopMode.length-1])){this.loopMode.push(parseInt(a))}},resetLoopMode:function(){if(this.loopMode.length>=1){this.loopMode=[this.loopMode[this.loopMode.length-1]]}},getVer:function(){return this.ver},getLoopModeSongInAlbum:function(){return this.loopModeSongInAlbum.toString()},setLoopModeSongInAlbum:function(a){if((this.loopModeSongInAlbum.length==0)||(this.loopModeSongInAlbum.length>0&&a!=this.loopModeSongInAlbum[this.loopModeSongInAlbum.length-1])){this.loopModeSongInAlbum.push(parseInt(a))}},resetLoopModeSongInAlbum:function(){if(this.loopModeSongInAlbum.length>=1){this.loopModeSongInAlbum=[this.loopModeSongInAlbum[this.loopModeSongInAlbum.length-1]]}else{this.loopModeSongInAlbum=[]}},getIsAutoMedia:function(){return this.isAutoMedia},setIsAutoMedia:function(a){this.isAutoMedia=a},resetIsAutoMedia:function(){this.isAutoMedia=0},getTimeBetweenTwoItem:function(){this.setTimeBetweenTwoItem();return this.timeBetweenTwoItem},setTimeBetweenTwoItem:function(){var c="";var b=new Date().getTime();var a=this.getLastTimeListen();if(zmp3LogCommon.isValidParam(a)){var c=b-this.getLastTimeListen();if(zmp3LogCommon.isValidParam(c)){this.timeBetweenTwoItem=c}}},getTuser:function(){if(!zmp3LogCommon.isValidParam(this.tuser)){this.setTuser()}return this.tuser},setTuser:function(){function a(e){var d=e+"=";var b=document.cookie.split(";");for(var f=0;f<b.length;f++){var g=b[f];while(g.charAt(0)==" "){g=g.substring(1)}if(g.indexOf(d)==0){return g.substring(d.length,g.length)}}return""}this.tuser=a("tuser")},getIdMediaListenBefore:function(){return this.idMediaListenBefore},setIdMediaListenBefore:function(a){if(zmp3LogCommon.isValidParam(a)){this.idMediaListenBefore=a}},parseLocalData:function(a){if(zmp3LogCommon.isValidParam(a)){listenMediaBfarr=a.split(".");return listenMediaBfarr}},checkLoopSuggestion:function(){try{var c=this.getIdMediaListenBefore();var d=$(".widget-content > ul > li");if(zmp3LogCommon.isValidParam(d)){var b=d[0];idFirstRec=$(b).attr("data-id");if(idFirstRec!==null&&idFirstRec!==""){if(idFirstRec===c){if((this.getTypeMedia()==1&&zmp3LogCommon.getPageName()===zmp3LogCommon.constants.SONG_PAGE_NAME)||(this.getTypeMedia()==2&&zmp3LogCommon.getPageName()===zmp3LogCommon.constants.VIDEO_PAGE_NAME)||(this.getTypeMedia()==50&&(zmp3LogCommon.getPageName()===zmp3LogCommon.constants.ALBUM_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.PLAYLIST_PAGE_NAME))){return true}}}}}catch(a){console.log("Exception at zmp3LogListenFlow.checkLoopSuggestion",a)}return false},removeFirstMediaSuggest:function(){var b=$(".widget-content > ul > li");if(zmp3LogCommon.isValidParam(b)){var a=b[0];$(a).addClass("none")}},updateStorageMedia:function(e,g,a,c,f){if(!c){clearInterval(zmp3LogListenFlow.counterListenTimeMedia)}var b={};var d="";b.ver=zmp3LogListenFlow.getVer();b.username=zmp3LogCommon.getUsername();b.userId=zmp3LogCommon.getUserId();b.zaloId=zmp3LogCommon.getZaloId();zmp3LogCommon.setIsVip();b.isVip=zmp3LogCommon.getIsVip();b.pageName=a;b.genres=this.getGenres(c);b.artists=this.getArtists(c);b.mediaId=g;b.tuser=this.getTuser();b.timeBetweenTwoItem=this.getTimeBetweenTwoItem();b.idMediaListenBefore=this.getIdMediaListenBefore();if(c==true){b.playlistId=zmp3LogCommon.getPageId();b.order=zmp3LogListenFlow.getOrderInAlbumPlaylist();b.isAlbum=zmp3LogListenFlow.getIsAlbum()}b.isAuto=this.getIsAutoMedia();if(typeof ZA==="object"){ZA.getVisitorID(function(h){b.visitorId=h;if(!zmp3LogCommon.isValidParam(b.visitorId)){return}var i=new Date().getTime();b.listenTime=zmp3LogListenFlow.getListenTime();var j=zmp3LogCommon.encode(b);var k="";k=e+"."+b.mediaId;k+="."+i;k+="."+j;k+="."+0;switch(a){case zmp3LogCommon.constants.SONG_PAGE_NAME:d=zmp3LogListenFlow.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE;break;case zmp3LogCommon.constants.VIDEO_PAGE_NAME:d=zmp3LogListenFlow.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE;break;case zmp3LogCommon.constants.ALBUM_PAGE_NAME:case zmp3LogCommon.constants.PLAYLIST_PAGE_NAME:d=zmp3LogListenFlow.constants.LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE;break}if(c){zmp3LogListenFlow.setLocalStorageListenBefore(d,k);clearInterval(zmp3LogListenFlow.counterListenTimeSongInAlbum);zmp3LogListenFlow.setListenTimeSongInAlbum(f);function l(){if(typeof player2==="object"&&player2.isPlaying()){zmp3LogListenFlow.setListenTimeSongInAlbum(parseInt(zmp3LogListenFlow.getListenTimeSongInAlbum())+parseInt(zmp3LogListenFlow.constants.CYCLE_TIME_UPDATE_LSTEN_TIME));b.listenTime=zmp3LogListenFlow.getListenTimeSongInAlbum();b.loopMode=zmp3LogListenFlow.getLoopModeSongInAlbum();j=zmp3LogCommon.encode(b);k="";k=e+"."+b.mediaId;k+="."+i;k+="."+j;k+="."+0;zmp3LogListenFlow.setLocalStorageListenBefore(d,k)}}l();zmp3LogListenFlow.counterListenTimeSongInAlbum=setInterval(function(){l()},zmp3LogListenFlow.constants.CYCLE_TIME_UPDATE_LSTEN_TIME)}else{zmp3LogListenFlow.setLocalStorageListenBefore(d,k);zmp3LogListenFlow.setListenTime(f);function l(){if((typeof player2==="object"&&player2.isPlaying())||(d===zmp3LogListenFlow.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE)){zmp3LogListenFlow.setListenTime(parseInt(zmp3LogListenFlow.getListenTime())+parseInt(zmp3LogListenFlow.constants.CYCLE_TIME_UPDATE_LSTEN_TIME));b.listenTime=zmp3LogListenFlow.getListenTime();b.loopMode=zmp3LogListenFlow.getLoopMode();j=zmp3LogCommon.encode(b);k="";k=e+"."+b.mediaId;k+="."+i;k+="."+j;k+="."+0;zmp3LogListenFlow.setLocalStorageListenBefore(d,k)}}l();zmp3LogListenFlow.counterListenTimeMedia=setInterval(function(){l()},zmp3LogListenFlow.constants.CYCLE_TIME_UPDATE_LSTEN_TIME)}})}},updateIsAutoMedia:function(b,e){var d="";d=this.getLocalStorageListenBefore(b);var c=this.parseLocalData(d);var a="";if(typeof c=="undefined"||c==null||c.length<4){return}a=c[0];a+="."+c[1];a+="."+c[2];a+="."+c[3];a+="."+e;zmp3LogListenFlow.setLocalStorageListenBefore(b,a)},setLocalStorageListenBefore:function(a,b){if(zmp3LogCommon.isValidParam(a)&&zmp3LogCommon.isValidParam(b)){if(typeof localStorage!=="undefined"){localStorage.setItem(a,b)}}},getLocalStorageListenBefore:function(a){var b="";if(typeof localStorage!=="undefined"){switch(a){case this.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE:b=localStorage.getItem(this.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE);break;case this.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE:b=localStorage.getItem(this.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE);break;case this.constants.LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE:b=localStorage.getItem(this.constants.LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE);break}return b}},funcTrackLogMedia:function(g){try{var d="";var a="";if(zmp3LogCommon.getPageName()===zmp3LogCommon.constants.SONG_PAGE_NAME){d=this.constants.TYPE_SONG;a=this.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE}if(zmp3LogCommon.getPageName()===zmp3LogCommon.constants.VIDEO_PAGE_NAME){d=this.constants.TYPE_VIDEO;a=this.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE}if(zmp3LogCommon.getPageName()===zmp3LogCommon.constants.ALBUM_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.PLAYLIST_PAGE_NAME){d=this.constants.TYPE_ALBUM_PLAYLIST;a=this.constants.LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE}var f="";f=this.getLocalStorageListenBefore(a);var e=this.parseLocalData(f);if(typeof e!=="undefined"&&e.length===5){this.setTypeMedia(e[0]);this.setIdMediaListenBefore(e[1]);this.setLastTimeListen(e[2]);this.setSparamsMedia(e[3]);this.setIsAutoMedia(e[4]);zmp3LogCommon.push(zmp3LogListenFlow.getSparamsMedia(),zmp3LogListenFlow.constants.LOG_CATEGORY_LISTEN_FLOW);if(this.checkLoopSuggestion()){this.removeFirstMediaSuggest()}}var b=false;var h=zmp3LogCommon.getPageId();this.updateStorageMedia(d,h,zmp3LogCommon.getPageName(),b,g)}catch(c){console.log("Exception at zmp3LogListenFlow.onProgress",c)}},funcTrackLogSongInAlbumPlaylist:function(d){var c="";c=this.getLocalStorageListenBefore(this.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE);var b=this.parseLocalData(c);if(typeof b!=="undefined"&&b.length===5){this.setTypeMedia(b[0]);this.setIdMediaListenBefore(b[1]);this.setLastTimeListen(b[2]);this.setSparamsMedia(b[3]);this.setIsAutoMedia(b[4]);zmp3LogCommon.push(zmp3LogListenFlow.getSparamsMedia(),zmp3LogListenFlow.constants.LOG_CATEGORY_LISTEN_FLOW);if(this.checkLoopSuggestion()){this.removeFirstMediaSuggest()}}var a=true;this.updateStorageMedia(this.constants.TYPE_SONG,d,zmp3LogCommon.constants.SONG_PAGE_NAME,a,5000)},};var zmp3LogRecommend={order:1,recIds:[],posOfLastItem:0,tuser:"",constants:{LOG_CATEGORY_RECOMMEND:"log-recommend",},getOrder:function(){return this.order},increaseOrder:function(){this.order++},getRecIds:function(){return this.recIds},setRecIds:function(a){if(a!=""){this.recIds.push(a)}},getPosOfLastItem:function(){return this.posOfLastItem},setPosOfLastItem:function(a){if(a>0){this.posOfLastItem=a}},getTuser:function(){if(!zmp3LogCommon.isValidParam(this.tuser)){this.setTuser()}return this.tuser},setTuser:function(){function a(e){var d=e+"=";var b=document.cookie.split(";");for(var f=0;f<b.length;f++){var g=b[f];while(g.charAt(0)==" "){g=g.substring(1)}if(g.indexOf(d)==0){return g.substring(d.length,g.length)}}return""}this.tuser=a("tuser")},genRecIds:function(){var b=$(".widget-content > ul > li");if(typeof b==="object"){var c=this.getPosOfLastItem();for(var a=c;a<b.length;a++){this.setRecIds($(b[a]).attr("data-id"))}this.setPosOfLastItem(b.length)}},reset:function(){this.recIds=[]},handlingRecomendLog:function(){try{var a={};a.order=this.getOrder();a.pageName=zmp3LogCommon.getPageName();a.mediaId=zmp3LogCommon.getPageId();a.username=zmp3LogCommon.getUsername();a.userId=zmp3LogCommon.getUserId();a.zaloId=zmp3LogCommon.getZaloId();zmp3LogCommon.setIsVip();a.isVip=zmp3LogCommon.getIsVip();if(typeof ZA==="object"){ZA.getVisitorID(function(c){a.visitorId=c;if(!zmp3LogCommon.isValidParam(a.visitorId)){return}zmp3LogRecommend.genRecIds();arrRecIds=zmp3LogRecommend.getRecIds();a.recIds=arrRecIds.join();a.tuser=zmp3LogRecommend.getTuser();var d=zmp3LogCommon.encode(a);if(zmp3LogCommon.isValidParam(d)){zmp3LogCommon.push(d,zmp3LogRecommend.constants.LOG_CATEGORY_RECOMMEND)}zmp3LogRecommend.increaseOrder();zmp3LogRecommend.reset()})}}catch(b){console.log("Exception at zmp3LogRecommend.handlingRecomendLog: ",b)}}};if(typeof zmp3LogRecommend!=="undefined"&&zmp3LogRecommend!==null&&typeof zmp3LogRecommend.handlingRecomendLog==="function"){try{if(typeof zmp3LogCommon!=="undefined"&&zmp3LogCommon!==null){if(zmp3LogCommon.getPageName()===zmp3LogCommon.constants.SONG_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.VIDEO_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.ALBUM_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.PLAYLIST_PAGE_NAME){$(function(){zmp3LogRecommend.handlingRecomendLog()})}}}catch(ex){console.log("Exception at zmp3LogRecommend.handlingRecomendLog: ",ex)}}var zmp3LogRef={redirectPageName:"",redirectMediaId:"",order:"",tuser:"",constants:{LOG_CATEGORY_SEACH_SUGGEST_NOT_FOUNND:"log-search-sg-nf",LOG_CATEGORY_REF:"log-ref",SELECT_SESSION_SEARCH_SUGGEST:"#sugSong, #sugAlbum, #sugVideo, #sugArtist",SESSION_NAME_SEARCH_SUGGEST:"search-suggest",SELECT_SESSION_PLAY_RECOMMEND:"#songRec, #videoRec, #playlistRec",SESSION_NAME_SONG_RECOMMEND:"song-recommend",SESSION_NAME_VIDEO_RECOMMEND:"video-recommend",SESSION_NAME_ALBUM_RECOMMEND:"album-recommend",SELECT_SESSION_ALBUM_RELATIVE:"#albumOfArtist",SESSION_NAME_ALBUM_RELATIVE:"album-relative",SELECT_SESSION_VIDEO_RELATIVE:"#videoOfArtist",SESSION_NAME_VIDEO_RELATIVE:"video-relative",SELECT_SESSION_PLAYLIST_COLLECTION:"#albumCollection",SESSION_NAME_PLAYLIST_COLLECTION:"playlist-collect",SELECT_SESSION_PLAYLIST_ITEMS_ICON_REDIRECT:"#playlistItems .direct",SESSION_NAME_PLAYLIST_ITEMS_ICON_REDIRECT:"playlist-items-icon-redirect",SELECT_SESSION_PLAY_ICON_JUMP_MV:"#html5player .zm-jump-mv",SESSION_NAME_PLAY_ICON_JUMP_MV:"icon-jump-mv",SELECT_SESSION_PLAYLIST_ITEMS_ICON_JUMP_MV:"#playlistItems .video",SESSION_NAME_PLAYLIST_ITEMS_ICON_JUMP_MV:"pl-icon-jump-mv",SELECT_SESSION_HOME_SLIDES_BANNER:"#feature",SESSION_NAME_HOME_SLIDES_BANNER:"home-banner",SELECT_SESSION_HOME_ALBUM_HOT:"#albumHot",SESSION_NAME_HOME_ALBUM_HOT:"home-album-hot",SELECT_SESSION_HOME_PLAYLIST_COLLECTION:"#albumCollection",SESSION_NAME_HOME_PLAYLIST_COLLECTION:"home-playlist-collection",SELECT_SESSION_HOME_VIDEO_HOT:"#videohot",SESSION_NAME_HOME_VIDEO_HOT:"home-video-hot",SELECT_SESSION_HOME_VIET_HOT_SONG:"#viet-hot-song",SESSION_NAME_HOME_VIET_HOT_SONG:"home-viet-hot",SELECT_SESSION_HOME_VIET_NEW_SONG:"#viet-new-song",SESSION_NAME_HOME_VIET_NEW_SONG:"home-viet-new",SELECT_SESSION_HOME_CHART_VIET_SONG:"#_chart_songIWZ9Z08I",SESSION_NAME_HOME_CHART_VIET_SONG:"home-chart-viet-song",SELECT_SESSION_HOME_CHART_AUMY_SONG:"#_chart_songIWZ9Z0BW",SESSION_NAME_HOME_CHART_AUMY_SONG:"home-chart-aumy-song",SELECT_SESSION_HOME_CHART_HAN_SONG:"#_chart_songIWZ9Z0BO",SESSION_NAME_HOME_CHART_HAN_SONG:"home-chart-han-song",SELECT_SESSION_HOME_CHART_VIET_SONG_ICON_PLAY_ALL:"._chart_songIWZ9Z08I.icon-play-all",SESSION_NAME_HOME_CHART_VIET_SONG_ICON_PLAY_ALL:"home-chart-viet-song-icon-play-all",SELECT_SESSION_HOME_CHART_AUMY_SONG_ICON_PLAY_ALL:"._chart_songIWZ9Z0BW.icon-play-all",SESSION_NAME_HOME_CHART_AUMY_SONG_ICON_PLAY_ALL:"home-chart-aumy-song-icon-play-all",SELECT_SESSION_HOME_CHART_HAN_SONG_ICON_PLAY_ALL:"._chart_songIWZ9Z0BO.icon-play-all",SESSION_NAME_HOME_CHART_HAN_SONG_ICON_PLAY_ALL:"home-chart-han-song-icon-play-all",SELECT_SESSION_HOME_CHART_VIET_VIDEO:"#_chart_videoIWZ9Z08W",SESSION_NAME_HOME_CHART_VIET_VIDEO:"home-chart-viet-video",SELECT_SESSION_HOME_CHART_AUMY_VIDEO:"#_chart_videoIWZ9Z0BU",SESSION_NAME_HOME_CHART_AUMY_VIDEO:"home-chart-aumy-video",SELECT_SESSION_HOME_CHART_HAN_VIDEO:"#_chart_videoIWZ9Z0BZ",SESSION_NAME_HOME_CHART_HAN_VIDEO:"home-chart-han-video",SELECT_SESSION_HOME_CHART_VIET_VIDEO_ICON_PLAY_ALL:"._chart_videoIWZ9Z08W.icon-play-all",SESSION_NAME_HOME_CHART_VIET_VIDEO_ICON_PLAY_ALL:"home-chart-viet-video-icon-play-all",SELECT_SESSION_HOME_CHART_AUMY_VIDEO_ICON_PLAY_ALL:"._chart_videoIWZ9Z0BU.icon-play-all",SESSION_NAME_HOME_CHART_AUMY_VIDEO_ICON_PLAY_ALL:"home-chart-aumy-video-icon-play-all",SELECT_SESSION_HOME_CHART_HAN_VIDEO_ICON_PLAY_ALL:"._chart_videoIWZ9Z0BZ.icon-play-all",SESSION_NAME_HOME_CHART_HAN_VIDEO_ICON_PLAY_ALL:"home-chart-han-video-icon-play-all",SELECT_SESSION_HOME_CHART_VIET_ALBUM:"#_chart_albumIWZ9Z08O",SESSION_NAME_HOME_CHART_VIET_ALBUM:"home-chart-viet-album",SELECT_SESSION_HOME_CHART_AUMY_ALBUM:"#_chart_albumIWZ9Z0B6",SESSION_NAME_HOME_CHART_AUMY_ALBUM:"home-chart-aumy-album",SELECT_SESSION_HOME_CHART_HAN_ALBUM:"#_chart_albumIWZ9Z0B7",SESSION_NAME_HOME_CHART_HAN_ALBUM:"home-chart-han-album",SELECT_SESSION_TOPIC_COLLECTION:".page-hottopic",SESSION_NAME_TOPIC_DETAILT_COLLECTION:"topic-detail-collection",SESSION_NAME_TOPIC_PLAYLIST_COLLECTION:"topic-playlist-collection",SESSION_NAME_TOPIC_VIDEO_COLLECTION:"topic-video-collection",SELECT_SESSION_SEARCH_SONG:"#song-search-rs",SESSION_NAME_SEARCH_SONG_SONG:"search-song",SELECT_SESSION_SEARCH_VIDEO:"#video-search-rs",SESSION_NAME_SEARCH_VIDEO:"search-video",SELECT_SESSION_SEARCH_ALBUM:"#playlist-search-rs",SESSION_NAME_SEARCH_ALBUM:"topic-album",},getRedirectPageName:function(){return this.redirectPageName},setRedirectPageName:function(a){this.redirectPageName=a},getRedirectMediaId:function(){return this.redirectMediaId},setRedirectMediaId:function(a){this.redirectMediaId=a},getOrder:function(){return this.order},setOrder:function(e,d){if(zmp3LogCommon.isValidParam(e)){var b=e.split("_");if(b.length>0){var a=b[b.length-1];try{if($.isNumeric(a)){this.order=a}}catch(c){console.log("Exception at zmp3LogRef.setOrder")}}}else{if(zmp3LogCommon.isValidParam(d)){try{if($.isNumeric(d)){this.order=d}}catch(c){console.log("Exception at zmp3LogRef.setOrder")}}}},getTuser:function(){if(!zmp3LogCommon.isValidParam(this.tuser)){this.setTuser()}return this.tuser},setTuser:function(){function a(e){var d=e+"=";var b=document.cookie.split(";");for(var f=0;f<b.length;f++){var g=b[f];while(g.charAt(0)==" "){g=g.substring(1)}if(g.indexOf(d)==0){return g.substring(d.length,g.length)}}return""}this.tuser=a("tuser")},setRedirectParams:function(c){var e=c.split("/");if(e.length===6){var a=e[3];if(zmp3LogCommon.isValidParam(a)){this.setRedirectPageName(a)}var d=e[5];var b=d.substring(0,8);if(zmp3LogCommon.isValidParam(b)){this.setRedirectMediaId(b)}}else{if(e.length===4){var a=e[1];if(zmp3LogCommon.isValidParam(a)){this.setRedirectPageName(a)}var d=e[3];var b=d.substring(0,8);if(zmp3LogCommon.isValidParam(b)){this.setRedirectMediaId(b)}}else{if(e.length===5){var a=e[3];if(zmp3LogCommon.isValidParam(a)){this.setRedirectPageName(a)}}}}},checkTypeRedirect:function(b){var a=0;if(zmp3LogCommon.isValidParam(b)){switch(b.which){case 1:if(b.ctrlKey){a=2}else{a=1}break;case 2:a=2;break;case 3:a=0;break;default:a=1}}return a},handlingRedirect:function(a,c){try{if(c===1){window.location=a}if(c===2){window.open(a,"_blank")}}catch(b){console.log("Exception at zmp3LogRef.handlingRedirect",b)}},getJsonFromUrl:function(){var b=location.search.substr(1);var a={};b.split("&").forEach(function(c){var d=c.split("=");a[d[0]]=decodeURIComponent(d[1])});return a},commonEventListener:function(d,c,b,a){if(zmp3LogCommon.isValidParam(d)&&zmp3LogCommon.isValidParam(b)){$(d).on("click",c,function(k){try{var o=0;if(zmp3LogCommon.isValidParam(this.target)&&this.target==="_blank"){o=2}else{o=zmp3LogRef.checkTypeRedirect(k)}if(o!==0){if(zmp3LogCommon.isValidParam(this.href)){var f=this.href;if(zmp3LogCommon.isValidParam(f)){k.preventDefault();a=a||{};if(zmp3LogCommon.isValidParam(f)){zmp3LogRef.setRedirectParams(f);a.mediaId=zmp3LogRef.getRedirectMediaId();if(!zmp3LogCommon.isValidParam(a.mediaId)){return null}a.pageName=zmp3LogRef.getRedirectPageName();a.username=zmp3LogCommon.getUsername();a.userId=zmp3LogCommon.getUserId();a.zaloId=zmp3LogCommon.getZaloId();zmp3LogCommon.setIsVip();a.isVip=zmp3LogCommon.getIsVip();if(typeof ZA==="object"){ZA.getVisitorID(function(e){a.visitorId=e});if(!zmp3LogCommon.isValidParam(a.visitorId)){return}a.fromPage=zmp3LogCommon.getPageName();a.fromSession=b;a.fromMediaId=zmp3LogCommon.getPageId();var g=$(this).attr("tracking");var m=$(this).attr("order");if(zmp3LogCommon.isValidParam(g)||zmp3LogCommon.isValidParam(m)){zmp3LogRef.setOrder(g,m);if(zmp3LogCommon.isValidParam(zmp3LogRef.getOrder())){a.order=zmp3LogRef.getOrder()}}if(!zmp3LogCommon.isValidParam(a.order)){var n=$("li#songrec"+a.mediaId).index();if(n>0){a.order=n}}if(!zmp3LogCommon.isValidParam(a.order)){var j=$("li#videorec"+a.mediaId).index();if(j>0){a.order=j}}if(!zmp3LogCommon.isValidParam(a.order)){var i=$("li#playlistrec"+a.mediaId).index();if(i>0){a.order=i}}if(zmp3LogCommon.isValidParam($("#sug form input").val())){a.fromKeySearch=$("#sug form input").val()}a.tuser=zmp3LogRef.getTuser();var h=zmp3LogCommon.encode(a);if(zmp3LogCommon.isValidParam(h)){zmp3LogCommon.push(h,zmp3LogRef.constants.LOG_CATEGORY_REF)}}}}}}}catch(l){console.log("Exception at zmp3LogRef.commonHandlingEvent",l)}finally{if(zmp3LogCommon.isValidParam(this.href)&&zmp3LogCommon.isValidParam(o)){zmp3LogRef.handlingRedirect(this.href,o)}}})}},checkLocalStorageSearchSuggest:function(){try{if(typeof localStorage!=="undefined"){var e=localStorage.getItem("__zmp3seachsugnf");if(e!==null&&e!==""){if(MP3.MEDIAID===null||MP3.MEDIAID==="undefined"||MP3.MEDIAID===""){var b={};var a=e.split(".");if(a!==null&&a.length===3){b.fromKeySearch=a[0];b.mediaId=a[1];b.pageName=a[2];var d=zmp3LogCommon.encode(b);if(zmp3LogCommon.isValidParam(d)){zmp3LogCommon.push(d,zmp3LogRef.constants.LOG_CATEGORY_SEACH_SUGGEST_NOT_FOUNND)}}}}window.localStorage.removeItem("__zmp3seachsugnf")}}catch(c){console.log("Exception at zmp3LogRef.checkLocalStorageSearchSuggest",c)}},setLocalStorageSearchSuggest:function(a){try{if(zmp3LogCommon.isValidParam(a)&&zmp3LogCommon.isValidParam(a.fromKeySearch)&&zmp3LogCommon.isValidParam(a.mediaId)&&zmp3LogCommon.isValidParam(a.pageName)){var c="";c=a.fromKeySearch+"."+a.mediaId+"."+a.pageName;if(typeof localStorage!=="undefined"){localStorage.setItem("__zmp3seachsugnf",c)}}}catch(b){console.log("Exception at zmp3LogRef.setLocalStorageSearchSuggest",b)}},eventListenerSearchSuggest:function(d,c,b,a){if(zmp3LogCommon.isValidParam(d)&&zmp3LogCommon.isValidParam(b)){$(d).on("click",c,function(j){try{var n=0;if(zmp3LogCommon.isValidParam(this.target)&&this.target==="_blank"){n=2}else{n=zmp3LogRef.checkTypeRedirect(j)}if(n!==0){if(zmp3LogCommon.isValidParam(this.href)){var f=this.href;if(zmp3LogCommon.isValidParam(f)){j.preventDefault();a=a||{};if(zmp3LogCommon.isValidParam(f)){zmp3LogRef.setRedirectParams(f);if(zmp3LogRef.getRedirectMediaId()===""){if(typeof $(this).data()!=="undefined"&&$(this).data().id!=="undefined"){zmp3LogRef.setRedirectMediaId($(this).data().id)}}a.mediaId=zmp3LogRef.getRedirectMediaId();if(!zmp3LogCommon.isValidParam(a.mediaId)){return null}a.pageName=zmp3LogRef.getRedirectPageName();a.username=zmp3LogCommon.getUsername();a.userId=zmp3LogCommon.getUserId();a.zaloId=zmp3LogCommon.getZaloId();zmp3LogCommon.setIsVip();a.isVip=zmp3LogCommon.getIsVip();a.fromPage=zmp3LogCommon.getPageName();a.fromSession=b;a.fromMediaId=zmp3LogCommon.getPageId();var g=$(this).attr("tracking");var l=$(this).attr("order");if(zmp3LogCommon.isValidParam(g)||zmp3LogCommon.isValidParam(l)){zmp3LogRef.setOrder(g,l);if(zmp3LogCommon.isValidParam(zmp3LogRef.getOrder())){a.order=zmp3LogRef.getOrder()}}if(!zmp3LogCommon.isValidParam(a.order)){var m=$("li#songrec"+a.mediaId).index();if(m>0){a.order=m}}if(!zmp3LogCommon.isValidParam(a.order)){var i=$("li#videorec"+a.mediaId).index();if(i>0){a.order=i}}if(!zmp3LogCommon.isValidParam(a.order)){var h=$("li#playlistrec"+a.mediaId).index();if(h>0){a.order=h}}if(zmp3LogCommon.isValidParam($("#sug form input").val())){a.fromKeySearch=$("#sug form input").val()}if(typeof ZA==="object"){ZA.getVisitorID(function(e){a.visitorId=e;if(!zmp3LogCommon.isValidParam(a.visitorId)){return}zmp3LogRef.setLocalStorageSearchSuggest(a);var o=zmp3LogCommon.encode(a);if(zmp3LogCommon.isValidParam(o)){zmp3LogCommon.push(o,zmp3LogRef.constants.LOG_CATEGORY_REF)}})}}}}}}catch(k){console.log("Exception at zmp3LogRef.commonHandlingEvent",k)}finally{if(zmp3LogCommon.isValidParam(this.href)&&zmp3LogCommon.isValidParam(n)){zmp3LogRef.handlingRedirect(this.href,n)}}})}},eventSessionSearchSuggest:function(){var j=0;var b="";try{var a=this.constants.SELECT_SESSION_SEARCH_SUGGEST,d="a.track-log",c=zmp3LogRef.constants.SESSION_NAME_SEARCH_SUGGEST;var i={};i.fromKeySearch=$("#sug form input").val();this.eventListenerSearchSuggest(a,d,c,i);var g=$("#sug");var f=$(".fn-result",g);$('input[name="q"]',g).keydown(function(l){var k=$(".fn-list .fn-item.active",f);if(k.length>0){if(l.keyCode===13){j=1;b=$(".fn-link",k).attr("href");h(b);if(zmp3LogCommon.isValidParam(b)){zmp3LogRef.handlingRedirect(b,j)}}}})}catch(e){console.log("Exception at zmp3LogRef.listenSessionRecommend: ",e)}function h(l){if(!zmp3LogCommon.isValidParam(l)){return null}var k={};zmp3LogRef.setRedirectParams(l);k.mediaId=zmp3LogRef.getRedirectMediaId();if(!zmp3LogCommon.isValidParam(k.mediaId)){return null}k.pageName=zmp3LogRef.getRedirectPageName();k.username=zmp3LogCommon.getUsername();k.userId=zmp3LogCommon.getUserId();k.zaloId=zmp3LogCommon.getZaloId();zmp3LogCommon.setIsVip();k.isVip=zmp3LogCommon.getIsVip();k.fromPage=zmp3LogCommon.getPageName();k.fromSession=zmp3LogRef.constants.SESSION_NAME_SEARCH_SUGGEST;k.fromMediaId=zmp3LogCommon.getPageId();k.fromKeySearch=$("#sug form input").val();if(typeof ZA==="object"){ZA.getVisitorID(function(m){k.visitorId=m;if(!zmp3LogCommon.isValidParam(k.visitorId)){return}zmp3LogRef.setLocalStorageSearchSuggest(k);var n=zmp3LogCommon.encode(k);if(zmp3LogCommon.isValidParam(n)){zmp3LogCommon.push(n,zmp3LogRef.constants.LOG_CATEGORY_REF)}})}}},eventSessionRecommend:function(){try{var e=this.constants.SELECT_SESSION_PLAY_RECOMMEND,d="a.track-log",b="";var a=zmp3LogCommon.getPageName();if(zmp3LogCommon.isValidParam(a)){if(a===zmp3LogCommon.constants.SONG_PAGE_NAME){b=zmp3LogRef.constants.SESSION_NAME_SONG_RECOMMEND}if(a===zmp3LogCommon.constants.VIDEO_PAGE_NAME){b=zmp3LogRef.constants.SESSION_NAME_VIDEO_RECOMMEND}if(a===zmp3LogCommon.constants.ALBUM_PAGE_NAME){b=zmp3LogRef.constants.SESSION_NAME_ALBUM_RECOMMEND}}this.commonEventListener(e,d,b,"")}catch(c){console.log("Exception at zmp3LogRef.eventSessionRecommend",c)}},eventSessionPlaylistItems:function(){try{var d=this.constants.SELECT_SESSION_PLAYLIST_ITEMS_ICON_REDIRECT,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_PLAYLIST_ITEMS_ICON_REDIRECT;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionRecommend",b)}},eventSessionAlbumRelative:function(){try{var d=this.constants.SELECT_SESSION_ALBUM_RELATIVE,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_ALBUM_RELATIVE;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionAlbumRelative",b)}},eventSessionVideoRelative:function(){try{var d=this.constants.SELECT_SESSION_VIDEO_RELATIVE,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_VIDEO_RELATIVE;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionVideoRelative",b)}},eventSessionPlaylistCollection:function(){try{var d=this.constants.SELECT_SESSION_PLAYLIST_COLLECTION,c="a",a=zmp3LogRef.constants.SESSION_NAME_PLAYLIST_COLLECTION;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionPlaylistCollection",b)}},eventSessionJumpMV:function(){try{var d=this.constants.SELECT_SESSION_PLAY_ICON_JUMP_MV,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_PLAY_ICON_JUMP_MV;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionJumpMV",b)}},eventSessionJumpMVInPlaylistItems:function(){try{var d=this.constants.SELECT_SESSION_PLAYLIST_ITEMS_ICON_JUMP_MV,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_PLAYLIST_ITEMS_ICON_JUMP_MV;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionJumpMVInPlaylistItems",b)}},eventSessionHomeSlideBanner:function(){try{var d=this.constants.SELECT_SESSION_HOME_SLIDES_BANNER,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_SLIDES_BANNER;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomeSlideBanner",b)}},eventSessionHomeAlbumHot:function(){try{var d=this.constants.SELECT_SESSION_HOME_ALBUM_HOT,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_ALBUM_HOT;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomeAlbumHot",b)}},eventSessionHomePlaylistCollection:function(){try{var d=this.constants.SELECT_SESSION_HOME_PLAYLIST_COLLECTION,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_PLAYLIST_COLLECTION;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomePlaylistCollection",b)}},eventSessionHomeVideoHot:function(){try{var d=this.constants.SELECT_SESSION_HOME_VIDEO_HOT,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_VIDEO_HOT;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomeVideoHot",b)}},eventSessionHomeVietHotSong:function(){try{var d=this.constants.SELECT_SESSION_HOME_VIET_HOT_SONG,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_VIET_HOT_SONG;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomeVietHotSong",b)}},eventSessionHomeVietNewSong:function(){try{var d=this.constants.SELECT_SESSION_HOME_VIET_NEW_SONG,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_VIET_NEW_SONG;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomeVietNewSong",b)}},eventSessionHomeChartSong:function(){try{var d=this.constants.SELECT_SESSION_HOME_CHART_VIET_SONG,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_SONG;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_AUMY_SONG,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_SONG;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_HAN_SONG,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_SONG;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_VIET_SONG_ICON_PLAY_ALL,c="",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_SONG_ICON_PLAY_ALL;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_AUMY_SONG_ICON_PLAY_ALL,c="",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_SONG_ICON_PLAY_ALL;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_HAN_SONG_ICON_PLAY_ALL,c="",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_SONG_ICON_PLAY_ALL;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomeChartSong",b)}},eventSessionHomeChartVideo:function(){try{var d=this.constants.SELECT_SESSION_HOME_CHART_VIET_VIDEO,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_VIDEO;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_AUMY_VIDEO,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_VIDEO;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_HAN_VIDEO,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_VIDEO;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_VIET_VIDEO_ICON_PLAY_ALL,c="",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_VIDEO_ICON_PLAY_ALL;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_AUMY_VIDEO_ICON_PLAY_ALL,c="",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_VIDEO_ICON_PLAY_ALL;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_HAN_VIDEO_ICON_PLAY_ALL,c="",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_VIDEO_ICON_PLAY_ALL;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomeChartVideo",b)}},eventSessionHomeChartAlbum:function(){try{var d=this.constants.SELECT_SESSION_HOME_CHART_VIET_ALBUM,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_ALBUM;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_AUMY_ALBUM,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_ALBUM;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_HOME_CHART_HAN_ALBUM,c="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_ALBUM;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionHomeChartAlbum",b)}},eventSessionTopic:function(){try{var e=this.constants.SELECT_SESSION_TOPIC_COLLECTION,d="a.track-log",b="";var a=this.getJsonFromUrl();if(zmp3LogCommon.isValidParam(a)&&zmp3LogCommon.isValidParam(a.view)){if(a.view==="playlist"){b=this.constants.SESSION_NAME_TOPIC_PLAYLIST_COLLECTION}else{if(a.view==="video"){b=this.constants.SESSION_NAME_TOPIC_VIDEO_COLLECTION}}}else{b=this.constants.SESSION_NAME_TOPIC_DETAILT_COLLECTION}this.commonEventListener(e,d,b,"")}catch(c){console.log("Exception at zmp3LogRef.eventSessionTopic",c)}},eventSessionSearchPage:function(){try{var d=this.constants.SELECT_SESSION_SEARCH_SONG,c="a.track-log",a=this.constants.SESSION_NAME_SEARCH_SONG_SONG;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_SEARCH_VIDEO,c="a.track-log",a=this.constants.SESSION_NAME_SEARCH_VIDEO;this.commonEventListener(d,c,a,"");var d=this.constants.SELECT_SESSION_SEARCH_ALBUM,c="a.track-log",a=this.constants.SESSION_NAME_SEARCH_ALBUM;this.commonEventListener(d,c,a,"")}catch(b){console.log("Exception at zmp3LogRef.eventSessionSearchPage",b)}},handlingRefLog:function(){try{switch(zmp3LogCommon.getPageName()){case zmp3LogCommon.constants.HOME_PAGE_NAME:this.eventSessionHomeSlideBanner();this.eventSessionHomeAlbumHot();this.eventSessionHomePlaylistCollection();this.eventSessionHomeVideoHot();this.eventSessionHomeVietHotSong();this.eventSessionHomeVietNewSong();this.eventSessionHomeChartSong();this.eventSessionHomeChartVideo();this.eventSessionHomeChartAlbum();break;case zmp3LogCommon.constants.SONG_PAGE_NAME:this.eventSessionRecommend();this.eventSessionAlbumRelative();this.eventSessionVideoRelative();this.eventSessionPlaylistCollection();this.eventSessionJumpMV();break;case zmp3LogCommon.constants.VIDEO_PAGE_NAME:this.eventSessionRecommend();this.eventSessionAlbumRelative();this.eventSessionVideoRelative();break;case zmp3LogCommon.constants.ALBUM_PAGE_NAME:case zmp3LogCommon.constants.PLAYLIST_PAGE_NAME:this.eventSessionRecommend();this.eventSessionAlbumRelative();this.eventSessionVideoRelative();this.eventSessionPlaylistCollection();this.eventSessionPlaylistItems();this.eventSessionJumpMV();this.eventSessionJumpMVInPlaylistItems();break;case zmp3LogCommon.constants.TOPIC_PAGE_NAME:this.eventSessionTopic();break;case zmp3LogCommon.constants.SEARCH_PAGE_NAME:this.eventSessionSearchPage();break;default:break}this.eventSessionSearchSuggest();this.checkLocalStorageSearchSuggest()}catch(a){console.log("Exception at zmp3LogRef.handlingRefLog: ",a)}}};if(typeof zmp3LogRef!=="undefined"&&zmp3LogRef!==null&&typeof zmp3LogRef.handlingRefLog==="function"){try{$(function(){zmp3LogRef.handlingRefLog()})}catch(ex){console.log("Exception at zmp3LogRef.handlingRefLog: ",ex)}}var zmp3LogSearch={constants:{LOG_CATEGORY_SEARCH:"log-search",LOG_ACTION_ID_PARAMS:"params"},parseSearchParamsObjectFromURL:function(){try{var f={};var e="q",h="t",b="sort",l="upload",c="filter",t="genre";var n=window.location.search;if(typeof decodeURIComponent!=="undefined"&&typeof decodeURIComponent==="function"){n=decodeURIComponent(n)}if(zmp3LogCommon.isValidParam(n)){n=n.substring(1,n.length);var k=n.split("&");var o=[],p=[],g=[],j=[],a=[],d=[];for(var q=0;q<k.length;q++){var s=k[q].split("=");if(zmp3LogCommon.isValidParam(s)&&zmp3LogCommon.isValidParam(s[0])&&zmp3LogCommon.isValidParam(s[1])){var u=s[0];var m=s[1];if(zmp3LogCommon.isValidParam(m)){switch(u){case e:o.push(m);break;case h:p.push(m);break;case b:g.push(m);break;case l:j.push(m);break;case c:a.push(m);break;case t:d.push(m);break}}}}if(zmp3LogCommon.isValidParam(o)){f[e]=o}if(zmp3LogCommon.isValidParam(p)){f[h]=p}if(zmp3LogCommon.isValidParam(g)){f[b]=g}if(zmp3LogCommon.isValidParam(j)){f[l]=j}if(zmp3LogCommon.isValidParam(a)){f[c]=a}if(zmp3LogCommon.isValidParam(d)){f[t]=d}return f}}catch(r){console.log("Exception at zmp3LogSearch.parseSearchParamsObjectFromURL: ",r)}},handlingParamsSearchLog:function(){try{if(zmp3LogCommon.getPageName()!=="tim-kiem"){return null}urlParams=window.location.search.substring(1);if(!zmp3LogCommon.isValidParam(urlParams)){return null}var d=this.parseSearchParamsObjectFromURL();if(zmp3LogCommon.isValidParam(d)){var a={};a.pageName=zmp3LogCommon.getPageName();a.username=zmp3LogCommon.getUsername();a.userId=zmp3LogCommon.getUserId();a.zaloId=zmp3LogCommon.getZaloId();zmp3LogCommon.setIsVip();a.isVip=zmp3LogCommon.getIsVip();for(var c in d){if(zmp3LogCommon.isValidParam(c)){if(d.hasOwnProperty(c)){if(zmp3LogCommon.isValidParam(d[c])&&d[c]!=="undefined"){a[c]=d[c]}}}}if(typeof ZA==="object"){ZA.getVisitorID(function(e){a.visitorId=e;if(!zmp3LogCommon.isValidParam(a.visitorId)){return}var f=zmp3LogCommon.encode(a);if(zmp3LogCommon.isValidParam(f)){var g=zmp3LogSearch.constants.LOG_CATEGORY_SEARCH+"/"+zmp3LogSearch.constants.LOG_ACTION_ID_PARAMS;zmp3LogCommon.push(f,g)}})}}}catch(b){console.log("Exception at zmp3LogSearch.handlingRefLog: ",b)}}};if(typeof zmp3LogSearch!=="undefined"&&zmp3LogSearch!==null&&typeof zmp3LogSearch.handlingParamsSearchLog==="function"){try{$(function(){zmp3LogSearch.handlingParamsSearchLog()})}catch(ex){console.log("Exception at initLog.zmp3LogSearch.handlingParamsSearchLog: ",ex)}}$.ajaxSetup({xhrFields:{withCredentials:true}});var z3Log={timer:null,timer2:null,urlLog1:MP3.LOG_URL+"log/index",urlLog2:MP3.LOG_URL+"log/mp3log",urlLogv21:MP3.LOG_URL+"logv2/index",urlLogv2:MP3.LOG_URL+"logv2/mp3log",start:function(c,a,b){if(this.timer!==null){clearTimeout(this.timer)}if(this.timer2!==null){clearTimeout(this.timer2)}this.data="";$.get("/json/log/info",{id:c,type:a},function(d){if(d.data){if(typeof ZA==="object"){ZA.getVisitorID(function(e){$.get(MP3.LOG_URL+"log/index?sessid="+$.cookie("__mp3sessid")+"&callback=?");z3Log.timer=setTimeout(function(){$.get(MP3.LOG_URL+"log/mp3log?ckss="+$.cookie("___sessid")+"&sessid="+$.cookie("__mp3sessid")+"&data="+d.data+"&vid="+e+"&callback=?")},35000)})}if(typeof ZA==="object"){ZA.getVisitorID(function(e){$.getJSON(MP3.LOG_URL+"logv2/index?sessid="+$.cookie("__mp3sessid")+"&callback=?");z3Log.timer=setTimeout(function(){var i="&visitorid="+e;var h=MP3.VIP==false?"0":"1";var f="&isvip="+h;var g="&ref="+document.referrer;$.getJSON(MP3.LOG_URL+"logv2/mp3log?sessid="+$.cookie("__mp3sessid")+"&data="+d.data+i+f+g+"&callback=?")},35000)})}}})},writeLog:function(b,a){if(b){$.get(a+"?ckss="+$.cookie("___sessid")+"&sessid="+$.cookie("__mp3sessid")+"&callback=?","","dataType:text")}},writeLogInfo:function(c,a){if(!a){a=this.urlLog2}if(c){try{$.get(a+"?ckss="+$.cookie("___sessid")+"&sessid="+$.cookie("__mp3sessid")+"&data="+c+"&callback=?","","dataType:text")}catch(b){}}},getUid:function(){return"xxxxxxxxxxxx".replace(/[x]/g,function(d){var b=Math.random()*16|0,a=d=="x"?b:(b&3|8);return a.toString(16)}).toUpperCase()},getPageId:function(){var b=window.location.href;var d=b.split("/");if(d.length>=6){var c=d[5];var a=c.substring(0,8);return a}else{return""}},getPageName:function(){var a=window.location.href;var b=a.split("/");if(zmp3LogCommon.isValidParam(b)){if(b.length>=4){return b[3]}else{return""}}},initLogInfoVal:function(){var b=this.getPageId;var a=this.getPageName();if(b!=""&&a!=""){$.get("/json/log/info",{id:b,type:a},function(e){if(e.data){if(typeof MP3==="object"){MP3.LOG_INFO=e.data;if(MP3.LOG_INFO){var i=0,f="",j=0;var g=0;var l=document.referrer;var h=/[a-z0-9-]+\//gi;if(l&&l.indexOf(MP3.MP3_URL)>-1){l=l.replace(MP3.MP3_URL,"");if(l.indexOf("/")==0){l=l.substr(1)}l=l.substr(0,l.indexOf("."));arr=l.split("/");f=l.replace(h,"");switch(true){case (l.indexOf("bai-hat")==0):i=1;break;case (l.indexOf("video-clip")==0):i=3;break;case (l.indexOf("album")==0):case (l.indexOf("playlist")==0):i=2;break;default:break}}var k=location.pathname.lastIndexOf("/");var d=location.pathname.substring(1,k).toLowerCase().split("/").slice(0,2);path=d.join("/");switch(d[0]){case"bai-hat":case"album":case"playlist":case"video-clip":g=35000;break;default:g=0;break}MP3.LOG_INFO+="&fromId="+f+"&type="+i+"&fromBox="+j;if(g>0){var c="";setTimeout(function(){if(typeof ZA==="object"){ZA.getVisitorID(function(m){var r="&visitorid="+m;var p=MP3.VIP==false?"0":"1";var n="&isvip="+p;var o="&ref="+document.referrer;var q=MP3.LOG_INFO+r+n+o;setTimeout(function(){z3Log.writeLogInfo(q,z3Log.urlLogv2)},g-2000)})}},2000);z3Log.writeLog(MP3.LOG_INFO,z3Log.urlLog1);z3Log.writeLog(MP3.LOG_INFO,z3Log.urlLogv21);setTimeout("z3Log.writeLogInfo(MP3.LOG_INFO)",g)}else{z3Log.writeLogInfo(MP3.LOG_INFO)}}}}})}}};z3Log.initLogInfoVal();if(typeof $.cookie("__mp3sessid")=="undefined"){$.cookie("__mp3sessid",z3Log.getUid(),{domain:"mp3.zing.vn",path:"/"})}var trackingGAEvent={init:function(){this.eventSearchBoxClick();this.eventSearchBoxEnter();this.eventSearchBoxTopResult();this.eventSearchResultAll();this.eventSearchResultPlaylist();this.eventSearchResultVideo();this.eventSearchFillter();this.eventNavigationBar();this.eventSuggestion();this.eventsSongPage()},tracking:function(a,c,b){if(typeof ga!=="undefined"){ga("mp3.send","event",{eventCategory:a,eventAction:c,eventLabel:b})}},trackingHomePage:function(a,d,c){var b=(window.location.pathname=="/");if(typeof ga!=="undefined"&&b){ga("mp3.send","event",{eventCategory:a,eventAction:d,eventLabel:c})}},formatingIndex:function(a){var b="";if(typeof a==="number"){a++;if(a<10){b="0"+a}else{b=a}}return b},eventSearchBoxClick:function(){$("#sug input").click(function(){trackingGAEvent.trackingHomePage("Searchbox_box","Click","Searchbox_Clickonbox")})},eventSearchBoxEnter:function(){$("#sug button:submit").click(function(){trackingGAEvent.trackingHomePage("Searchbox_box","Click","Searchbox_Click")});$("#sug input").keyup(function(a){if(a.keyCode==13){trackingGAEvent.trackingHomePage("Searchbox_box","Enter","Searchbox_Enter")}})},eventSearchBoxTopResult:function(){$("#sugResult").on("click","#sugTop a.track-log",function(){trackingGAEvent.trackingHomePage("Searchbox_Top_Result","Click","Searchbox_Topresult")});$("#sugResult").on("click","#tplSugArtist a.track-log",function(){var a=$(this).parent().index();a=trackingGAEvent.formatingIndex(a);trackingGAEvent.trackingHomePage("Searchbox_Artist","Click","Searchbox_Artist"+a)});$("#sugResult").on("click","#tplSugSong a.track-log",function(){var a=$(this).parent().index();a=trackingGAEvent.formatingIndex(a);trackingGAEvent.trackingHomePage("Searchbox_Song","Click","Searchbox_Song"+a)});$("#sugResult").on("click","#tplSugAlbum a.track-log",function(){var a=$(this).parent().index();a=trackingGAEvent.formatingIndex(a);trackingGAEvent.trackingHomePage("Searchbox_Album","Click","Searchbox_Album"+a)});$("#sugResult").on("click","#tplSugVideo a.track-log",function(){var a=$(this).parent().index();a=trackingGAEvent.formatingIndex(a);trackingGAEvent.trackingHomePage("Searchbox_Video","Click","Searchbox_Video"+a)})},eventSearchResultAll:function(){$(".search-tab-all").on("click",function(){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Title")});$(".top-search").on("click",function(){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Topresult")});$(".top-search-artist").on("click",function(){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Artist")});$("#song-search-rs").on("click",".item-song a.track-log",function(){var a=$(this).attr("order");a++;if(Number(a)<10){a="0"+a}trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Song_"+a)});$(".search-all-rs-album-title").on("click",function(){var a=$(this).attr("order");trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Album_Title")});$("#song-search-rs").on("click",".album-item a.track-log",function(){var a=$(this).attr("order");a++;if(Number(a)<10){a="0"+a}trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Album_"+a)});$(".search-all-rs-video-title").on("click",function(){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Video_Title")});$("#song-search-rs").on("click",".video-item a.track-log",function(){var a=$(this).attr("order");a++;if(Number(a)<10){a="0"+a}trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Video_"+a)});$(".search-all-rs-video-title").on("click",function(){var a=$(this).attr("order");a++;if(Number(a)<10){a="0"+a}trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Video_"+a)});$("#song-search-rs").on("click",".pagination li a",function(){var a=true;if($(this).text()=="Đầu"){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Firstpage")}if($(this).text()=="Cuối"){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Lastpage")}if($(this).text()==">"){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Forward");a=false}if($(this).text()=="<"){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Back");a=false}if(a){var b=$(this).parent().index();b=trackingGAEvent.formatingIndex(b);trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Page"+b)}})},eventSearchResultPlaylist:function(){$(".search-tab-playlist").on("click",function(){trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Title")});$("#playlist-search-rs").on("click",".album-list .item a.track-log",function(){var a=$(this).attr("order");a++;if(Number(a)<10){a="0"+a}trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Album_"+a)});$("#playlist-search-rs").on("click",".pagination li a",function(){var a=true;if($(this).text()=="Đầu"){trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Firstpage")}if($(this).text()=="Cuối"){trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Lastpage")}if($(this).text()==">"){trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Forward");a=false}if($(this).text()=="<"){trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Back");a=false}if(a){var b=$(this).parent().index();b=trackingGAEvent.formatingIndex(b);trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Page"+b)}})},eventSearchResultVideo:function(){$(".search-tab-video").on("click",function(){trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Title")});$("#video-search-rs").on("click",".video-list .item a.track-log",function(){var a=$(this).attr("order");a++;if(Number(a)<10){a="0"+a}trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_MV_"+a)});$("#video-search-rs").on("click",".pagination li a",function(){var a=true;if($(this).text()=="Đầu"){trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Firstpage")}if($(this).text()=="Cuối"){trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Lastpage")}if($(this).text()==">"){trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Forward");a=false}if($(this).text()=="<"){trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Back");a=false}if(a){var b=$(this).parent().index();b=trackingGAEvent.formatingIndex(b);trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Page"+b)}})},eventSearchFillter:function(){$(".toggle-filter.fn-show").on("click",function(){trackingGAEvent.tracking("Searchfilter","Click","Searchfilter")})},eventNavigationBar:function(){$("#navbar-home").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_home")});$("#navbar-mymusic").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_mymusic")});$("#navbar-topic").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_chude")});$("#navbar-genrealbum").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_theloaialbum")});$("#navbar-genrevideo").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_theloaivideo")});$("#navbar-genreartist").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_theloainghesi")});$("#navbar-chart").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_bangxephang")});$("#navbar-top100").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_top100")});$("#navbar-realtime").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_realtime")});$("#navbar-radio").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_radio")});$("#navbar-vip").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_vip")})},eventSuggestion:function(){function a(d,b,c){$(d).on("click",".btn-sw-off",function(){trackingGAEvent.tracking(b,"Autoplay","Turn_on")});$(d).on("click",".btn-sw-on",function(){trackingGAEvent.tracking(b,"Autoplay","Turn_off")});$(d).on("click","#"+c+"Rec ul > li",function(g){var e=Number($(this).index());e++;if(e<10){e="0"+e}var f=$(this).find("a.track-log").attr("href");trackingGAEvent.tracking(b,"Click_"+e,f)});$(d).on("click","#block-"+c+"-suggest-more > li",function(g){var e=Number($(this).index());e+=11;var f=$(this).find("a.track-log").attr("href");trackingGAEvent.tracking(b,"Click_"+e,f)});$(d).on("click",".load-more span",function(){trackingGAEvent.tracking(b,"Click_More","Load_More_Suggestion")})}a("#block-song-suggest","Song_Suggestion","song");a("#block-playlist-suggest","Album_Suggestion","playlist");a("#block-video-suggest","Video_Suggestion","video")},eventsSongPage:function(){this.eventLikeZingMe();this.eventLikeFacebook();this.eventDownloadSongInSongPage();this.eventAddSongToPlaylistInSongPage();this.eventFeedbackInSongPage();this.eventUpgradeVipInSongPage();this.eventArtistInSongPage();this.eventFollowArtistInSongPage();this.eventAlbumInSongPage();this.eventVideoInSongPage();this.eventCollectionPlaylistInSongPage();this.eventComment();this.eventAudioPlayer()},eventLikeZingMe:function(){$(".fn-zlike").on("click",function(){trackingGAEvent.tracking("Play_Lovebutton","Click","Love_Button")})},eventLikeFacebook:function(){setTimeout(function(){if(typeof FB!=="undefined"){FB.Event.subscribe("edge.create",function(a,b){trackingGAEvent.tracking("Play_Likebutton","Click","Like_Button")})}},5000)},eventDownloadSongInSongPage:function(){$(document).on("click",".fn-128",function(){trackingGAEvent.tracking("Play_Download","Click","Download_128")});$(document).on("click",".fn-320",function(){trackingGAEvent.tracking("Play_Download","Click","Download_320")});$(document).on("click",".fn-lossless",function(){trackingGAEvent.tracking("Play_Download","Click","Download_Lossless")})},eventAddSongToPlaylistInSongPage:function(){$(".fn-tab").click(function(){var b=$(this);var a=b.data("panel");if(a==".fn-tab-panel-addto"){trackingGAEvent.tracking("Play_Addtoplaylist","Click","Add_to_playlist")}})},eventFeedbackInSongPage:function(){$(".fn-tab").click(function(){var b=$(this);var a=b.data("panel");if(a==".fn-tab-panel-feedback"){trackingGAEvent.tracking("Play_Feedback","Click","Feedback")}})},eventUpgradeVipInSongPage:function(){$(document).on("click",".content-promote-func .fn-viprequire",function(){trackingGAEvent.tracking("Play_UpgradeVip","Click","VIP_Upgrade")})},eventArtistInSongPage:function(){$(".artist-track-log").on("click",function(){trackingGAEvent.tracking("Play_artist","Click","Artist")})},eventFollowArtistInSongPage:function(){$(document).on("click",".fn-follow",function(){trackingGAEvent.tracking("Play_followartist","Click","Follow_Artist")})},eventAlbumInSongPage:function(){$(document).on("click","#albumOfArtist h2 a",function(){trackingGAEvent.tracking("Play_Album","Click","Album_Title")});$(document).on("click","#albumOfArtist .album-item",function(){var a=Number($(this).attr("data-slick-index"));a++;if(a<10){a="0"+a}trackingGAEvent.tracking("Play_Album","Click_"+a,"Album_"+a)})},eventVideoInSongPage:function(){$(document).on("click","#videoOfArtist h2 a",function(){trackingGAEvent.tracking("Play_Video","Click","Video_Title")});$(document).on("click","#videoOfArtist .video-item",function(){var a=Number($(this).attr("data-slick-index"));a++;if(a<10){a="0"+a}trackingGAEvent.tracking("Play_Video","Click_"+a,"Video_"+a)})},eventCollectionPlaylistInSongPage:function(){$(document).on("click","#albumCollection h2 a",function(){trackingGAEvent.tracking("Play_Playlist","Click","Playlist_Title")});$(document).on("click","#albumCollection .slick-slide",function(){var a=Number($(this).attr("data-slick-index"));a++;if(a<10){a="0"+a}trackingGAEvent.tracking("Play_Playlist","Click_"+a,"Playlist_"+a)})},eventComment:function(){$(document).on("click",".box-comment form.fn-comment textarea:first",function(){trackingGAEvent.tracking("Play_comment","Click","#play_commentbox")});$(document).on("click",".box-comment form:first button:submit",function(){trackingGAEvent.tracking("Play_comment","Click","#play_commentbutton")})},eventAudioPlayer:function(){}};trackingGAEvent.init();