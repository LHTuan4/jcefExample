var zmHeader=(function(){var k=false,H=0,N=-1,L={nt:-1,fr:-1,pm:-1,gn:-1},V={nt:0,fr:0,pm:0,gn:0},r={},M=false,s=false,i=false,B=document.title,m="http://img.me.zdn.vn/v4/images/grpchat_dafault_avt-1.00.jpg";var w='<div class="zmdropdown_padding">				<div class="zmnotifddl_top"><p>Bạn có gì mới</p></div>				<div class="zmnotifddl_inner">					<div id="ntlist" class="notifbox_cont ntlist"></div>				</div>				<div class="zmnotifddl_bottom">					<p class="zmbotnotif_right"><a href="'+zmConfig.ME_URL+'/apps/notify?fromid=0&count=30&type=3&masterpage=3" target="_blank" class="zmnotif_viewall" style="display: none;">Xem tất cả</a></p>				</div>			</div>',y='<div class="zmdropdown_padding">					<div class="zmnotifddl_top"><p>Thông báo từ game</p></div>					<div class="zmnotifddl_inner">						<div id="gnlist" class="notifbox_cont gnlist"></div>					</div>					<div class="zmnotifddl_bottom">						<p class="zmbotnotif_right"><a href="'+zmConfig.ME_URL+'/apps/notify?fromid=0&count=30&type=10&masterpage=3" target="_blank" class="zmnotif_viewall" style="display: none;">Xem tất cả</a></p>					</div>				</div>',Q='<div class="zmdropdown_padding">					<div class="zmnotifddl_top"><p>Lời mời kết bạn <strong id="zmfr_num"></strong></p></div>					<div class="zmnotifddl_inner">						<div id="frlist" class="notifbox_cont frdlist"></div>					</div>					<div class="zmnotifddl_bottom">						<p class="zmbotnotif_right"><a href="/u/'+zmConfig.viewerName+'#friend/request" target="_blank" class="zmnotif_viewall" style="display: none;">Xem tất cả</a></p>					</div>				</div>',t='<div class="zmdropdown_padding">					<div class="zmnotifddl_top">						<p class="rhtext"><a target="_blank" href="/jpm/new">Gửi tin nhắn mới</a></p>						<p>Tin nhắn</p>					</div>					<div class="zmnotifddl_inner">						<div id="pmlist" class="notifbox_cont pmlist"></div>					</div>					<div class="zmnotifddl_bottom">						<p class="zmbotnotif_right"><a href="/jpm" target="_blank" class="zmnotif_viewall" style="display: none;">Xem tất cả</a></p>					</div>				</div>';var G='<p class="zmloading32" style="padding: 10px;"><em></em><span>Đang tải dữ liệu...</span></p>',n='<div id="popup-ntnotify">'+G+"</div>",e='<div id="popup-gnnotify">'+G+"</div>",P='<div id="popup-pmnotify">'+G+"</div>";function d(W){zmCommon.makeRequest("/jpm/ajax","POST",{action:"unread",type:"gettotal"},W)}function j(W){switch(W){case"&":return"&amp;";case">":return"&gt;";case"<":return"&lt;";case'"':return"&quot;";case"\n":return"<br>"}return W}function E(X,ab,W,Y,Z,aa){aa=aa.replace(/[><\"\n]/g,j);aa=aa.replace(/&(?!gt;|lt;|quot;)/g,"&amp;");return'<div id="freq_'+X+'" class="zme_notifitem">				<a href="#" class="notifyavt"><img class="avtborder" alt="'+W+'" src="'+Y+'"></a>				<div class="zmntfrdactbtn fr">					<a href="#" class="frdrejectbtn fr zmbtndefault" title="Từ chối" onclick="zmFriendRequest.rejectRequest('+X+",zmNotifications.removeRequestItem("+X+'));return false;">×</a>					<a href="#" title="Kết bạn" class="frdacceptbtn fr zmbtn1" onclick="zmFriendRequest.acceptRequest('+X+",zmNotifications.removeRequestItem("+X+'));return false;"><span>+</span><strong class="frdacceptbtn_label">Kết bạn</strong></a>				</div>				<span class="zmnrcontent">					<a href="'+zmConfig.PROFILE_URL+"/"+ab+'" title="'+W+'" class="zmnr_username text_cutted">'+W+'</a>					<span class="notiftimelabel">'+Z+'</span>					<span class="pmtxt">'+aa+"</span>				</span>			</div>"}function f(ad,Y,W,aa,X,ab,ac){X=zm.intval(X);X<0?X=0:X;ac=ac.replace(/[><\"\n]/g,j);ac=ac.replace(/&(?!gt;|lt;|quot;)/g,"&amp;");var Z;if(Y){Z="zmChat.chatWith("+Y+", true); return false;"}else{if(zmChat.enableConversation){Z="zmChat.chatWith('cid"+ad+"', true); return false;"}else{Z="window.open('http://me.zing.vn/jpm/conversation?id="+ad+"', '_blank'); return false;"}}return'<a href="#" class="zme_notifitem" data-cid="'+ad+'" onclick="'+Z+'">					<span class="notifyavt"><img class="avtborder" alt="'+W+'" src="'+aa+'"></span>					<span class="zmnrcontent">						<span '+(X==0?'style="display:none;"':"")+' class="unreadmsg_number">'+(X>100?"100+":X)+'</span>						<strong title="'+W+'" class="zmnr_username text_cutted">'+W+'</strong>						<span class="notiftimelabel">'+ab+'</span>						<span class="pmtxt">'+ac+"</span>					</span>				</a>"}zmEvent.bind("notify.all",function(X){for(var W=0;W<X.length;W++){zmEvent.fire(X[W].type,X[W])}});zmEvent.bind("notify2",function(W){T({nt:W.data})});zmEvent.bind("notify.gn",function(W){T({gn:W.data})});zmEvent.bind("notify.fr",function(W){if(W.data==0&&L.fr!=0){K()}T({fr:W.data})});zmEvent.bind("popup.hide",function(){J()});zmEvent.bind("notify.hide",function(){J()});function c(){var W=zm("#popup-pmnotify .zme_notifitem"),X={};zm.each(W,function(){var Y=zm(this).attr("data-cid");if(X[Y]){zm(this).remove()}else{X[Y]=true}})}function h(X,W){if(!zm.isNumber(r[X])){zmCommon.makeRequest("/jpm/ajax","POST",{action:"unread",type:"get",cid:X},function(Y){if(Y.msg=="Successfully"){r[X]=Y.count;zm.isFunction(W)&&W()}})}else{r[X]+=1;zm.isFunction(W)&&W()}}if(zmConfig.pageName!="apps"){zmEvent.bind("webchat",function(W){if(W.data.to==zmConfig.viewerId){d(function(X){if(X.msg=="Successfully"){T({pm:X.total});h(W.data.cid,p(W))}else{h(W.data.cid,p(W))}})}else{if(W.data.fromU==zmConfig.viewerId){r[W.data.cid]=0;p(W)}}})}function p(ab){var Z=zm("#popup-pmnotify"),X,Y=ab.data.msg.replace(new RegExp("^(#[a-f0-9]{1,6})\\s+","g"),""),aa=zm.formatDateTime(ab.data.ts);X=Z.find(".zme_notifitem[data-cid='"+ab.data.cid+"']");if(X.length>0){X.find(".pmtxt").attr("title",Y).text(Y);X.find(".notiftimelabel").text(aa);if(r[ab.data.cid]>0){X.find(".unreadmsg_number").text(r[ab.data.cid]>=100?"100+":r[ab.data.cid]).show()}else{X.find(".unreadmsg_number").hide().text("0")}Z.prepend(X);c()}else{var W;if(ab.data.to==zmConfig.viewerId){W=ab.data.fromU}else{if(ab.data.fromU==zmConfig.viewerId){W=ab.data.to}}if(ab.data.fromD&&ab.data.fromA){Z.prepend(f(ab.data.cid,W,ab.data.fromD,zmChat.getAvatarLink(ab.data.fromA),r[ab.data.cid],aa,Y));c()}else{zmChat.fireGetInfo({u:W},function(ac){if(!ac||!ac.data){return}Z.prepend(f(ab.data.cid,W,ac.data.d,zmChat.getAvatarLink(ac.data.a),r[ab.data.cid],aa,Y));c()})}}}if(zmConfig.pageName!="apps"){zmEvent.bind("webchat.conversation",function(W){if(W.data.toU==zmConfig.viewerId&&W.data.fromU!=zmConfig.viewerId){d(function(X){if(X.msg=="Successfully"){T({pm:X.total});h(W.data.cid,A(W))}else{h(W.data.cid,A(W))}})}else{if(W.data.fromU==zmConfig.viewerId){r[W.data.cid]=0;A(W)}}})}function A(aa){var Y=zm("#popup-pmnotify"),W,X=aa.data.msg.replace(new RegExp("^(#[a-f0-9]{1,6})\\s+","g"),""),Z=zm.formatDateTime(aa.data.ts);W=Y.find(".zme_notifitem[data-cid='"+aa.data.cid+"']");if(W.length>0){W.find(".pmtxt").attr("title",X).text(X);W.find(".notiftimelabel").text(Z);if(r[aa.data.cid]>0){W.find(".unreadmsg_number").text(r[aa.data.cid]>=100?"100+":r[aa.data.cid]).show()}else{W.find(".unreadmsg_number").hide().text("0")}Y.prepend(W);c()}else{zmChat.fireGetChannelInfo(aa.data.cid,function(ab){Y.prepend(f(aa.data.cid,null,ab.data.cname,m,r[aa.data.cid],Z,X));c()})}}if(zmConfig.pageName!="apps"){zmEvent.bind("webchat.counter",function(ab){try{var Z=zm("#popup-pmnotify"),ac=ab.data.cid,Y=ab.data.count,X=ab.data.total;if(!ac){return}if(X>=0){T({pm:X})}if(Z.length>0&&Z.children().length>0){var W=Z.find(".zme_notifitem[data-cid='"+ac+"']");if(W.length>0){if(r[ac]>0&&Y==0){W.removeClass("unread");W.find(".unreadmsg_number").hide().text("0");r[ac]=0}}}}catch(aa){}});zmEvent.bind("webchat.counter.total",function(X){try{T({pm:X.total})}catch(W){}});zmEvent.bind("webchat.conversation.changeName",function(aa){try{var Y=zm("#popup-pmnotify"),ab=aa.data.cid,W=aa.data.cname;if(!ab||!W){return}if(Y.length>0&&Y.children().length>0){var X=Y.find(".zme_notifitem[data-cid='"+ab+"']");if(X.length>0){X.find(".zmnr_username").text(W).attr("title",W)}}}catch(Z){}});zmEvent.bind("webchat.conversation.leave",function(aa){try{var Y=zm("#popup-pmnotify"),ab=aa.data.cid,X=aa.data.uid;if(!ab||!X){return}if(X!=zmConfig.viewerId){return}if(Y.length>0&&Y.children().length>0){var W=Y.find(".zme_notifitem[data-cid='"+ab+"']");if(W.length>0){W.remove();if(Y.children().length==0){Y.html('<div class="zme_notifitem emptyrow">Bạn không có tin nhắn nào.</div>');zm("#zmpmdetail .zmnotif_viewall").hide()}}}}catch(Z){}})}function l(){var W=zmNotifications.config;if(!W){return}for(var Y=0;Y<W.servers.length;Y++){var aa=W.servers[Y];if(!zm.isString(aa)){continue}if(aa.indexOf("|")>=0){zm.log("[zmNotify] Config error syntax.");continue}var X=zm.createElement("iframe",{},{visibility:"hidden",position:"absolute",top:"0",left:"0",width:"0",height:"0"});try{X.src="http://"+aa+"/subframe-"+W.frameVersion+".html#"+W.channel+"_"+W.sign+"_"+W.zmVersion;document.body.appendChild(X)}catch(Z){}}zm(window).bind("message",function(ae){var ag=ae.origin,af=zmNotifications.config.servers,ab=false;for(var ac=0,ad;ad=af[ac];ac++){if(ag.indexOf(ad)>-1){ab=true;break}}ab&&zmEvent.fire("notify.all",zm.parseJSON(ae.data))})}function D(){if(zmConfig.viewerId>0){zmCommon.makeRequest("/ntft/counter","POST",{viewerId:zmConfig.viewerId,time:zmConfig.time,type:2,cates:"nt,gn"},function(W){T(W)});zmCommon.makeRequest("/jpm/ajax","POST",{action:"unread",type:"gettotal"},function(W){T({pm:W.total})})}}function g(Y,X,W,Z){zm("#zm_header").on("click","#zm"+Y+"icon .zmnotif_btn",function(ac){ac.preventDefault();if(zm(this).parents("#zm"+Y+"detail").size()>0){return}zm("#zm"+Y+"counter").hide();if(Y=="pm"&&L.pm>0){zmCommon.makeRequest("/jpm/ajax","POST",{action:"unread",type:"cleartotal"},function(ad){if(ad.msg=="Successfully"){T({pm:0})}})}var aa=zm("#zm"+Y+"detail"),ab=aa.find(".zmdropdown_padding");if(ab.length){if(V[Y]=1-V[Y]){zm("#zm"+Y+"icon").addClass("selected");aa.show()}else{zm("#zm"+Y+"icon").removeClass("selected");aa.hide();return}}else{aa.html(X);aa.css("visibility","visible");aa.css("opacity","1");zm("#zm"+Y+"icon").addClass("selected");V[Y]=1;if(zm.isFunction(Z)){Z()}}zm.isFunction(W)&&W()})}function u(W){zm("#zm"+W+"icon .zmnotif_btn").clickOutside(function(){zm("#zm"+W+"detail").hide();V[W]=0;zm("#zm"+W+"icon").removeClass("selected")},0,false,"zmcog.notifications"+W).clickOutsideWith(zm("#zm"+W+"detail"))}function q(){H=1-H;if(H==0){document.title="Bạn có tin nhắn mới - "+B}else{document.title=B}}function z(){if(N!=-1){clearInterval(N)}H=0;N=setInterval(q,3000)}function o(){clearInterval(N);N=-1;document.title=B}function T(Z){for(var Y in Z){var X=parseInt(Z[Y]),W=zm("#zm"+Y+"counter");if(!W.size()){continue}if(!X||X==-1){W.hide();if(N!=-1){o()}}else{if(Y=="pm"){X=X>=20?"20+":X}else{X=X>=100?"100+":X}W.html("<em>"+X.toString()+"</em>");W.show();if(N==-1&&Y!="fr"){z()}}L[Y]=X}if(zmConfig.pageName=="apps"){zm.storage.put(zmLayout.STORAGE_DEFINE_LIST.HEADER+".apps."+zmConfig.viewerId,zm("#zm_header").html(),3600*24*7)}else{zm.storage.put(zmLayout.STORAGE_DEFINE_LIST.HEADER+"."+zmConfig.viewerId,zm("#zm_header").html(),3600*24*7)}}function J(){zm("#zmntdetail").hide();V.nt=0;zm("#zmgndetail").hide();V.gn=0;zm("#zmfrdetail").hide();V.fr=0;zm("#zmpmdetail").hide();V.pm=0}function R(){if(zm("#popup-ntnotify .zmloading32").length<1&&L.nt==0){if(zm("#ntlist .zmscrollableui").height()==0){zm("#ntlist .zmscrollableui").css("height","400px")}return}zm("#popup-ntnotify").html(G);zm.post("/ntft/zmef",{viewerId:zmConfig.viewerId,time:zmConfig.time,cate:"nt",fromid:0,count:15,type:1},{dataType:"json"},function(W){if(W.errorCode==0){o();zm("#popup-ntnotify").html(W.data);zm("#popup-ntnotify").attr("view-more",W.more).attr("last-id",W.lastId);if(zm("#popup-ntnotify .zme_notifitem").size()<7){b(null,null,1)}L.nt=0;zm("#zmntdetail .zmnotif_viewall").show();zm.isFunction(zmFeed.Widget.scanNotifyItem)&&zmFeed.Widget.scanNotifyItem(1235)}else{zm("#popup-ntnotify").html('<div class="zme_notifitem emptyrow">Bạn không có thông báo nào.</div>');zm("#zmntdetail .zmnotif_viewall").hide()}})}function C(){if(zm("#popup-gnnotify .zmloading32").length<1&&L.gn==0){if(zm("#gnlist .zmscrollableui").height()==0){zm("#gnlist .zmscrollableui").css("height","400px")}return}zm("#popup-gnnotify").html(G);zm.post("/ntft/gamef",{viewerId:zmConfig.viewerId,time:zmConfig.time,cate:"gn",fromid:0,count:15,type:10},{dataType:"json"},function(W){if(W.errorCode==0){o();zm("#popup-gnnotify").html(W.data);zm("#popup-gnnotify").attr("view-more",W.more).attr("last-id",W.lastId);if(zm("#popup-gnnotify .zme_notifitem").size()<7){a(null,null,1)}L.gn=0;zm("#zmgndetail .zmnotif_viewall").show()}else{zm("#popup-gnnotify").html('<div class="zme_notifitem emptyrow">Bạn không có thông báo nào.</div>');zm("#zmgndetail .zmnotif_viewall").hide()}})}function K(W){if(zm("#frlist .zmloading32").length<1&&L.fr==0){return}zm("#frlist").html(G);zm.post("/fr/request/hdlist",{viewerId:zmConfig.viewerId,time:zmConfig.time,token:zmConfig.token},{dataType:"json"},function(ab){if(ab.error>=0){if(W){T({fr:ab.total})}else{L.fr=0}o();zm("#zmfr_num").html("("+ab.total+")");var Y="",aa=ab.list.length>6?6:ab.list.length,Z;for(var X=0;X<aa;X++){Z=ab.list[X];Y+=E(Z.friendId,Z.userName,Z.displayName,Z.avatarPath,zm.formatDateTime(Z.time),Z.message)}zm("#frlist").html(Y);zm("#zmfrdetail .zmnotif_viewall").show()}else{zm("#zmfr_num").html("(0)");zm("#frlist").html('<div class="zme_notifitem emptyrow">Bạn không có lời mời nào.</div>');zm("#zmfrdetail .zmnotif_viewall").hide()}},function(){zm("#zmfr_num").html("(0)");zm("#frlist").html('<div class="zme_notifitem emptyrow">Có lỗi không mong muốn xảy ra. Bạn vui lòng thực hiện lại.</div>');zm("#zmfrdetail .zmnotif_viewall").hide()})}function S(){if(zm("#popup-pmnotify .zmloading32").length<1&&L.pm==0){if(zm("#pmlist .zmscrollableui").height()==0){zm("#pmlist .zmscrollableui").css("height","400px")}return}zm("#popup-pmnotify").html(G);zmCommon.makeRequest("/jpm/ajax","POST",{action:"pmnotify"},function(ac){if(ac.msg=="Successfully"){var aa=ac.data.list.length;if(aa>0){o();var Y="",Z,ab,W;for(var X=0;X<aa;X++){Z=ac.data.list[X];ab=Z.lastestMsg.replace(new RegExp("^(#[a-f0-9]{1,6})\\s+","g"),"");if(Z.unread){W=Z.unread}else{W=0}r[Z.cid]=W;Y+=f(Z.cid,(Z.userid?Z.userid:null),Z.fullname,Z.avatar,W,zm.formatDateTime(Z.time),ab)}zm("#popup-pmnotify").html(Y);zm("#popup-pmnotify").attr("view-more",ac.data.more).attr("last-id",ac.data.lastId);if(zm("#popup-pmnotify .zme_notifitem").size()<6){x(null,null,1)}L.pm=0;zm("#zmpmdetail .zmnotif_viewall").show()}else{zm("#popup-pmnotify").html('<div class="zme_notifitem emptyrow">Bạn không có tin nhắn nào.</div>');zm("#zmpmdetail .zmnotif_viewall").hide()}}else{zm("#popup-pmnotify").html('<div class="zme_notifitem emptyrow">Bạn không có tin nhắn nào.</div>');zm("#zmpmdetail .zmnotif_viewall").hide()}})}function b(W,Y,X){if(X==1&&zm("#popup-ntnotify").attr("view-more")=="1"&&!M){M=true;if(zm("#popup-ntnotify .zmloading32").length<1){zm("#popup-ntnotify").append(G)}zm.post("/ntft/zmef",{viewerId:zmConfig.viewerId,time:zmConfig.time,cate:"nt",fromid:zm("#popup-ntnotify").attr("last-id"),count:15,type:1},{dataType:"json"},function(Z){zm("#popup-ntnotify .zmloading32").remove();if(Z.errorCode==0){if(zm.intval(zm("#popup-ntnotify").attr("last-id"))>zm.intval(Z.lastId)){zm("#popup-ntnotify").append(Z.data).attr("view-more",Z.more).attr("last-id",Z.lastId);if(zm("#popup-ntnotify .zme_notifitem").size()<7){b(null,null,1)}}L.nt=0;zm("#zmntdetail .zmnotif_viewall").show()}M=false})}}function a(W,Y,X){if(X==1&&zm("#popup-gnnotify").attr("view-more")=="1"&&!s){s=true;if(zm("#popup-gnnotify .zmloading32").length<1){zm("#popup-gnnotify").append(G)}zm.post("/ntft/gamef",{viewerId:zmConfig.viewerId,time:zmConfig.time,cate:"gn",fromid:zm("#popup-gnnotify").attr("last-id"),count:15,type:10},{dataType:"json"},function(Z){zm("#popup-gnnotify .zmloading32").remove();if(Z.errorCode==0){if(zm.intval(zm("#popup-gnnotify").attr("last-id"))>zm.intval(Z.lastId)){zm("#popup-gnnotify").append(Z.data).attr("view-more",Z.more).attr("last-id",Z.lastId);if(zm("#popup-gnnotify .zme_notifitem").size()<7){a(null,null,1)}}L.gn=0;zm("#zmgndetail .zmnotif_viewall").show()}s=false})}}function x(W,Y,X){if(X==1&&zm("#popup-pmnotify").attr("view-more")=="1"&&!i){i=true;if(zm("#popup-pmnotify .zmloading32").length<1){zm("#popup-pmnotify").append(G)}zmCommon.makeRequest("/jpm/ajax","POST",{action:"pmnotify",fromid:zm("#popup-pmnotify").attr("last-id")},function(af){zm("#popup-pmnotify .zmloading32").remove();if(af.msg=="Successfully"){var ad=af.data.list.length;if(ad>0){if(zm.intval(zm("#popup-pmnotify").attr("last-id"))<zm.intval(af.data.lastId)){var ab="",ac,ae,Z;for(var aa=0;aa<ad;aa++){ac=af.data.list[aa];ae=ac.lastestMsg.replace(new RegExp("^(#[a-f0-9]{1,6})\\s+","g"),"");if(ac.unread){Z=ac.unread}else{Z=0}r[ac.cid]=Z;ab+=f(ac.cid,(ac.userid?ac.userid:null),ac.fullname,ac.avatar,Z,zm.formatDateTime(ac.time),ae)}zm("#popup-pmnotify").append(ab).attr("view-more",af.data.more).attr("last-id",af.data.lastId);if(zm("#popup-pmnotify .zme_notifitem").size()<6){x(null,null,1)}}L.pm=0;zm("#zmpmdetail .zmnotif_viewall").show()}}i=false})}}function U(){zm.extend(window.zmNotifications,{checkEmpty:function(W){if(W!="nt"&&W!="pm"&&W!="fr"&&W!="gn"){return}var X=zm("#"+W+"list");if(X&&X.length&&X.children().length==0){switch(W){case"nt":R();break;case"gn":C();break;case"fr":K();break;case"pm":if(zmConfig.pageName!="apps"){S()}break}}},removeRequestItem:function(Y){zm("#freq_"+Y).remove();zmNotifications.checkEmpty("fr");var X=zm("#zmfr_num").html();var W=zm.intval(X.substr(1,X.length-2));zm("#zmfr_num").html("("+(W?(W-1):0)+")")},startAlert:z,resetAlert:o})}function F(){var Y="http://search.me.zing.vn/zingsearch/api/wtauto",X=new zm.Template('<p class="zmsrch_actbtn fr"><label class="zmsrch_labeltext text_small">Bạn bè</label></p>								<a href="#" onclick="return false;"><img src="{0}" class="avtborder" alt="{1}"></a>								<div class="zmsrch_userinfo"><p>{2}</p>{3}</div>'),W=new zm.Template('<div class="zmacbtn {0} fr zmbtn_action">{1}</div>								<a href="#" onclick="return false;"><img src="{2}" class="avtborder" alt="{3}"></a>								<div class="zmsrch_userinfo"><p><span class="icofan {4}"></span>{5}</p>{6}</div>'),aa=new zm.Template('<p class="zmsrch_actbtn fr"><a href="#" onclick="return false;" class="zmbtn1"><span class="getcode_icn zmicn16"></span>Tham gia</a></p>								<a href="#" onclick="return false;"><img src="{0}" class="zmsrch_appthumb" alt="{1}"></a>								<div class="zmsrch_userinfo"><p>{2}</p>{3}</div>'),Z=new zm.Template('<a href="#" onclick="return false;"><img src="{0}" class="avtborder" alt="{1}"></a>								<div class="zmsrch_userinfo"><p>{2}</p></div>'),ab=new zm.Template('<p class="zmsrch_actbtn fr zmbtn_action">{0}</p>								<a href="#" onclick="return false;"><img src="{1}" alt="{2}" class="avtborder"></a>								<div class="zmsrch_userinfo"><p>{3}</p>{4}</div>');zm("#textSearch").enableAutocomplete(Y,{maxItems:10,minChars:2,scroll:false,width:400,searchResponse:false,matchCase:false,delay:200,followElement:".zm_search",method:"getjson",itemClass:"zmac_item zmsrchdroplist_item",activeItemClass:"hover",listClass:"zmdropdown_padding",coverClass:"zmdropdown zmsrchdroplist",excludedClasses:"zmbtn_action",offsetTop:7,position:"fixed",addFooter:function(ac,ad){zm(ad).attr("class","zmsrch_viewall text_small");return"Xem tất cả kết quả tìm kiếm"},beforeSearch:function(){return true},beforeShow:function(){},formatItem:function(ak,aj,ai,ah,ag){if(ak[4]==-1||ak[4]==-2||ak[4]==-4){zm(ag).attr("class","zmsrch_linetext text_small").css({cursor:"default"})}if(ak[4]==-1){return"Có thể bạn quen"}else{if(ak[4]==-2){return"VIP profile"}else{if(ak[4]==-4){return"Ứng dụng"}}}switch(zm.intval(ak[4])){case 1:return X.render(ak[7],ak[1],ak[0],ak[5]?'<span class="zmsrch_mutualfrd text_small text_muted">'+ak[5]+" bạn chung</span>":"");case 3:var af="star",ae="Hâm mộ";if(ak[9]==2||ak[9]=="2"){af="org";ae="Thích"}else{if(ak[9]==3||ak[9]=="3"){af="icocmmnity";ae="Thích"}}var ad,ac;if(ak[8]){ad='<label class="zmsrch_labeltext text_small"><em class="icon_btn"></em></span>Đã '+ae.toLowerCase()+"</label>";ac="zmdislikebtn"}else{ad='<a href="#" class="zmbtn1 zmbtn_follow" onclick="return zmHeader.doSubscribe(this, \''+ak[2]+'\');"><em class="icon_btn"></em>'+ae+"</a>";ac="zmlikebtn"}return W.render(ac,ad,ak[7],ak[1],af,ak[0],ak[5]?'<span class="zmsrch_mutualfrd text_small text_muted">'+ak[5]+" người "+ae.toLowerCase()+"</span>":"");case 4:return aa.render(ak[7],ak[1],ak[0],ak[9]);case 2:default:if(ak[8]=="owner"){return Z.render(ak[7],ak[1],ak[0])}var ad='<a href="#" onclick="zmFriendRequest.sendRequest('+ak[6]+');return false;" class="zmbtn1">+ Kết bạn</a>';return ab.render(ad,ak[7],ak[1],ak[0],ak[5]?'<span class="zmsrch_mutualfrd text_small text_muted">'+ak[5]+" bạn chung</span>":"")}return""},makeUrl:function(ac){return Y+"?q="+ac+"&callback=?"},parseData:function(af){if(!af){return null}var ac=[],ae=0,ad=true,ah=true,ag=true;zm.each(af,function(){if(this.fullname||this.appname){if(this.isapp){if(ag){ag=false;ac.push(["","","","",-4,0])}}else{if(this.vip!=0){if(ah){ah=false;ac.push(["","","","",-2,0])}}else{if(!this.fr&&ad){ad=false;ac.push(["","","","",-1,0])}}}var ai=[];ai[0]=ai[1]=this.fullname;ai[2]=this.username;ai[3]=ae;if(this.isapp){ai[0]=ai[1]=this.title;ai[2]=this.appname;ai[4]=4;ai[5]=this.total;ai[6]=this.appid;ai[7]=this.linkimg;ai[8]=this.linkapp;ai[9]=this.t}else{if(this.vip!=0){ai[4]=3;ai[5]=this.totalf;ai[6]=this.userid;ai[7]=this.avt;ai[8]=this.isfan?1:0;ai[9]=this.vip;ai[10]=this.fkey}else{if(this.fr==1){ai[4]=1;ai[5]=this.mutual;ai[6]=this.userid;ai[7]=this.avt;ai[8]=this.fr}else{ai[4]=2;ai[5]=this.mutual;ai[6]=this.userid;ai[7]=this.avt;ai[8]=this.fr;ai[9]=this.hash}}}ae++;ac.push(ai)}});return ac},onItemSelected:function(ac,ad){if(ad=="footer"){zm("#textSearch").val(ac);v(zmConfig.ME_URL+"/zsearch?q="+encodeURIComponent(ac))}else{zm("#textSearch").val(ad[0]);if(ad[4]==4){if(ad[9]=="Tải game"){window.open(ad[8],"_blank")}else{v(ad[8])}}else{v(zmConfig.PROFILE_URL+"/"+ad[2])}}}}).keyup(function(ac){if(ac.keyCode==13){I();return false}}).placeholder();zm(".zmsrch_btn").click(I)}function I(){var W=zm.trim(zm("#textSearch").val());if(W){location.href=zmConfig.ME_URL+"/zsearch?q="+encodeURIComponent(W)}}function v(W){if(zmConfig.pageName=="apps"){window.open(W,"_blank")}else{location.href=W}}function O(){if(window.location.host=="me.zing.vn"){zm.get("http://me.zing.vn/zmt",{page:window.location.href},{dataType:"json"})}else{zm.getJSON("http://me.zing.vn/zmt",{page:window.location.href})}}return{init:function(){if(zm.intval(zmConfig.viewerId)<=0){return}if(!k){U();l();F();g("nt",w,R,function(){zm("#ntlist").append(new zm.ScrollableUI({content:n,width:380,uiClass:"notification",maxHeight:400,onscroll:b}).getElement())});u("nt");g("gn",y,C,function(){zm("#gnlist").append(new zm.ScrollableUI({content:e,width:380,uiClass:"notification",maxHeight:400,onscroll:a}).getElement())});u("gn");if(zmConfig.pageName!="apps"){g("pm",t,S,function(){zm("#pmlist").append(new zm.ScrollableUI({content:P,width:380,uiClass:"notification",maxHeight:400,onscroll:x}).getElement())});u("pm")}g("fr",Q,K);u("fr");D();K(true);O();setTimeout(O,1800000);k=true}else{F();u("nt");u("gn");u("pm");u("fr")}},doSubscribe:function(W,X){zmFanActionHandle.otherHandle("add",X,function(){var Y=zm(W);Y.parent().append('<label class="zmsrch_labeltext text_small"><em class="icon_btn"></em></span>Đã '+Y.text().toLowerCase()+"</label>").removeClass("zmlikebtn").addClass("zmdislikebtn");Y.remove()},function(){zm.Boxy.alert('<span class="zmicn infomsg_warning_icn"></span>Có lỗi xảy ra, vui lòng thử lại sau','<em class="zmpuicon zmicn fl"></em><strong>Thông báo</strong>',null,{boxyClass:"pu_small pu_alert"})});return false}}})();var zmLayout=(function(){var j,g,r=false,c=false,e=false,t={HEADER:"zmHeader",LEFTMENU:"zmLeftmenu",FOOTER:"zmFooter",TICKER:"ticker_display"};function p(w,x,y,v){zm.post("/layout",zm.extend({type:w,page:zmConfig.pageName,owner:zmConfig.ownerId},x),{dataType:"json"},y,v)}function i(w,v){if(j){return}j=true;zmCommon.makeRequest("/dtb/ajax","POST",{action:"get",pos:"34,36,37,38",appinfo:1},function(z){j=false;if(z.error!=0){zm.isFunction(v)&&v();return}var x;zm.each(z.data,function(A){if(this.pos==34){x=z.data.splice(A,1)[0];return false}});var y='<div class="zmmenu zmmenu_app typical_app leftmenu_stick"><p id="game-hot-leftmenu-title" class="zmmenu_group_title">Game hot</p><ul id="game-hot-leftmenu-list" class="zmmenu_group">'+f(z.data)+"</ul></div>";zm.isFunction(w)&&w(y);x&&l(x)},function(){zm.isFunction(v)&&v()})}function f(w){var v="";w.sort(d);zm.each(w,function(){var z={},y="";try{z=zm.parseJSON(this.content)}catch(x){}if(z["new"]){y='<img border="0" src="http://img.me.zdn.vn/images/app_uploads/newv4-1.01.png">'}else{if(z.hot){y='<img border="0" src="http://img.me.zdn.vn/images/app_uploads/hotv4-1.01.png">'}}v+='<li class="zmmenu_item">					<a id="lm_papp_'+this.appname+'" class="zmmenu_itemlink" href="'+this.link+'">						<span class="zmmenuico"><img src="'+this.appava+'" alt="'+this.appname+'"></span>'+this.apptitle+"					</a>				</li>"});return v}function l(v){zm("#zmdtb_34").html('<a href="'+v.link+'"><img src="'+v.img+'"></a>').fadeIn()}function d(w,v){return w.pos>v.pos?1:-1}function u(){zm(".zm_innerwrapper").each(function(){if(!zm(this).parents(".zmbody").length){zm(this).addClass("moveto_left")}});zm(".zmbgtheme").addClass("moveto_left")}function q(){zm(".zm_innerwrapper").removeClass("moveto_left");zm(".zmbgtheme").removeClass("moveto_left")}function a(z,v,x,y){var w=z;if(v){w=w+"."+v}if(x){w=w+"."+x}return zm.storage.get(w,y)}function k(A,v,x,z,B,y){var w=A;if(v){w=w+"."+v}if(x){w=w+"."+x}zm.storage.put(w,z,B,y)}function n(){zm("#zm_header").on("click",".zmh_subnav_icon",function(w){if(!zm(".zmh_subnav_dropdownlist").length){zm.post("/zaw/muw5",{wgs:"gsg",gsg_pos:"app",gsg_app:zmAppConfig.appId},{dataType:"json"},function(x){if(x&&x.err==0&&x.gsg){zm("#zm_header").after(x.gsg);zm(".zmh_subnav").addClass("selected");zm(".zmh_subnav_dropdownlist").addClass("selected");v()}})}else{if(zm(".zmh_subnav").hasClass("selected")){zm(".zmh_subnav").removeClass("selected");zm(".zmh_subnav_dropdownlist").removeClass("selected")}else{zm(".zmh_subnav").addClass("selected");zm(".zmh_subnav_dropdownlist").addClass("selected")}}w.preventDefault()});function v(){zm(".zmh_subnav_icon").clickOutside(function(){zm(".zmh_subnav").removeClass("selected");zm(".zmh_subnav_dropdownlist").removeClass("selected")},0,true).clickOutsideWith(zm(".zmh_subnav_dropdownlist"))}}function b(){zm("#zm_header").on("click",".zm_account .zmacc_avt",function(w){if(!g){v();g=true}if(zm(".zm_account").hasClass("selected")){zm(".zm_account").removeClass("selected")}else{zm(".zm_account").addClass("selected")}w.preventDefault()});function v(){zm(".zm_account .zmacc_avt").clickOutside(function(){zm(".zm_account").removeClass("selected")},0,true).clickOutsideWith(zm(".zmacc_dropmenu"))}}function h(v){zm("#zm_leftmenu").on("click","#"+v,function(x){var w=zm(this),y=zm("#"+v+"_menu");if(w.hasClass("active")){w.removeClass("active");y.removeClass("selected")}else{w.addClass("active");y.addClass("selected")}x.preventDefault()});m(v)}function m(v){zm("#"+v).clickOutside(function(){zm("#"+v).removeClass("active");zm("#"+v+"_menu").removeClass("selected")},0,true).clickOutsideWith(zm("#"+v+"_menu .disbox_ctn"))}function s(){zmEvent.bind("onshowTicker",function(v){if(v){u()}else{q()}})}function o(v){zm("#zm_leftmenu").html(v);zmEvent.fire("onRenderLeftMenu")}return{init:function(){var y,v,x;zmEvent.fire("profiler_start","HEADER_REMOTE");zmEvent.fire("profiler_start","LEFTMENU_REMOTE");zmEvent.fire("profiler_start","FOOTER_REMOTE");if(typeof zmTheme=="undefined"){zmLayout.checkWindowSizeForTheme();zm(window).resize(function(){zmLayout.checkWindowSizeForTheme()})}s();if(zmConfig.viewerId>0){if(zmConfig.pageName=="apps"){y=a(t.HEADER,zmConfig.pageName,zmConfig.viewerId)}else{y=a(t.HEADER,null,zmConfig.viewerId)}}else{zm("#zm_header").addClass("notlogin")}b();if(zmConfig.pageName!="apps"){}else{n()}if(zmConfig.viewerId>0){if(zmConfig.pageName=="profile"){}else{if(zmConfig.pageName=="hashtag"){v=a(t.LEFTMENU,zmConfig.pageName,null)}else{v=a(t.LEFTMENU,null,zmConfig.viewerId)}}}else{if(zmConfig.pageName=="hashtag"){v=a(t.LEFTMENU,zmConfig.pageName,null)}}if(v){o(v)}h("lm_zmevents");h("lm_zmapps");if(zmConfig.pageName=="hashtag"){zm("#lm_basic_menu").css("border-top","0px none");zm("#lm_basic_menu").css("padding-top","0px")}var w,z;if(zmConfig.pageName=="apps"){w=["header_apps","footer_apps"];z={appid:zmAppConfig.appId}}else{w=["header_default","leftmenu_default","footer_default"]}p(w,z,function(C){if(C&&C.data){if(C.data.header){if(zmConfig.pageName!="apps"){zm("#zm_header").hide()}zm("#zm_header").html(C.data.header);if(zmConfig.pageName!="apps"){var B=a(t.TICKER,null,zmConfig.viewerId,true);if(B){u()}zm("#zm_header").show()}if(zmConfig.pageName=="apps"){k(t.HEADER,zmConfig.pageName,zmConfig.viewerId,C.data.header,3600*24*7)}else{k(t.HEADER,null,zmConfig.viewerId,C.data.header,3600*24*7)}zmEvent.fire("onRenderHeader");r=true;zmHeader.init();zmEvent.fire("profiler_end","HEADER_REMOTE")}if(C.data.leftmenu){if(zmConfig.pageName=="profile"){}else{function A(){m("lm_zmevents");m("lm_zmapps");if(zmConfig.pageName=="hashtag"){k(t.LEFTMENU,zmConfig.pageName,zmConfig.viewerId,zm("#zm_leftmenu").html(),3600*24*7);zm("#lm_basic_menu").css("border-top","0px none");zm("#lm_basic_menu").css("padding-top","0px")}else{k(t.LEFTMENU,null,zmConfig.viewerId,zm("#zm_leftmenu").html(),3600*24*7)}}i(function(D){o(C.data.leftmenu);zm("#game-hot-leftmenu-title").remove();zm("#game-hot-leftmenu-list").remove();zm("#lm_basic_menu").after(D);A()},function(){o(C.data.leftmenu);A()})}c=true;zmEvent.fire("profiler_end","LEFTMENU_REMOTE")}if(C.data.footer){zm("#zm_footer").append(C.data.footer);e=true}}else{if(y){if(zmConfig.pageName!="apps"){zm("#zm_header").hide()}zm("#zm_header").html(y);if(zmConfig.pageName!="apps"){var B=a(t.TICKER,null,zmConfig.viewerId,true);if(B){u()}zm("#zm_header").show()}zmEvent.fire("onRenderHeader");r=true;zmHeader.init()}}},function(){if(y){if(zmConfig.pageName!="apps"){zm("#zm_header").hide()}zm("#zm_header").html(y);if(zmConfig.pageName!="apps"){var A=a(t.TICKER,null,zmConfig.viewerId,true);if(A){u()}zm("#zm_header").show()}zmEvent.fire("onRenderHeader");r=true;zmHeader.init();zmEvent.fire("profiler_end","FOOTER_REMOTE")}})},reloadLeftmenu:function(){p(["leftmenu_default"],{},function(w){if(!w||!w.data||!w.data.leftmenu){return}if(zmConfig.pageName=="profile"){}else{function v(){m("lm_zmevents");m("lm_zmapps");if(zmConfig.pageName=="hashtag"){k(t.LEFTMENU,zmConfig.pageName,zmConfig.viewerId,zm("#zm_leftmenu").html(),3600*24*7);zm("#lm_basic_menu").css("border-top","0px none");zm("#lm_basic_menu").css("padding-top","0px")}else{k(t.LEFTMENU,null,zmConfig.viewerId,zm("#zm_leftmenu").html(),3600*24*7)}}i(function(x){o(w.data.leftmenu);zm("#game-hot-leftmenu-title").remove();zm("#game-hot-leftmenu-list").remove();zm("#lm_basic_menu").after(x);v()},function(){o(w.data.leftmenu);v()})}})},checkWindowSizeForTheme:function(){if(zm(".zmviewport").outerWidth()%2>0){zm(".zmbgtheme").addClass("fixgap")}else{zm(".zmbgtheme").removeClass("fixgap")}},headerLoaded:function(){return r},STORAGE_DEFINE_LIST:t}})();var zmBookMark=(function(){var b={};b.data={};b.data.numberRD=0;b.backUpData={};b.rightBoxData={};b.rightBoxDisplayItem=4;b.rightBoxDescriptionLength=107;b.inTabBookmark=true;b.addBookmarkRightBox=function(f){var d=zm(f),e=zm.intval(d.attr("appId"));if(e<=0){return}b.callAddBookmark(e,2,function(){b.onAddBookmarkRightBox(e,true)})};b.onAddBookmarkRightBox=function(l,f,j){for(var e=0,h=b.rightBoxData.recent.length;e<h;e++){var g=b.rightBoxData.recent[e];if(g.appId===l){if(!b.rightBoxData.bookmark||!b.rightBoxData.bookmark.length){b.addBookmarkTabRightBox();b.rightBoxData.bookmark=[]}b.rightBoxData.bookmark.splice(0,0,g);if(!b.inTabBookmark&&f){var k=zm('#my_game_box_id .myapp_list a.btn_game_addbmrk[appId="'+l+'"]');if(k.length){k.attr("class","zmbtn3 fr");k.attr("href",zmConfig.ME_URL+"/apps/"+g.appName+"?_src=me_profile_rec");k.attr("target","_blank");k.attr("onclick","");k.html("Chơi ngay")}}else{if(b.inTabBookmark&&!f){zm("#my_game_box_id .myapp_list").html(b.renderBookmarkListItemRightBox(true,b.rightBoxData.bookmark))}}return}}var d=b.backUpData[j];if(d&&d.appId>0){if(!b.rightBoxData.bookmark||!b.rightBoxData.bookmark.length){b.addBookmarkTabRightBox();b.rightBoxData.bookmark=[]}b.rightBoxData.bookmark.splice(0,0,d);if(b.inTabBookmark&&!f){zm("#my_game_box_id .myapp_list").html(b.renderBookmarkListItemRightBox(true,b.rightBoxData.bookmark))}}};b.onRemoveBookmarkRightBox=function(f){for(var d=0,e=b.rightBoxData.bookmark.length;d<e;d++){if(b.rightBoxData.bookmark[d].appId===f){b.rightBoxData.bookmark.splice(d,1);if(b.inTabBookmark&&b.rightBoxData.bookmark.length>0){zm("#my_game_box_id .myapp_list").html(b.renderBookmarkListItemRightBox(true,b.rightBoxData.bookmark))}else{if(b.rightBoxData.bookmark.length===0){b.removeBookmarkTabRightBox()}}break}}};b.substrDescriptionItemRightBox=function(e){if(e.length>b.rightBoxDescriptionLength){var d=b.rightBoxDescriptionLength,f=false;while(!f){if(e.charCodeAt(d)===32){e=e.substr(0,d)+"...";break}d--}}return e};b.renderBookmarkItemRightBox=function(f,l){var j,m,d,k=false,g;if(!l&&b.rightBoxData.bookmark&&b.rightBoxData.bookmark.length){for(var h=0,e=b.rightBoxData.bookmark.length;h<e;h++){if(b.rightBoxData.bookmark[h].appId===f.appId){k=true;break}}}if(l||k){if(l){g="?_src=me_profile_bm"}else{g="?_src=me_profile_rec"}j='<a appId="'+f.appId+'" class="zmbtn3 fr" href="'+zmConfig.ME_URL+"/apps/"+f.appName+g+'" target="_blank">Chơi ngay</a>'}else{g="?_src=me_profile_rec";j='<a appId="'+f.appId+'" class="zmbtn2 btn_game_addbmrk fr" href="#" onclick="zmBookMark.addBookmarkRightBox(this); return false;">							<span class="appbmrk_icn"><span class="appplus_icon fl">+</span><span class="bmrkappline_icon fl"><em></em><em></em><em></em></span></span>							Ghi nhớ						</a>'}if(f.shortDesc){m='<p class="clearfix myapp_desc">'+b.substrDescriptionItemRightBox(f.shortDesc)+"</p>"}else{m=""}if(f.urlHelp&&f.urlHelp.length){d='<p class="bottomlist_link"><a href="'+f.urlHelp+'">Hỗ trợ</a></p>'}else{d=""}return'<li>			<a class="myapp_link" href="'+zmConfig.ME_URL+"/apps/"+f.appName+g+'" target="_blank" title="'+f.appTitle+'"><img class="appthumbborder" src="'+f.appImg+'" alt="'+f.appTitle+'"></a>			<div class="ctndisbox myapp_tooltip trans">				<div class="disbox_inner">					<span class="icodisbox topleft"></span>					<div class="disbox">						<div class="contdisbox">							'+j+'							<h3 class="text_larger"><a href="'+zmConfig.ME_URL+"/apps/"+f.appName+g+'" target="_blank" class="text_default">'+f.appTitle+'</a></h3>							<p><span class="appstar_'+f.ranking+' app_tinystar"></span></p>							'+m+"							"+d+"						</div>					</div>				</div>			</div>		</li>"};b.renderBookmarkListItemRightBox=function(f,h){var e="";for(var d=0,g=h.length;d<g;d++){if(f&&d===b.rightBoxDisplayItem){e+='<li><a class="myapp_link trans myapp_total text_center" href="#" onclick="zmBookMark.show(2); return false;">+ '+(g-b.rightBoxDisplayItem)+"</a></li>";break}if(!f&&d===b.rightBoxDisplayItem+1){break}e+=b.renderBookmarkItemRightBox(h[d],f)}return e};b.addBookmarkTabRightBox=function(){zm("#my_game_box_id .crighttxt").prepend('<a href="#" tabId="0" class="trans">Ghi nhớ</a>')};b.removeBookmarkTabRightBox=function(){zm('#my_game_box_id .crighttxt a[tabId="0"]').remove();zm('#my_game_box_id .crighttxt a[tabId="1"]').click()};b.bindSelectTabRightBoxEvent=function(){zm("#my_game_box_id").on("click",".crighttxt a",function(h){h.preventDefault();var d=zm(this),f=zm.intval(d.attr("tabId"));d.parent().find("a").removeClass("selected");d.addClass("selected");var g;if(f===0){g=b.renderBookmarkListItemRightBox(true,b.rightBoxData.bookmark);b.inTabBookmark=true}else{if(f===1){g=b.renderBookmarkListItemRightBox(false,b.rightBoxData.recent);b.inTabBookmark=false}}zm("#my_game_box_id .myapp_list").html(g)})};b.renderRightBox=function(e,d){zm.post("/layout/bm",{action:"get",from:0},{dataType:"json"},function(k){if(k&&k.error>=0&&k.data){var g,f;if(k.data.bookmark&&k.data.bookmark.length){g=true}if(k.data.recent&&k.data.recent.length){f=true}if(g||f){var j="",i="";if(g){b.rightBoxData.bookmark=k.data.bookmark}if(f){b.rightBoxData.recent=k.data.recent}if(g&&!f){j='<a href="#" tabId="0" class="selected trans">Ghi nhớ</a>';i=b.renderBookmarkListItemRightBox(true,b.rightBoxData.bookmark);b.inTabBookmark=true}else{if(!g&&f){j='<a href="#" tabId="1" class="selected trans">Mới dùng</a>';i=b.renderBookmarkListItemRightBox(false,b.rightBoxData.recent);b.inTabBookmark=false}else{j='<a href="#" tabId="0" class="selected trans">Ghi nhớ</a><em>•</em><a href="#" tabId="1" class="trans">Mới dùng</a>';i=b.renderBookmarkListItemRightBox(true,b.rightBoxData.bookmark);b.inTabBookmark=true}}var h='<div class="zmcont myapp_cont">							<div class="zmconttitle">								<div class="crighttxt text_small">'+j+'</div>								<p class="ctitletxt">Game của tôi</p>							</div>							<div class="zmcontbody">								<ul class="myapp_list clearfix">'+i+'</ul>								<div class="bottomlist_link">									<a href="#" onclick="zmBookMark.show(2); return false;">Danh sách ghi nhớ</a>									<em>•</em>									<a href="http://appstore.zing.vn/?_src=me_profile" target="_blank">Khám phá kho game</a>								</div>							</div>						</div>';if(zm("#my_game_box_id").length){zm("#my_game_box_id").html(h)}else{h='<div id="my_game_box_id" class="zmcont_wrapper">'+h+"</div>";if(zm("#about_box_id").length){zm("#about_box_id").after(h)}else{zm("#profiletab_content .zmr_inner").prepend(h)}}if(zm.isFunction(e)){e(k)}}else{zm("#my_game_box_id").remove()}}else{zm("#my_game_box_id").remove()}},function(){zm("#my_game_box_id").remove()})};b.initRightBox=function(){b.renderRightBox(function(d){b.bindSelectTabRightBoxEvent()})};b.show=function(f){var d={};d.title="Thêm game hoặc ứng dụng";d.titleIcon=true;d.boxyClass="pu_addgame";d.modal=true;d.okButton="";d.cancelButton="Đóng";d.cancelClass="cancelbtn zmbtndefault";var e=new zm.Boxy(d);zm.post("/layout/bm",{action:"get",from:f},{dataType:"json"},function(j){if(j.error>=0){zmBookMark.data=JSON.parse(JSON.stringify(j.data));zmBookMark.backUpData=j.data.recent;zmBookMark.backUpRecent=JSON.parse(JSON.stringify(j.data.recent));for(var h=0;h<j.data.bookmark.length;h++){var l=j.data.bookmark[h];zmBookMark.backUpData.push(l)}e.setContent(zmBookMark.renderContent(j.data));zmBookMark.boxy=e;e.show();var k,g;k=zmBookMark.renderListRD(zmBookMark.data.bookmark);g=zmBookMark.renderListRT(zmBookMark.data.recent);zmBookMark.data.numberRd=zmBookMark.data.bookmark.length;zmBookMark.getRightScroll().setContent(k);zmBookMark.getRightScroll().appendTo(zm(".addGamePopUpRightHolder"));zmBookMark.getLeftScroll().setContent(g);zmBookMark.getLeftScroll().appendTo(zm(".addGamePopUpLeftHolder"));e.center()}})};b.getLeftScroll=function(){if(!b.leftScroll){b.leftScroll=new zm.ScrollableUI({content:"",width:345,height:320})}return b.leftScroll};b.getRightScroll=function(){if(!b.rightScroll){b.rightScroll=new zm.ScrollableUI({content:"",width:256,height:320})}return b.rightScroll};b.renderItemRecent=function(f){var d=b.indexOfBackUpData(f);var e=new zm.Template('<div class="game_detail_box">                    <a class="addgamebtn zmicn" data-index="{0}" href="#" onclick="return zmBookMark.addHandle(this, {0})">                    </a> <a class="gameimg" href="{1}" target="_blank">                        <img src="{2}" alt="{3}">                    </a>                    <div class="game_desc">                        <p class="game_textname">                            </span><a class="namegame" href="{1}" target="_blank">{4}</a></p>                        <p class="inf">                            <span class="game_cate">{5}</span>                            <em>-</em>                            <span class="pu_num_uplay"><b>{6}</b> người chơi</span></p>                    </div>                    <div class="clr"></div>                </div>');return e.render(d,"/apps/"+f.appName,f.appImg,f.appTitle,f.appTitle,f.appType,zmString.formatNumber(f.numberOfPlayers,"."))};b.renderItemRemembered=function(f){var d=b.indexOfBackUpData(f);var e=new zm.Template('<li>                         <a class="delicn zmicn16 removeGame" href="#" data-index="{1}" onclick="return zmBookMark.removeHandle(this,{1})"></a>                        <a href="/apps/{0}" target="_blank">                            <img class="gameavt" alt="{2}" src="{3}">                            <span class="gametitle">{4}</span>                        </a>                        <span class="zmloading" style="display:none;"></span>                </li>');return e.render(f.appName,d,f.appTitle,f.appImg,f.appTitle)};b.renderRecent=function(d){var e=new zm.Template('<div class="leftpu addGamePopUp">                    <p class="head_title">Bạn muốn ghi nhớ game hoặc ứng dụng mới dùng?</p>                    <div class="addGamePopUpLeftHolder">                    </div>                </div>');return e.render()};b.renderListRT=function(d){var f='<ul class="game_box_list addGamePopUpLeft">';for(var e=0;e<d.length;e++){var g=d[e];f+=b.renderItemRecent(g,e)}return f+"</ul>"};b.renderRemembered=function(d){var e=new zm.Template('<div class="rightpu addGamePopUp">                    <p class="head_title jsRenderRememberedNumber">Đã Ghi nhớ ({0})</p>                    <div class="addGamePopUpRightHolder">                    </div>                </div>');return e.render(d.length)};b.renderListRD=function(d){var f='<ul class="list_game_bookmark addGamePopUpRight">';for(var e=0;e<d.length;e++){var g=d[e];f+=b.renderItemRemembered(g,e)}return f+"</ul>"};b.renderContent=function(g){var e,h,d;var f=new zm.Template('{0}{1}<div class="clr"></div>');if(!g.recent){g.recent=new Array()}if(!g.bookmark){g.bookmark=[]}h=b.renderRecent(g.recent);d=b.renderRemembered(g.bookmark);e=f.render(h,d);return e};function a(e,f,h,g,d){zm.post("/layout/bm",{action:e,appId:f,from:h},{dataType:"json"},function(i){if(i.error===0){if(zm.isFunction(g)){g()}}else{if(zm.isFunction(d)){d()}}})}b.callAddBookmark=function(e,g,f,d){a("add",e,g,f,d)};b.callRemoveBookmark=function(e,g,f,d){a("remove",e,g,f,d)};function c(d){d=d.substring(12);d=d.substring(0,d.length-1);return parseInt(d)}b.addHandle=function(h,f){var e=zmBookMark.backUpData[f];var g=zm(h);var d=g.parent();if(g.hasClass("loading")){return false}else{}g.click(function(){return false});g.css("background",'url("'+zmConfig.IMAGE_URL+'/loading/loading_32.gif") no-repeat scroll 0 0 rgba(0, 0, 0, 0)').addClass("loading");b.callAddBookmark(e.appId,1,function(){b.data.numberRD=c(zm(".jsRenderRememberedNumber").html());b.data.numberRD++;b.data.bookmark.push(e);b.data.recent.splice(f,1);d.remove();zm("ul.addGamePopUpRight").prepend(b.renderItemRemembered(e,b.data.bookmark.indexOf(e)));zmLayout.reloadLeftmenu();zm(".jsRenderRememberedNumber").html("Đã Ghi nhớ ("+b.data.numberRD+")");g.css("background","");if(zmConfig.pageName==="profile"){b.onAddBookmarkRightBox(e.appId,false,f)}},function(){g.css("background","")});return false};b.removeHandle=function(f,e){var d=zmBookMark.backUpData[e];var g=zm(f).parent().find(".zmloading").show();zm(f).parent().find(".removeGame").hide();b.callRemoveBookmark(d.appId,1,function(){b.data.numberRD=c(zm(".jsRenderRememberedNumber").html());b.data.numberRD--;for(var h=0;h<b.backUpRecent.length;h++){var i=b.backUpRecent[h];if(i.appId===d.appId){b.data.recent.push(d);zm("ul.addGamePopUpLeft").prepend(b.renderItemRecent(d,b.data.recent.indexOf(d)));break}}b.data.bookmark.splice(e,1);zm(f).parent().remove();zmLayout.reloadLeftmenu();zm(".jsRenderRememberedNumber").html("Đã Ghi nhớ ("+b.data.numberRD+")");g.hide();if(zmConfig.pageName==="profile"){b.onRemoveBookmarkRightBox(d.appId)}},function(){g.hide()});return false};b.indexOfBackUpData=function(g){var e=-1;if(b.backUpData){for(var d=0;d<b.backUpData.length;d++){var f=b.backUpData[d];if(g.appId===f.appId){e=d;break}}}return e};return b})();var zmLayoutScrollTop=(function(){var b=false;var c=function(){function h(){return(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function d(){var e=h();if(e>300){if(!b){zm(".back_to_top_layout_js").fadeIn()}b=true}else{if(b){zm(".back_to_top_layout_js").fadeOut()}b=false}}var g=new zm.Template('<div class="fixed_function_icn text_right">                    <ul>                        <li class="backtotop_icn back_to_top_layout_js">                            <a class="trans" href="#" title="Về đầu trang">                                <em class="zmicn16"></em>                            </a>                        </li>                        <li style="display: none;" class="helpcentre_icn">                            <a class="trans" href="#">                                <em class="zmicn16"></em>                                <span class="fixedbtn_label trans">Hỗ trợ</span>                            </a>                        </li>                        <li style="display: none;" class="feedback_icn">                            <a class="trans" href="#">                                <em class="zmicn16"></em>                                <span class="fixedbtn_label trans">Góp ý / Báo lỗi</span>                            </a>                        </li>                    </ul>                </div>');try{zm(".zmpagecont").prepend(g.render());zm(".backtotop_icn").hide();zm(".back_to_top_layout_js").click(function(){zmCommon.scrollToTop();return false});var f=0;zm(window).scroll(function(){clearTimeout(f);f=setTimeout(d(),200)})}catch(i){}};var a={};a.start=c;return a})();var zmLayoutHeightStub=(function(){var d="zmLayoutHeightStub";var e=[];function c(i){e.push({selector:i})}function h(){var i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return i}function g(){zm(window).bind("unload",function(){zm.storage.put(d+"zml",zm("#zm_leftmenu").height());zm.storage.put(d+"zmr",zm(".zmr_inner").height())})}function f(){g();var m=zm(".zmr_inner");for(var j=0;j<m.length;j++){var l=m.get(j);var k={};k.minHeight="";k.opacity=1;l.css(k)}}function a(){g();var m=zm("#zm_leftmenu");for(var j=0;j<m.length;j++){var l=m.get(j);var k={};k.minHeight="";k.opacity=1;l.css(k)}}var b={};b.reg=c;b.unStubRight=f;b.unStubLeft=a;return b})();zm.ready(function(){zmLayout.init();if(zmConfig.pageName==="home"||zmConfig.pageName==="hashtag"){}zm("#zm_leftmenu").on("click",".zmmenu_item.listviewmore_btn",function(b){zmBookMark.show(1);b.preventDefault()});if(zmConfig.pageName==="profile"&&zmConfig.viewerType===0&&zmConfig.viewerId===zmConfig.ownerId){zmBookMark.initRightBox()}try{if(zmConfig.pageName==="home"||zmConfig.pageName==="hashtag"){zmEvent.bind("rightMenuFadedIn",function(){zmStickUp.responsiveRegister(".zmr_inner",".zmcont",zm("#zm_header").outerHeight(),"#zm_footer","sticked",16,16);zmStickUp.responsiveRegister(".zml_inner",".leftmenu_stick",zm("#zm_header").outerHeight(),"#zm_footer","sticked",16,16);zmStickUp.initResponsiveStick();zmLayoutHeightStub.unStubRight()});zmEvent.bind("onRenderLeftMenu",function(){zmLayoutHeightStub.unStubLeft()})}if(zmConfig.pageName==="profile"){zmEvent.bind("onRenderPhotoBox",function(){zmStickUp.responsiveRegister(".zmr_inner",".zmcont",95,"#zm_footer","sticked",15,16);zmStickUp.initResponsiveStick()})}zmLayoutScrollTop.start()}catch(a){}});